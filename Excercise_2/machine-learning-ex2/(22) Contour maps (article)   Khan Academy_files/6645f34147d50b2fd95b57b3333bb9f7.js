(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["6645f34147d50b2fd95b57b3333bb9f7"],{"+lle":function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("+2oP");r("5DmW");r("NBAS");r("FZtP");var i=n(r("q1tI"));function n(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function o(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){d(t,e,r[e])})}return t}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function l(e,t,r){if(t)a(e.prototype,t);if(r)a(e,r);return e}function u(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return p(e)}function c(e){c=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return c(e)}function p(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return h(e,t)}function d(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var v=r("17x9");var g=r("wk+a");var _=r("F/us");var i18n=r("HEOz");var m="start-ref-";var y="end-ref-";var b={display:"inline-block",width:0,visibility:"hidden"};var O={display:"inline",whiteSpace:"nowrap"};var w={display:"inline-block",color:"rgb(255, 255, 255)",backgroundColor:"rgb(90, 90, 90)",paddingLeft:10,paddingRight:10,userSelect:"none",WebkitUserSelect:"none"};var P={display:"inline-block",color:"rgb(255, 255, 255)",backgroundColor:"rgb(90, 90, 90)",userSelect:"none",WebkitUserSelect:"none",width:22,height:22,borderRadius:"50%",textAlign:"center"};var k=function(e){f(a,e);function a(){var e;var t;s(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++){n[o]=arguments[o]}t=u(this,(e=c(a)).call.apply(e,[this].concat(n)));d(p(t),"getRefContent",function(){return t.props.refContent});return t}l(a,[{key:"render",value:function e(){return i.createElement("span",{style:b},i18n.doNotTranslate("_"))}}]);return a}(i.Component);d(k,"propTypes",{refContent:v.node.isRequired});var x=function(e){f(t,e);function t(){s(this,t);return u(this,c(t).apply(this,arguments))}l(t,[{key:"render",value:function e(){return i.createElement("span",{style:b},i18n.doNotTranslate("_"))}}]);return t}(i.Component);var E={newline:g.defaultRules.newline,paragraph:g.defaultRules.paragraph,escape:g.defaultRules.escape,passageFootnote:{order:g.defaultRules.escape.order+.1,match:g.inlineRegex(/^\^/),parse:function e(t,r,n){var o=n.lastFootnote.id+1;var a={id:o,text:o===1?"*":""+o};if(n.lastFootnote.text==="*"){n.lastFootnote.text=""+n.lastFootnote.id}n.lastFootnote=a;return a},react:function e(t,r,n){return i.createElement("sup",{key:n.key},t.text)}},refStart:{order:g.defaultRules.escape.order+.2,match:function e(t,r){var n=/^\{\{/.exec(t);if(n){var o=2;var a=0;while(o<t.length){var i=t.slice(o,o+2);if(i==="{{"){a++;o++}else if(i==="}}"){if(a>0){a--;o++}else{break}}o++}var s=t.slice(2,o);return[n[0],s]}else{return null}},parse:function e(t,r,n){if(!n.useRefs){return{ref:null,refContent:null}}var o=n.lastRef+1;n.lastRef=o;n.currentRef.push(o);var a=r("(“"+t[1]+"”)\n\n",_.defaults({useRefs:false},C));return{ref:o,refContent:a}},react:function e(t,r,n){if(t.ref==null){return null}var o=r(t.refContent,{});return i.createElement(k,{ref:m+t.ref,key:m+t.ref,refContent:o})}},refEnd:{order:g.defaultRules.escape.order+.3,match:g.inlineRegex(/^\}\}/),parse:function e(t,r,n){if(!n.useRefs){return{ref:null}}var o=n.currentRef.pop()||null;return{ref:o}},react:function e(t,r,n){if(t.ref!=null){return i.createElement(x,{ref:y+t.ref,key:y+t.ref})}else{return null}}},squareLabel:{order:g.defaultRules.escape.order+.4,match:g.inlineRegex(/^\[\[(\w+)\]\]( *)/),parse:function e(t,r,n){if(!n.firstQuestionRef){n.firstQuestionRef=t[1]}return{content:t[1],space:t[2].length>0}},react:function e(t,r,n){return[i.createElement("span",{key:"visual-square",className:"perseus-passage-square-label",style:O,"aria-hidden":"true"},i.createElement("span",{style:w},t.content)),i.createElement("span",{key:"alt-text",className:"perseus-sr-only"},i18n.$_("[Marker for question %(number)s]",{number:t.content})),t.space?" ":null]}},circleLabel:{order:g.defaultRules.escape.order+.5,match:g.inlineRegex(/^\(\((\w+)\)\)( *)/),parse:function e(t,r,n){return{content:t[1],space:t[2].length>0}},react:function e(t,r,n){return[i.createElement("span",{key:"visual-circle",className:"perseus-passage-circle-label",style:O,"aria-hidden":true},i.createElement("span",{style:P},t.content)),i.createElement("span",{key:"alt-text",className:"perseus-sr-only"},i18n.$_("[Circle marker %(number)s]",{number:t.content})),t.space?" ":null]}},squareBracketRef:{order:g.defaultRules.escape.order+.6,match:g.inlineRegex(/^\[(\d+)\]( *)/),parse:function e(t,r,n){if(!n.firstSentenceRef){n.firstSentenceRef=t[1]}return{content:t[1],space:t[2].length>0}},react:function e(t,r,n){return[i.createElement("span",{key:"visual-brackets",className:"perseus-passage-bracket-label","aria-hidden":"true"},"[",t.content,"]"),i.createElement("span",{key:"alt-text",className:"perseus-sr-only"},i18n.$_("[Sentence %(number)s]",{number:t.content})),t.space?" ":null]}},highlight:{order:g.defaultRules.escape.order+.7,match:g.inlineRegex(/^{highlighting.start}(.+?){highlighting.end}/),parse:function e(t,r,n){return{content:t[1]}},react:function e(t,r,n){return[i.createElement("span",{key:0,className:"perseus-highlight"},t.content)]}},reviewHighlight:{order:g.defaultRules.escape.order+.7,match:g.inlineRegex(/^{review-highlighting.start}(.+?){review-highlighting.end}/),parse:function e(t,r,n){return{content:t[1]}},react:function e(t,r,n){return[i.createElement("span",{key:0,className:"perseus-review-highlight"},t.content)]}},strong:g.defaultRules.strong,u:g.defaultRules.u,em:g.defaultRules.em,del:g.defaultRules.del,text:o({},g.defaultRules.text,{react:function e(t,r,n){return i.createElement("span",{key:n.key},t.content)}})};var C={currentRef:[],useRefs:true,lastRef:0,lastFootnote:{id:0,text:""}};var S=g.parserFor(E);var T=function e(t,r){r=r||{};var n=t+"\n\n";return S(n,_.extend(r,C))};e.exports={parse:T,output:g.reactFor(g.ruleOutput(E,"react")),START_REF_PREFIX:m,END_REF_PREFIX:y,_rulesForTesting:E}},"/Qgg":function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("yXV3");r("zKZe");r("5DmW");r("NBAS");r("FZtP");var u=n(r("q1tI"));function n(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function o(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){v(t,e,r[e])})}return t}function c(){c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};return c.apply(this,arguments)}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)a(e.prototype,t);if(r)a(e,r);return e}function l(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return f(e)}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return p(e)}function f(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)d(e,t)}function d(e,t){d=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return d(e,t)}function v(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var g=r("TSYQ");var m=r("17x9");var _=r("F/us");var y=r("j8wP").Options;var b=r("+jAD");var O=r("Atlv");var w=r("zahm"),P=w.linterContextProps,k=w.linterContextDefault;var x=function(e){h(a,e);function a(){var e;var n;i(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++){r[o]=arguments[o]}n=l(this,(e=p(a)).call.apply(e,[this].concat(r)));v(f(n),"change",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return b.change.apply(f(n),t)});v(f(n),"getUserInput",function(){return n.refs.renderer.getUserInput()});v(f(n),"getSerializedState",function(){return n.refs.renderer.getSerializedState()});v(f(n),"restoreSerializedState",function(e,t){n.refs.renderer.restoreSerializedState(e,t);return null});v(f(n),"simpleValidate",function(e){return n.refs.renderer.score()});v(f(n),"getInputPaths",function(){return n.refs.renderer.getInputPaths()});v(f(n),"setInputValue",function(e,t,r){return n.refs.renderer.setInputValue(e,t,r)});v(f(n),"getAcceptableFormatsForInputPath",function(e){return n.refs.renderer.getAcceptableFormatsForInputPath(e)});v(f(n),"getRenderer",function(){return n.refs.renderer});v(f(n),"focus",function(){return n.refs.renderer.focus()});v(f(n),"focusInputPath",function(e){n.refs.renderer.focusPath(e)});v(f(n),"blurInputPath",function(e){n.refs.renderer.blurPath(e)});v(f(n),"showRationalesForCurrentlySelectedChoices",function(){n.refs.renderer.showRationalesForCurrentlySelectedChoices()});return n}s(a,[{key:"componentDidMount",value:function e(){this.forceUpdate()}},{key:"render",value:function e(){var n=this;var t=_.extend({},y.defaults,this.props.apiOptions,{onFocusChange:function e(t,r){if(r){n.props.onBlur(r)}if(t){n.props.onFocus(t)}}});var r=_.indexOf(this.props.findWidgets("group"),this);var o=this.props.apiOptions.groupAnnotator(r,this.props.widgetId);var a=function e(t){if(n.refs.renderer){n.change("widgets",n.refs.renderer.props.widgets)}};var i=this.refs.renderer&&this.refs.renderer.score();var s=i&&i.type!=="invalid";var l=i&&i.type==="invalid";return u.createElement("div",{className:g({"perseus-group":true,"perseus-group-valid-answer":s,"perseus-group-invalid-answer":l})},o,u.createElement(O,c({},this.props,{ref:"renderer",apiOptions:t,findExternalWidgets:this.props.findWidgets,reviewMode:!!this.props.reviewModeRubric,onInteractWithWidget:a,linterContext:this.props.linterContext})),this.props.icon&&u.createElement("div",{className:"group-icon"},this.props.icon))}}]);return a}(u.Component);v(x,"propTypes",o({},b.propTypes,{content:m.string,widgets:m.object,images:m.object,icon:m.object,reviewModeRubric:m.object,linterContext:P}));v(x,"defaultProps",{content:"",widgets:{},images:{},icon:null,linterContext:k});var E=function e(t,r){return _.extend({},t,r(t))};e.exports={name:"group",displayName:"Group (SAT only)",widget:x,traverseChildWidgets:E,hidden:false,isLintable:true}},"1I17":function(e,t,r){"use strict";r("ma9I");r("2B1R");r("5DmW");r("NBAS");var n=o(r("q1tI"));function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)a(e.prototype,t);if(r)a(e,r);return e}function l(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return c(e)}function u(e){u=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return u(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)f(e,t)}function f(e,t){f=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return f(e,t)}function h(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var d=r("17x9");var v=r("JtQr");var g=r("KSWw"),m=g.layout;var y=r("HQqP");var i18n=r("HEOz");var b=y.parse;var O=y.ParseError;var w=30;var P=function(e){p(a,e);function a(){var e;var o;i(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}o=l(this,(e=u(a)).call.apply(e,[this].concat(r)));h(c(o),"state",{parsedSmiles:null,error:null});h(c(o),"stateFromSmiles",function(e){try{o.setState({parsedSmiles:b(e),error:null})}catch(e){if(e instanceof O){o.setState({error:e.message})}else{throw e}}});h(c(o),"setCanvasBounds",function(e,t){var r=Math.max.apply(Math,t.map(function(e){return e.pos?e.pos[0]:-Infinity}));var n=Math.max.apply(Math,t.map(function(e){return e.pos?e.pos[1]:-Infinity}));var o=Math.min.apply(Math,t.map(function(e){return e.pos?e.pos[0]:Infinity}));var a=Math.min.apply(Math,t.map(function(e){return e.pos?e.pos[1]:Infinity}));var i=r-o+2*w;var s=n-a+2*w;e.width=i;e.height=s;return[w-o,w-a]});h(c(o),"canvasRender",function(){if(!!o.state.error||!o.state.parsedSmiles){return}var e=m(o.state.parsedSmiles,o.props.rotationAngle);var t=o.refs.canvas;var r=o.setCanvasBounds(t,e);var n=t.getContext("2d");n.clearRect(0,0,t.width,t.height);n.save();n.translate(r[0],r[1]);v(n,e);n.restore()});return o}s(a,[{key:"UNSAFE_componentWillMount",value:function e(){this.stateFromSmiles(this.props.smiles)}},{key:"componentDidMount",value:function e(){this.canvasRender()}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){this.stateFromSmiles(t.smiles)}},{key:"componentDidUpdate",value:function e(){this.canvasRender()}},{key:"render",value:function e(){var t=n.createElement("canvas",{className:"molecule-canvas",id:this.props.id+"-molecule",ref:"canvas"},i18n.$_("A molecular structure drawing. SMILES notation: %(content)s",{content:this.props.smiles}));if(this.state.error){t=n.createElement("div",{className:"error"},this.state.error)}return n.createElement("div",{className:"molecule-canvas"},t)}}]);return a}(n.Component);h(P,"propTypes",{id:d.string.isRequired,rotationAngle:d.number,smiles:d.string});var k=function(e){p(a,e);function a(){var e;var t;i(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++){n[o]=arguments[o]}t=l(this,(e=u(a)).call.apply(e,[this].concat(n)));h(c(t),"simpleValidate",function(){return{type:"points",earned:0,total:0,message:null}});h(c(t),"getUserInput",function(){return[]});h(c(t),"validate",function(e,t){return{type:"points",earned:0,total:0,message:null}});return t}s(a,[{key:"render",value:function e(){return n.createElement(P,{id:this.props.widgetId,smiles:this.props.smiles,rotationAngle:this.props.rotationAngle})}}]);return a}(n.Component);h(k,"propTypes",{rotationAngle:d.number,smiles:d.string,widgetId:d.string});h(k,"defaultProps",{rotationAngle:0});e.exports={name:"molecule-renderer",displayName:"Molecule renderer",hidden:true,widget:k,molecule:P}},"473Y":function(e,t,r){"use strict";r("5DmW");r("NBAS");var n=o(r("q1tI"));function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}function l(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return u(e)}function u(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function c(e){c=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return c(e)}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)f(e,t)}function f(e,t){f=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return f(e,t)}var i18n=r("HEOz");var h=r("UDUP");var d=r("fQFx");var v=r("OgJR"),g=v.rangesOverlap;var m=r("czma");var y=function(e){p(t,e);function t(){a(this,t);return l(this,c(t).apply(this,arguments))}s(t,[{key:"_handleAddHighlight",value:function e(t){this.props.onAddHighlight(t);var r=document.getSelection();if(r){r.collapseToEnd()}}},{key:"_selectionIsValid",value:function e(t){if(!t){return false}var r=this.props.contentNode;var n=new Range;n.selectNodeContents(r);var o=new Range;o.setStart(t.focusNode,t.focusOffset);o.collapse(true);var a=g(n,o);var i=a;return i}},{key:"render",value:function e(){var r=this;return n.createElement(m,{buildHighlight:this.props.buildHighlight,enabled:this.props.editable},function(t,e){return n.createElement("div",null,n.createElement(h,{editable:r.props.editable&&!r._selectionIsValid(t),highlights:r.props.highlights,offsetParent:r.props.offsetParent,onRemoveHighlight:r.props.onRemoveHighlight,zIndexes:r.props.zIndexes}),r._selectionIsValid(t)&&!e&&n.createElement(d,{label:i18n._("Add highlight"),onClick:function e(){return r._handleAddHighlight(t.proposedHighlight)},focusNode:t.focusNode,focusOffset:t.focusOffset,offsetParent:r.props.offsetParent}))})}}]);return t}(n.PureComponent);e.exports=y},"4s5V":function(e,t,r){"use strict";r("ma9I");r("2B1R");r("zKZe");r("NBAS");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var c=r("mR6N");var p=l(r("q1tI"));var n=a(r("F/us"));var o=r("6OHE");var i=a(r("6wxr"));var f=a(r("MG0i"));var s=r("/4Qb");var h=a(r("Atlv"));function a(e){return e&&e.__esModule?e:{default:e}}function l(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function u(){u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};return u.apply(this,arguments)}function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function g(e,t,r){if(t)v(e.prototype,t);if(r)v(e,r);return e}function m(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return b(e)}function y(e){y=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return y(e)}function b(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function O(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)w(e,t)}function w(e,t){w=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return w(e,t)}function P(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var k=function(e){O(a,e);function a(){var e;var t;d(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++){n[o]=arguments[o]}t=m(this,(e=y(a)).call.apply(e,[this].concat(n)));P(b(t),"state",{isInputFocused:false});return t}g(a,[{key:"focusInput",value:function e(){if(this._input){this._input.focus()}}},{key:"handleClick",value:function e(t){var r=this.props,n=r.checked,o=r.onChange;t.preventDefault();this.focusInput();o(!n)}},{key:"handleKeyDown",value:function e(t){var r=this.props,n=r.onFocusPrevAnswer,o=r.onFocusNextAnswer;switch(t.key){case"ArrowUp":t.preventDefault();n();break;case"ArrowDown":t.preventDefault();o();break}}},{key:"handleInputChange",value:function e(t){t.preventDefault()}},{key:"handleInputFocus",value:function e(){this.setState({isInputFocused:true})}},{key:"handleInputBlur",value:function e(){this.setState({isInputFocused:false})}},{key:"renderCheckmark",value:function e(){var t=this.props.checked;return p.createElement("span",{className:(0,c.css)(E.checkmarkContainer)},t&&p.createElement(i.default,{icon:s.iconCheckMedium,size:16,color:o.colors.gray17}))}},{key:"render",value:function e(){var r=this;var t=this.props,n=t.content,o=t.checked,a=t.groupName,i=t.index,s=t.inputType;var l=this.state.isInputFocused;var u="".concat(a,"-").concat(i);return p.createElement("div",{className:(0,c.css)(E.answerChoice,l&&E.answerFocused),onClick:function e(t){return r.handleClick(t)},onKeyDown:function e(t){return r.handleKeyDown(t)}},p.createElement("span",{className:(0,c.css)(E.answerInputWrapper)},p.createElement("input",{className:(0,c.css)(f.default.perseusSrOnly),checked:o,name:a,id:u,type:s,onChange:function e(t){return r.handleInputChange(t)},onFocus:function e(){return r.handleInputFocus()},onBlur:function e(){return r.handleInputBlur()},ref:function e(t){return r._input=t}}),this.renderCheckmark()),p.createElement("label",{htmlFor:u},p.createElement(h.default,{content:n})))}}]);return a}(p.Component);var x=function(e){O(r,e);function r(e){var t;d(this,r);t=m(this,y(r).call(this,e));t._choices=[];t.state={groupName:n.default.uniqueId("answer_choices_")};return t}g(r,[{key:"focusAnswer",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var r=this.props.choices.length;if(t<0){t+=r}else if(t>=r){t-=r}var n=this._choices[t];if(n){n.focusInput()}}},{key:"onAnswerChange",value:function e(t,r){var n=this.props,o=n.choices,a=n.multipleSelect,i=n.onChange;var s=[];for(var l=0;l<o.length;l++){s.push(a?l===t?r:o[l].checked:l===t?r:false)}i(s)}},{key:"onFocusAnswer",value:function e(t){this.focusAnswer(t)}},{key:"render",value:function e(){var n=this;var t=this.props,r=t.choices,o=t.multipleSelect;var a=this.state.groupName;return p.createElement("fieldset",null,r.map(function(e,r){return p.createElement(k,u({},e,{key:e.content,groupName:a,index:r,inputType:o?"checkbox":"radio",onChange:function e(t){return n.onAnswerChange(r,t)},onFocusPrevAnswer:function e(){return n.onFocusAnswer(r-1)},onFocusNextAnswer:function e(){return n.onFocusAnswer(r+1)},ref:function e(t){return n._choices[r]=t}}))}))}}]);return r}(p.Component);t.default=x;var E=c.StyleSheet.create({answerChoice:{display:"flex",alignItems:"center",userSelect:"none",padding:"10px 16px 10px 0px",fontWeight:"bold",border:"solid 2px transparent",borderRadius:2,":active":{backgroundColor:"rgba(33, 36, 44, 0.08)"}},answerFocused:{borderColor:"#1865f2",":active":{borderColor:"transparent"}},answerInputWrapper:{marginRight:8},checkmarkContainer:{display:"flex",position:"relative",width:16,height:16,marginLeft:8}})},"7O7Y":function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("fbCW");r("yXV3");r("uqXc");r("2B1R");r("+2oP");r("toAj");r("5DmW");r("NBAS");r("FZtP");var m=n(r("q1tI"));function n(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function o(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){h(t,e,r[e])})}return t}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}function l(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return c(e)}function u(e){u=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return u(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)f(e,t)}function f(e,t){f=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return f(e,t)}function h(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var y=r("qoj5");var d=r("17x9");var v=r("i8i4");var _=r("F/us");var g=r("+jAD");var b=r("j8wP").Options;var O=r("p8fL").assert;var w=r("Giaf");var P=w.Path,k=w.Arc,x=w.Circle,E=w.Label,C=w.Line,S=w.MovablePoint,T=w.MovableLine;var M=r("M++g");var j=r("7xiW");var I=r("uBl0").seededRNG;var N=r("uBl0");var A=r("eAf/").number;var D=r("yfnS");var R=r("XwLL");var i18n=r("HEOz");var F=400;var L=1e3;var B=5e3;var U=function(e){p(o,e);function o(){var e;var f;a(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}f=l(this,(e=u(o)).call.apply(e,[this].concat(r)));h(c(f),"_renderThresholdLine",function(){var e=[0,f._range()[1][1]];var t=_.map(e,function(e){return[f.state.threshold,e]});var r=function e(t,r){return m.createElement(S,{key:r,static:true,coord:t,normalStyle:{stroke:"none",fill:"none"}})};return m.createElement(T,{onMove:f.handleMouseInteraction},_.map(t,r))});h(c(f),"_renderCircle",function(){var e=f.props.data;var r=_.reduce(e,function(e,t){return e+t},0);var n=_.reduce(e,function(e,t,r){if(f.state.threshold!=null&&r<=f.state.threshold){return e+t}else{return e}},0);var o=n/r;var a=1e-5;var i=20;var s=[f.props.box[0]-1.5*i,1.5*i];var t=function e(){var t={key:"below",center:s,radius:i,startAngle:0,endAngle:o<1?360*o:360-a,sector:o!==1,unscaled:true,style:{fill:D.LIGHT_RED,stroke:D.RED}};return m.createElement(k,t)};var l=function e(){var t={key:"above",center:s,radius:i,startAngle:o>0?360*o:a,endAngle:360,sector:o!==0,unscaled:true,style:{fill:D.LIGHT_BLUE,stroke:D.BLUE}};return m.createElement(k,t)};var u=f._range()[0];var c=Math.min(Math.max(f.state.threshold,u[0]),u[1]).toFixed(2);var p=function e(){var t={key:"label",coord:[s[0],s[1]+1.5*i],text:n+" of "+r+" results below "+c+"%",direction:"center",tex:false,unscaled:true,style:{fontSize:"12px"}};return m.createElement(E,t)};return[o>0&&t(),o<1&&l(),p()]});h(c(f),"_renderData",function(){var e=f.props.data;var t=f._range();var i=1;var r=function e(t,r){if(!t){return}var n=f.state.threshold!=null&&r<=f.state.threshold;var o={fill:n?D.LIGHT_RED:D.LIGHT_BLUE,stroke:n?D.RED:D.BLUE};var a=[[r,0],[r,t],[r+i,t],[r+i,0]];return m.createElement(P,{key:r,coords:a,style:o})};return _.map(e,r)});h(c(f),"_setupGraphie",function(r,e){var t=e.data;var n=e.range;var o=e.scale;var a=n[0][1]-n[0][0];var i=n[1][1]-0;var s=20;var l=Math.ceil(i/s);_.each(_.range(0,n[1][1],l),function(e){if(t){r.label([n[0][0],e],R.roundToApprox(e,2),"left",true)}r.line([n[0][0],e],[n[0][1],e],{stroke:"#000",strokeWidth:1,opacity:.3})});if(t){var u=15;var c=Math.ceil(a/u);_.each(_.range(n[0][0],n[0][1],c),function(e){r.label([e,0],A.round(e,2),"below",true);var t=8;r.line([e,0],[e,-t/o[1]],{stroke:"#000",strokeWidth:1})})}var p={stroke:"#000",strokeWidth:2,opacity:1};var f=[n[0][0],0];var h=[n[0][0],n[1][1]];r.line(f,h,p);var d=n[0][0]+a/2;var v=t?25:0;r.label([d,-v/o[1]],e.xAxisLabel,"below",false).css("font-weight","bold");var g=0+i/2;var m=t?55:28;r.label([n[0][0]-m/o[0],g],e.yAxisLabel,"center",false).css("font-weight","bold").css("-webkit-transform","rotate(-90deg)")});h(c(f),"handleMouseInteraction",function(e){f.setState({threshold:e[0]})});h(c(f),"_range",function(e){var t=[[0,100],[-1,10]];e=e||f.props;return e.data?f._getRangeForData(e.data):t});h(c(f),"_getRangeForData",function(e){var t=10;var r=_.indexOf(e,_.find(e,function(e){return e>0}));var n=Math.max(0,r-t);var o=_.lastIndexOf(e,_.last(_.filter(e,function(e){return e>0})));var a=Math.min(100+1,o+1+t);var i=-1;var s=_.max(e);return[[n,a],[i,s]]});h(c(f),"_getInitialThreshold",function(e){var t=e[0];return t[0]+(t[1]-t[0])/3});h(c(f),"state",{threshold:f._getInitialThreshold(f._range())});return f}s(o,[{key:"UNSAFE_componentWillReceiveProps",value:function e(t){var r=this._range();var n=this._range(t);if(!N.deepEq(r,n)){this.setState({threshold:this._getInitialThreshold(n)})}}},{key:"render",value:function e(){var t=this.props.data;var r=this._range();var n={xAxisLabel:this.props.xAxisLabel,yAxisLabel:this.props.yAxisLabel,box:this.props.box,range:r,data:t,scale:[N.scaleFromExtent(r[0],this.props.box[0]),N.scaleFromExtent(r[1],this.props.box[1])]};var o={stroke:"#000",strokeWidth:1,opacity:1};var a=[r[0][0],0];var i=[r[0][1],0];return m.createElement(w,{box:n.box,range:n.range,options:n,setup:this._setupGraphie,onMouseMove:this.handleMouseInteraction,onMouseDown:this.handleMouseInteraction,setDrawingAreaAvailable:this.props.setDrawingAreaAvailable},m.createElement(C,{start:a,end:i,style:o}),t&&this._renderData(),t&&this._renderCircle(),t&&this._renderThresholdLine())}}]);return o}(m.Component);h(U,"propTypes",{data:d.arrayOf(d.number),xAxisLabel:d.string,yAxisLabel:d.string,box:d.arrayOf(d.number)});h(U,"defaultProps",{data:null,xAxisLabel:"Proportion (%)",yAxisLabel:"Number of times seen",box:[F,F]});var q=function(e){p(o,e);function o(){var e;var i;a(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}i=l(this,(e=u(o)).call.apply(e,[this].concat(r)));h(c(i),"state",{invalidInput:false});h(c(i),"calculateDisplayProportion",function(){var e=i.props.userProportion;if(i.props.proportionOrPercentage==="percentage"){return Math.round(100*e)}else{return e}});h(c(i),"change",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return g.change.apply(c(i),t)});h(c(i),"checkProportionValidity",function(e){return e>=0&&i.props.proportionOrPercentage==="proportion"&&e<=1||i.props.proportionOrPercentage==="percentage"&&e<=100});h(c(i),"handleUserProportionChange",function(e,t){var r;if(i.props.proportionOrPercentage==="percentage"){r=e/100}else{r=e}if(r!=null){r=Math.min(1,Math.max(0,r))}i.props.onChange({userProportion:r},t)});h(c(i),"handleSampleSizeChange",function(e,t){if(e!=null){e=Math.min(L,Math.max(0,Math.floor(e)))}i.props.onChange({sampleSize:e},t)});h(c(i),"handleRunSimulation",function(){if(i.props.numTrials==null||i.props.userProportion==null||i.props.sampleSize==null){i.setState({invalidInput:true});return}else{i.setState({invalidInput:false})}i.props.onChange({data:i.generateData()});i.props.trackInteraction()});h(c(i),"generateData",function(e){e=e||i.props;var t=function e(n,t,r){var o=function e(){return i.generateNumber()<r};var a=_.times(100+1,function(){return 0});_.times(t,function(){var e=_.times(n,o);var t=_.filter(e,_.identity).length;var r=Math.floor(100*t/n);a[r]++});return a};return t(e.sampleSize,e.numTrials,e.userProportion)});h(c(i),"getInputPaths",function(){return[["userProportion"],["sampleSize"]]});h(c(i),"focus",function(){var e=_.head(i.getInputPaths());i.focusInputPath(e);return true});h(c(i),"focusInputPath",function(e){O(e.length>0);var t=_.head(e);var r=i.refs[t];r.focus()});h(c(i),"blurInputPath",function(e){O(e.length>0);var t=_.head(e);var r=i.refs[t];r.blur()});h(c(i),"getDOMNodeForPath",function(e){O(e.length>0);var t=_.head(e);return v.findDOMNode(i.refs[t])});h(c(i),"getGrammarTypeForPath",function(e){O(e.length>0);return"number"});h(c(i),"setInputValue",function(e,t,r){O(e.length>0);var n=_.head(e);var o=n.charAt(0).toUpperCase()+n.slice(1);var a="handle"+o+"Change";i[a](t,r)});h(c(i),"getUserInput",function(){return null});h(c(i),"simpleValidate",function(e){return o.validate(i.getUserInput(),e)});return i}s(o,[{key:"UNSAFE_componentWillMount",value:function e(){if(this.props.randomSeed!=null){this.generateNumber=N.seededRNG(this.props.randomSeed)}}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){if(t.randomSeed!==this.props.randomSeed){this.generateNumber=N.seededRNG(t.randomSeed)}}},{key:"render",value:function e(){var t=this;var r={marginLeft:"5px"};var n="0px 0px 0px 2px rgba(255, 165, 0, 1)";var o=_.extend({},r,{WebkitBoxShadow:n,MozBoxShadow:n,boxShadow:n,transition:"all 0.15s"});var a=_.extend({},r,{transition:"all 0.15s"});var i=this.state.invalidInput?o:a;var s=this.props.apiOptions.staticRender?j:M;var l=m.createElement("div",null,m.createElement(s,{ref:"userProportion",style:i,value:this.calculateDisplayProportion(),checkValidity:this.checkProportionValidity,disabled:this.props.apiOptions.readOnly,onChange:this.handleUserProportionChange,onFocus:function e(){return t.props.onFocus(["userProportion"])},onBlur:function e(){return t.props.onBlur(["userProportion"])}}),m.createElement(y,null,m.createElement("p",null,i18n._("This controls the proportion or percentage that will be used in your simulation."))));var u=m.createElement("div",null,m.createElement(s,{ref:"sampleSize",style:i,value:this.props.sampleSize,checkValidity:function e(t){return t>=0},disabled:this.props.apiOptions.readOnly,onChange:this.handleSampleSizeChange,onFocus:function e(){return t.props.onFocus(["sampleSize"])},onBlur:function e(){return t.props.onBlur(["sampleSize"])}}),m.createElement(y,null,m.createElement("p",null,i18n._("This controls the sample size that will be used in your simulation. For example, if you set this to 100, then for each trial, responses from 100 participants will be simulated."))));var c=m.createElement("div",{style:{textAlign:"right"}},m.createElement("b",null,this.props.numTrials),m.createElement(y,null,m.createElement("p",null,i18n._("This is the number of trials used in the simulation. For example, if set to 50, then the survey will be conducted 50 times."))));var p=function e(t){var r=m.createElement("thead",null,m.createElement("tr",null,m.createElement("th",null,i18n._("Parameter")),m.createElement("th",null,i18n._("Value"))));var n=m.createElement("tbody",null,_.map(t,function(e,t){return m.createElement("tr",{key:t},m.createElement("td",null,e.title),m.createElement("td",null,e.value))}));return m.createElement("table",null,r,n)};var f=[{title:this.props.proportionLabel+":",value:l},{title:i18n._("Sample size:"),value:u},{title:i18n._("Number of trials:"),value:c}];var h={margin:"20px 0"};var d=m.createElement("button",{className:"simple-button",style:h,disabled:this.props.apiOptions.readOnly,onClick:this.handleRunSimulation},i18n._("Run simulation"));var v={paddingBottom:this.props.data?40:0};var g=m.createElement("div",{style:v},m.createElement(U,{data:this.props.data,xAxisLabel:this.props.xAxisLabel,yAxisLabel:this.props.yAxisLabel,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}));return m.createElement("div",null,p(f),d,g)}}]);return o}(m.Component);h(q,"propTypes",o({},g.propTypes,{apiOptions:b.propTypes,data:d.arrayOf(d.number),numTrials:d.number,proportionLabel:d.string,proportionOrPercentage:d.string,randomSeed:d.number,sampleSize:d.number,trackInteraction:d.func.isRequired,userProportion:d.number,xAxisLabel:d.string,yAxisLabel:d.string}));h(q,"defaultProps",{data:null,userProportion:null,sampleSize:null,numTrials:null,randomSeed:0,xAxisLabel:"Proportion (%)",yAxisLabel:"Number of times seen",proportionLabel:"Underlying proportion",proportionOrPercentage:"proportion",apiOptions:b.defaults});_.extend(q,{validate:function e(t,r){return{type:"points",earned:0,total:0,message:null}}});var H=function e(t){var r=_.clone(t);r.randomSeed=t.problemNum;return r};e.exports={name:"simulator",displayName:"Simulator",widget:q,transform:H,hidden:true}},BCuI:function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("2B1R");r("zKZe");r("5DmW");r("NBAS");r("EnZy");r("FZtP");var i=n(r("q1tI"));function n(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function o(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){v(t,e,r[e])})}return t}function s(){s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};return s.apply(this,arguments)}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function u(e,t,r){if(t)a(e.prototype,t);if(r)a(e,r);return e}function c(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return f(e)}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return p(e)}function f(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)d(e,t)}function d(e,t){d=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return d(e,t)}function v(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var g=r("17x9");var _=r("F/us");var m=r("j8wP").Options;var y=r("+jAD");var b=r("/4Qb"),O=b.iconOk;var w=r("APgo");var P=r("Atlv");var k=r("uBl0");var x=r("zahm"),E=x.linterContextProps,C=x.linterContextDefault;var S=function(e){h(a,e);function a(){var e;var o;l(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}o=c(this,(e=p(a)).call.apply(e,[this].concat(r)));v(f(o),"state",{visible:1});v(f(o),"change",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return y.change.apply(f(o),t)});v(f(o),"_handleInteraction",function(e){var t=parseInt(e.split(" ")[1]);if(t===o.state.visible-1){var r=o.refs.renderer.getWidgetInstance("group "+t);r.showRationalesForCurrentlySelectedChoices();var n=r.simpleValidate();if(n.type==="points"&&n.total===n.earned){o.setState({visible:o.state.visible+1});o.props.trackInteraction({visible:o.state.visible+1})}}});return o}u(a,[{key:"shouldComponentUpdate",value:function e(t,r){return t!==this.props||r!==this.state}},{key:"render",value:function e(){var n=this;var o=i.createElement(w,s({},O,{style:{color:"green"}}));var t=_.chain(this.props.json).first(this.state.visible).map(function(e,t){return"[[".concat(k.snowman," group ").concat(t,"]]")}).join("\n\n").value();var a={};_.each(this.props.json,function(e,t){var r="group ".concat(t);a[r]={type:"group",graded:true,version:{major:0,minor:0},options:_.extend({},e,{icon:t<n.state.visible-1?o:null})}});return i.createElement("div",{className:"perseus-sequence"},i.createElement(P,{ref:"renderer",content:t,widgets:a,onInteractWithWidget:this._handleInteraction,apiOptions:this.props.apiOptions,linterContext:this.props.linterContext}))}}]);return a}(i.Component);v(S,"propTypes",o({},y.propTypes,{apiOptions:m.propTypes,json:g.arrayOf(g.shape({content:g.string,images:g.object,widgets:g.object})),trackInteraction:g.func.isRequired,linterContext:E}));v(S,"defaultProps",{json:[{content:"",widgets:{},images:{}}],linterContext:C});var T=function e(t,r){var n=t.json;if(!_.isArray(n)){n=[n]}var o=_.map(n,function(e){return r(e)});return _.extend({},t,{json:o})};e.exports={name:"sequence",displayName:"Graded Sequence",widget:S,traverseChildWidgets:T,tracking:"all",hidden:true,isLintable:true}},FGkX:function(e,t,r){"use strict";function n(e){this.order=E(e);this.mantissa=x(e);this.positive=k(e);this.sigFigs=this.mantissa.length;this.sigDecs=this.order-this.mantissa.length}function o(e,t,r,n){var o=""+e;var a=E(o);var i=x(o);var s=k(o);var l;var u;var c;var p=false;if(e==0||i==""||i=="0"){i="";for(var f=0;f<t;f++){i+="0"}a=t+r;if(r<0&&-r>=t){p=true}}else{u=a-i.length-r;c=t-i.length;l=Math.min(c,u);if(l<0){var h=C(i,-l);if(h.length>i.length+l){a++;if(u>c){h=C(h,1)}}i=h}else if(l>0){for(var d=0;d<l;d++){i+="0"}}if(i==""||i=="0"){i="0";s=true;a=1+r;if(a!=0){p=true}}}var v=n||i.length>20||a>4||a<-2||a-i.length>0&&P(i)>0||p;var g="";if(!s){g+="-"}if(v){g+=i.charAt(0);if(i.length>1){g+="."+i.substring(1,i.length)}if(a-1!=0){g+=" x 10^"+(a-1)}}else{var m="";var y="";var b=true;if(a>0){if(i.length>a){m=i.substring(0,a);y=i.substring(a,i.length)}else{m=i;b=P(i)!=0;for(var O=0;O<a-i.length;O++){m+="0"}}}else{for(var w=0;w<-a;w++){y+="0"}y+=i}g+=(m==""?"0":m)+(b?".":"")+y}return g}function P(e){var t=0;for(var r=e.length-1;r>=0;r--){var n=e.charAt(r);if(n=="0"){t++}else{return t}}return t}function k(e){var t=true;var r=false;var n=false;var o="";var a="";var i="";var s=0;var l=0;var u=true;for(var c=0;c<e.length;c++){var p=e.charAt(c);if(p>="1"&&p<="9"){i+=o+p;o="";n=true;if(!r){l++;s++}t=false}else if(p=="0"){if(r){if(n){i+=o+p;o=""}else{a+=p;s--}}else{l++;if(n){a+=p;s++;o+=p}else{a+=p}}t=false}else if(!r&&p=="."){i+=o;o="";r=true;t=false}else if(p=="e"||p=="E"&&c+1<e.length){var f=parseInt(e.substring(c+1,e.length));s+=f;l+=f;c=e.length}else if(t&&(p=="+"||p=="-")){if(p=="-"){u=!u}}}if(i==""){return true}else{return u}}function x(e){var t=true;var r=false;var n=false;var o="";var a="";var i="";var s=0;var l=0;var u=true;for(var c=0;c<e.length;c++){var p=e.charAt(c);if(p>="1"&&p<="9"){i+=o+p;o="";n=true;if(!r){l++;s++}t=false}else if(p=="0"){if(r){if(n){i+=o+p;o=""}else{a+=p;s--}}else{l++;if(n){a+=p;s++;o+=p}else{a+=p}}t=false}else if(!r&&p=="."){i+=o;o="";r=true;t=false}else if(p=="e"||p=="E"&&c+1<e.length){var f=parseInt(e.substring(c+1,e.length));s+=f;l+=f;c=e.length}else if(t&&(p=="+"||p=="-")){if(p=="-"){u=!u}}}if(i==""){return a}else{return i}}function E(e){var t=true;var r=false;var n=false;var o="";var a="";var i="";var s=0;var l=0;var u=true;for(var c=0;c<e.length;c++){var p=e.charAt(c);if(p>="1"&&p<="9"){i+=o+p;o="";n=true;if(!r){l++;s++}t=false}else if(p=="0"){if(r){if(n){i+=o+p;o=""}else{a+=p;s--}}else{l++;if(n){a+=p;s++;o+=p}else{a+=p}}t=false}else if(!r&&p=="."){i+=o;o="";r=true;t=false}else if(p=="e"||p=="E"&&c+1<e.length){var f=parseInt(e.substring(c+1,e.length));s+=f;l+=f;c=e.length}else if(t&&(p=="+"||p=="-")){if(p=="-"){u=!u}}}if(i==""){return l}else{return s}}function C(e,t){var r=e.length-t-1;if(r<0){return""}else if(r>=e.length-1){return e}else{var n=e.charAt(r+1);var o=e.charAt(r);var a=false;if(n>"5"){a=true}else if(n=="5"){for(var i=r+2;i<e.length;i++){if(e.charAt(i)!="0"){a=true}}if(o%2==1){a=true}}var s="";for(var l=r;l>=0;l--){var u=e.charAt(l);if(a){var c=void 0;if(u=="9"){c="0"}else{switch(u){case"0":c="1";break;case"1":c="2";break;case"2":c="3";break;case"3":c="4";break;case"4":c="5";break;case"5":c="6";break;case"6":c="7";break;case"7":c="8";break;case"8":c="9";break}a=false}s=c+s}else{s=u+s}}if(a){s="1"+s}return s}}e.exports={SignificantFigures:n,displaySigFigs:o}},FGwj:function(e,t,r){"use strict";r("ma9I");r("TeQF");r("2B1R");r("+2oP");r("ToJy");r("zKZe");r("5DmW");r("NBAS");r("EnZy");r("vxnP");var i=l(r("q1tI"));var n,o,a,s;function l(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function p(e,t,r){if(t)c(e.prototype,t);if(r)c(e,r);return e}function f(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return d(e)}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function d(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)g(e,t)}function g(e,t){g=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return g(e,t)}function m(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function y(){y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};return y.apply(this,arguments)}var b=r("17x9");var O=r("fhzG");var w=r("i8i4");var _=r("F/us");var P=r("e2gc");var k=r("jH0K");var x=r("APgo");var E=r("M++g");var C=r("7xiW");var S=r("FvPh");var T=r("eMwK");var M=r("j8wP").Options;var j=r("reBI").propTypes.keypadElementPropType;var I=15;var N="°";var A=300;var D=1.5;var R=2;var F=1;var L=r("/4Qb"),B=L.iconPlus,U=L.iconUndo;var q=r("uBl0").deepEq;var H=r("uBl0").getGridStep;var z=r("uBl0").captureScratchpadTouchStart;var W=r("eAf/").number;var G=r("eAf/").vector;var V=r("eAf/").point;var Y=r("eAf/").ray;var X=r("eAf/").line;var K=r("XwLL");var Q=r("yfnS");var i18n=r("HEOz");var Z=r("p8fL").assert;var J=400;var $={url:null};function ee(e,r){return _.object(_.map(e,function(e,t){return[t,e[r]]}))}var te=function e(t,r){t=t||{};var n=t.labels||["x","y"];var o=t.range||[[-10,10],[-10,10]];var a=t.step||[1,1];var i=t.gridStep||H(o,a,r);return{box:[r,r],labels:n,range:o,step:a,gridStep:i,valid:true,backgroundImage:$,markings:"grid",showProtractor:false}};var re={apiOptions:M.defaults,gradeEmpty:false,graphMode:"interactive",listMode:"dynamic",graph:{},tools:{translation:{enabled:true,required:false,constraints:{}},rotation:{enabled:true,required:false,constraints:{fixed:false},coord:[1,6]},reflection:{enabled:true,required:false,constraints:{fixed:false},coords:[[2,-4],[2,2]]},dilation:{enabled:true,required:false,constraints:{fixed:false},coord:[6,6]}},drawSolutionShape:true,starting:{shape:{type:"polygon-3",coords:[[2,2],[2,6],[7,2]]},transformations:[]},correct:{shape:{type:"polygon-3",coords:[[2,2],[2,6],[7,2]]},transformations:[]}};function ne(e){return e.constraints.fixed?Q.DYNAMIC:Q.INTERACTIVE}function oe(e,t){var r=t[0][1]-t[0][0];var n=t[1][1]-t[1][0];return e*Math.max(r,n)/20}function ae(e,t,r){var n=G.subtract(e,t);var o=G.scale(n,r);var a=G.add(t,o);return a}function ie(e){return String(K.roundTo(9,e))}function se(e){var t=K.toFraction(e,W.DEFAULT_TOLERANCE);if(t[1]===1){return ie(e)}else{return ie(t[0])+"/"+ie(t[1])}}function le(e){return[i.createElement(S,{key:"("},"("),ie(e[0]),i.createElement(S,{key:","},", {}"),ie(e[1]),i.createElement(S,{key:")"},")")]}function ue(e){return[i.createElement(S,{key:"<"},i18n.doNotTranslate("\\langle")),ie(e[0]),i.createElement(S,{key:","},", {}"),ie(e[1]),i.createElement(S,{key:">"},i18n.doNotTranslate("\\rangle"))]}function ce(e){return ie(e)+N}function pe(e,n){e=_.clone(e).sort(V.compare);n=_.clone(n).sort(V.compare);return _.all(_.map(e,function(e,t){var r=n[t];return V.equal(e,r)}))}var fe=function e(t){if(t.customKeypad){return T}else if(t.staticRender){return C}else{return E}};var he={apply:function e(t){if(!de[t.type].isValid(t)){return _.identity}else{return de[t.type].apply(t)}},append:function e(t,r){var n=he._appendAndCollapseLastTwo(t,r);return he._collapseFinalNoOps(n)},_collapseFinalNoOps:function e(t){if(t.length&&he.isNoOp(_.last(t))){return _.initial(t)}else{return t}},_appendAndCollapseLastTwo:function e(t,r){if(!t.length){return[r]}else{var n=he.collapse(_.last(t),r);return _.initial(t).concat(n)}},isNoOp:function e(t){return de[t.type].isNoOp(t)},collapse:function e(t,r){if(t.type!==r.type){return[t,r]}if(he.isEmpty(t)&&he.isEmpty(r)){return[]}if(!he.isValid(t)||!he.isValid(r)){return[t,r]}return he._collapseValidMonotypedTransforms(t,r)},isValid:function e(t){return de[t.type].isValid(t)},isEmpty:function e(t){return de[t.type].isEmpty(t)},_collapseValidMonotypedTransforms:function e(t,r){var n=de[t.type].collapse(t,r);if(n){if(!_.isArray(n)){n=[n]}_.each(n,function(e){e.type=t.type});return n}else{return[t,r]}},toTeX:function e(t){return de[t.type].toTeX(t)},ListItem:O({displayName:"ListItem",render:function e(){if(this.props.mode==="dynamic"){return i.createElement("div",null,he.toTeX(this.props.transform))}else if(this.props.mode==="interactive"){var t=de[this.props.transform.type].Input;return i.createElement(t,y({ref:"transform",onChange:this.handleChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,keypadElement:this.props.keypadElement,apiOptions:this.props.apiOptions},this.props.transform))}else{throw new Error("Invalid mode: "+this.props.mode)}},value:function e(){if(this.props.mode==="interactive"){return _.extend({type:this.props.transform.type},this.refs.transform.value())}else{return this.props.transform}},handleChange:_.debounce(function(e){this.props.onChange(this.value(),e)},A),_getComponentAtPath:function e(t){var r=this.refs.transform;var n=_.head(t);return r.refs[n]},focus:function e(){var t=this.refs.transform;var r=_.head(t.getInputPaths());if(r){this.focusInputPath(r)}},focusInputPath:function e(t){this._getComponentAtPath(t).focus()},blurInputPath:function e(t){this._getComponentAtPath(t).blur()},getDOMNodeForPath:function e(t){return w.findDOMNode(this._getComponentAtPath(t))},getGrammarTypeForPath:function e(t){return"number"},setInputValue:function e(t,r,n){if(r.length){r=parseFloat(r);if(isNaN(r)){return}}this.refs.transform.setInputValue(t,r,n)},getInputPaths:function e(){if(this.props.mode==="dynamic"){return[]}else{return this.refs.transform.getInputPaths()}}})};var de={translation:{verbName:i18n._("Translate"),nounName:i18n._("Translation"),lowerNounName:i18n._("translation"),apply:function e(t){return function(e){return G.add(e,t.vector)}},isValid:function e(t){return _.isFinite(t.vector[0])&&_.isFinite(t.vector[1])},isEmpty:function e(t){return t.vector[0]===null&&t.vector[1]===null},isNoOp:function e(t){return G.equal(t.vector,[0,0])},collapse:function e(t,r){return{vector:G.add(t.vector,r.vector)}},toTeX:function e(t){return i18n.$_("Translation by %(vector)s",{vector:ue(t.vector)})},Input:(n=function(e){v(o,e);function o(){var e;var a;u(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}a=f(this,(e=h(o)).call.apply(e,[this].concat(r)));m(d(a),"state",{vector:a.props.vector||[null,null]});m(d(a),"value",function(){var e=a.refs.x.getValue();var t=a.refs.y.getValue();return{vector:[e,t]}});m(d(a),"setInputValue",function(e,t,r){var n=_.first(e);var o=_.clone(a.state.vector);if(n==="x"){o[0]=t}else if(n==="y"){o[1]=t}a.setState({vector:o},function(){a.props.onChange(r)})});m(d(a),"getInputPaths",function(){return[["x"],["y"]]});return a}p(o,[{key:"componentDidUpdate",value:function e(t){if(!q(this.props,t)){this.setState({vector:this.props.vector})}}},{key:"render",value:function e(){var n=this;var t=fe(this.props.apiOptions);var r=[i.createElement(S,{key:"<"},i18n.doNotTranslate("\\langle")),i.createElement(t,{key:"vec_x",ref:"x",placeholder:0,value:this.state.vector[0],useArrowKeys:true,onChange:function e(t){var r=n.state.vector[1];n.setState({vector:[t,r]},function(){n.props.onChange()})},onFocus:_.partial(this.props.onFocus,"x"),onBlur:_.partial(this.props.onBlur,"x"),keypadElement:this.props.keypadElement}),i.createElement(S,{key:","},", {}"),i.createElement(t,{key:"vec_y",ref:"y",placeholder:0,value:this.state.vector[1],useArrowKeys:true,onChange:function e(t){var r=n.state.vector[0];n.setState({vector:[r,t]},function(){n.props.onChange()})},onFocus:_.partial(this.props.onFocus,"y"),onBlur:_.partial(this.props.onBlur,"y"),keypadElement:this.props.keypadElement}),i.createElement(S,{key:">"},i18n.doNotTranslate("\\rangle"))];return i.createElement("div",null,i18n.$_("Translation by %(vector)s",{vector:r}))}}]);return o}(i.Component),n)},rotation:{verbName:i18n._("Rotate"),nounName:i18n._("Rotation"),lowerNounName:i18n._("rotation"),apply:function e(t){return function(e){return V.rotateDeg(e,t.angleDeg,t.center)}},isValid:function e(t){return _.isFinite(t.angleDeg)&&_.isFinite(t.center[0])&&_.isFinite(t.center[1])},isEmpty:function e(t){return t.angleDeg===null&&t.center[0]===null&&t.center[1]===null},isNoOp:function e(t){return W.equal(t.angleDeg,0)},collapse:function e(t,r){if(!V.equal(t.center,r.center)){return false}return{center:t.center,angleDeg:t.angleDeg+r.angleDeg}},toTeX:function e(t){return i18n.$_("Rotation by %(degrees)s about %(point)s",{degrees:ce(t.angleDeg),point:le(t.center)})},Input:(o=function(e){v(o,e);function o(){var e;var i;u(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}i=f(this,(e=h(o)).call.apply(e,[this].concat(r)));m(d(i),"state",{center:i.props.center||[null,null],angleDeg:i.props.angleDeg||null});m(d(i),"value",function(){var e=i.refs.angleDeg.getValue();var t=i.refs.centerX.getValue();var r=i.refs.centerY.getValue();return{angleDeg:e,center:[t,r]}});m(d(i),"setInputValue",function(e,t,r){var n=_.first(e);var o=_.clone(i.state.angleDeg);var a=_.clone(i.state.center);if(n==="angleDeg"){o=t}else if(n==="centerX"){a[0]=t}else if(n==="centerY"){a[1]=t}i.setState({angleDeg:o,center:a},function(){i.props.onChange(r)})});m(d(i),"getInputPaths",function(){return[["centerX"],["centerY"],["angleDeg"]]});return i}p(o,[{key:"componentDidUpdate",value:function e(t){if(!q(this.props,t)){this.setState({center:this.props.center,angleDeg:this.props.angleDeg})}}},{key:"render",value:function e(){var n=this;var t=fe(this.props.apiOptions);var r=[i.createElement(S,{key:"("},"("),i.createElement(t,{key:"X",ref:"centerX",placeholder:0,value:this.state.center[0],useArrowKeys:true,onChange:function e(t){var r=n.state.center[1];n.setState({center:[t,r]},function(){n.props.onChange()})},onFocus:_.partial(this.props.onFocus,"centerX"),onBlur:_.partial(this.props.onBlur,"centerX"),keypadElement:this.props.keypadElement}),i.createElement(S,{key:","},", {}"),i.createElement(t,{key:"Y",ref:"centerY",placeholder:0,value:this.state.center[1],useArrowKeys:true,onChange:function e(t){var r=n.state.center[0];n.setState({center:[r,t]},function(){n.props.onChange()})},onFocus:_.partial(this.props.onFocus,"centerY"),onBlur:_.partial(this.props.onBlur,"centerY"),keypadElement:this.props.keypadElement}),i.createElement(S,{key:")"},")")];var o=[i.createElement(t,{key:"deg",ref:"angleDeg",placeholder:0,value:this.state.angleDeg,useArrowKeys:true,onChange:function e(t){n.setState({angleDeg:t},function(){n.props.onChange()})},onFocus:_.partial(this.props.onFocus,"angleDeg"),onBlur:_.partial(this.props.onBlur,"angleDeg"),keypadElement:this.props.keypadElement}),N];var a=i18n.$_("Rotation about %(point)s by %(degrees)s",{point:r,degrees:o});return i.createElement("div",null,a)}}]);return o}(i.Component),o)},reflection:{verbName:i18n._("Reflect"),nounName:i18n._("Reflection"),lowerNounName:i18n._("reflection"),apply:function e(t){return function(e){return V.reflectOverLine(e,t.line)}},isValid:function e(t){return _.all(_.flatten(t.line),_.isFinite)&&!V.equal(t.line[0],t.line[1])},isEmpty:function e(t){return _.all(_.flatten(t.line),_.isNull)},isNoOp:function e(t){return false},collapse:function e(t,r){if(!X.equal(t.line,r.line)){return false}return[]},toTeX:function e(t){var r=t.line[0];var n=t.line[1];return i18n.$_("Reflection over the line from %(point1)s to %(point2)s",{point1:le(r),point2:le(n)})},Input:(a=function(e){v(o,e);function o(){var e;var i;u(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}i=f(this,(e=h(o)).call.apply(e,[this].concat(r)));m(d(i),"state",{line:i.props.line||[[null,null],[null,null]]});m(d(i),"changePoint",function(e,t,r,n){var o=_.map(i.state.line,_.clone);o[e][t]=r;i.setState({line:o},function(){i.props.onChange(n)})});m(d(i),"value",function(){var e=i.refs.x1.getValue();var t=i.refs.y1.getValue();var r=i.refs.x2.getValue();var n=i.refs.y2.getValue();return{line:[[e,t],[r,n]]}});m(d(i),"setInputValue",function(e,t,r){var n=_.first(e);var o;if(n[0]==="x"){o=0}else if(n[0]==="y"){o=1}var a;if(n[1]==="1"){a=0}else if(n[1]==="2"){a=1}i.changePoint(a,o,t,r)});m(d(i),"getInputPaths",function(){return[["x1"],["y1"],["x2"],["y2"]]});return i}p(o,[{key:"componentDidUpdate",value:function e(t){if(!q(this.props,t)){this.setState({line:this.props.line})}}},{key:"render",value:function e(){var t=fe(this.props.apiOptions);var r=[i.createElement(S,{key:"("},"("),i.createElement(t,{key:"x1",ref:"x1",value:this.state.line[0][0],useArrowKeys:true,onChange:this.changePoint.bind(this,0,0),onFocus:_.partial(this.props.onFocus,"x1"),onBlur:_.partial(this.props.onBlur,"x1"),keypadElement:this.props.keypadElement}),i.createElement(S,{key:","},", {}"),i.createElement(t,{key:"y1",ref:"y1",value:this.state.line[0][1],useArrowKeys:true,onChange:this.changePoint.bind(this,0,1),onFocus:_.partial(this.props.onFocus,"y1"),onBlur:_.partial(this.props.onBlur,"y1"),keypadElement:this.props.keypadElement}),i.createElement(S,{key:")"},")")];var n=[i.createElement(S,{key:"("},"("),i.createElement(t,{key:"x2",ref:"x2",value:this.state.line[1][0],useArrowKeys:true,onChange:this.changePoint.bind(this,1,0),onFocus:_.partial(this.props.onFocus,"x2"),onBlur:_.partial(this.props.onBlur,"x2"),keypadElement:this.props.keypadElement}),i.createElement(S,{key:","},", {}"),i.createElement(t,{key:"y2",ref:"y2",value:this.state.line[1][1],useArrowKeys:true,onChange:this.changePoint.bind(this,1,1),onFocus:_.partial(this.props.onFocus,"y2"),onBlur:_.partial(this.props.onBlur,"y2"),keypadElement:this.props.keypadElement}),i.createElement(S,{key:")"},")")];return i.createElement("div",null,i18n.$_("Reflection over the line from "+"%(point1)s to %(point2)s",{point1:r,point2:n}))}}]);return o}(i.Component),a)},dilation:{verbName:i18n._("Dilate"),nounName:i18n._("Dilation"),lowerNounName:i18n._("dilation"),apply:function e(t){return function(e){return ae(e,t.center,t.scale)}},isValid:function e(t){return _.isFinite(t.scale)&&_.isFinite(t.center[0])&&_.isFinite(t.center[1])},isEmpty:function e(t){return t.scale===null&&t.center[0]===null&&t.center[1]===null},isNoOp:function e(t){return W.equal(t.scale,1)},collapse:function e(t,r){if(!V.equal(t.center,r.center)){return false}return{center:t.center,scale:t.scale*r.scale}},toTeX:function e(t){var r=se(t.scale);return i18n.$_("Dilation of scale %(scale)s about %(point)s",{scale:r,point:le(t.center)})},Input:(s=function(e){v(o,e);function o(){var e;var i;u(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}i=f(this,(e=h(o)).call.apply(e,[this].concat(r)));m(d(i),"state",{center:i.props.center||[null,null],scale:i.props.scale||null});m(d(i),"value",function(){var e=i.refs.scale.getValue();var t=i.refs.x.getValue();var r=i.refs.y.getValue();return{scale:e,center:[t,r]}});m(d(i),"setInputValue",function(e,t,r){var n=_.first(e);var o=i.state.scale;var a=_.clone(i.state.center);if(n==="x"){a[0]=t}else if(n==="y"){a[1]=t}else if(n==="scale"){o=t}i.setState({scale:o,center:a},function(){i.props.onChange(r)})});m(d(i),"getInputPaths",function(){return[["x"],["y"],["scale"]]});return i}p(o,[{key:"componentDidUpdate",value:function e(t){if(!q(this.props,t)){this.setState({center:this.props.center,scale:this.props.scale})}}},{key:"render",value:function e(){var n=this;var t=fe(this.props.apiOptions);var r=[i.createElement(S,{key:"("},"("),i.createElement(t,{key:"point_x",ref:"x",placeholder:0,value:this.state.center[0],useArrowKeys:true,onChange:function e(t){var r=n.state.center[1];n.setState({center:[t,r]},function(){n.props.onChange()})},onFocus:_.partial(this.props.onFocus,"x"),onBlur:_.partial(this.props.onBlur,"x"),keypadElement:this.props.keypadElement}),i.createElement(S,{key:","},", {}"),i.createElement(t,{key:"point_y",ref:"y",placeholder:0,value:this.state.center[1],useArrowKeys:true,onChange:function e(t){var r=n.state.center[0];n.setState({center:[r,t]},function(){n.props.onChange()})},onFocus:_.partial(this.props.onFocus,"y"),onBlur:_.partial(this.props.onBlur,"y"),keypadElement:this.props.keypadElement}),i.createElement(S,{key:")"},")")];var o=i.createElement(t,{ref:"scale",placeholder:1,value:this.state.scale,useArrowKeys:true,onChange:function e(t){n.setState({scale:t},function(){n.props.onChange()})},onFocus:_.partial(this.props.onFocus,"scale"),onBlur:_.partial(this.props.onBlur,"scale"),keypadElement:this.props.keypadElement});return i.createElement("div",null,i18n.$_("Dilation about %(point)s by %(scale)s",{point:r,scale:o}))}}]);return o}(i.Component),s)}};var ve={getPointCountForType:function e(t){var r=t.split("-");if(r[0]==="polygon"){return r[1]||3}else if(r[0]==="line"||r[0]==="lineSegment"){return 2}else if(r[0]==="angle"){return 3}else if(r[0]==="circle"){return 2}else if(r[0]==="point"){return 1}},addMovableShape:function e(n,u){if(u.editable&&u.translatable){throw new Error("It doesn't make sense to have a movable shape "+"where you can stretch the points and translate them "+"simultaneously. options: "+JSON.stringify(u))}var c=_.map(u.shape.coords,function(e){var i=false;var s=e;var t=function e(t,r){if(!i){s=l.coord;i=true}var n=G.subtract([t,r],l.coord);if(u.onMove){n=u.onMove(n[0],n[1])}if(u.translatable){_.each(c,function(e){if(e!==l){e.setCoord(G.add(e.coord,n))}})}var o=l.coord;var a=G.add(l.coord,n);l.coord=a;p.update();l.coord=o;return a};var r=function e(){if(u.onMoveEnd&&i){i=false;var t=G.subtract(l.coord,s);u.onMoveEnd(t[0],t[1])}p.update()};var l=n.addMovablePoint({coord:e,normalStyle:u.normalPointStyle,highlightStyle:u.highlightPointStyle,constraints:{fixed:!u.translatable&&!u.editable},visible:u.showPoints,snapX:u.snap&&u.snap[0]||0,snapY:u.snap&&u.snap[1]||0,bounded:false,onMove:t,onMoveEnd:r});l.bounded=true;return l});var p=ve.addShape(n,u,c);var t=p.remove;p.remove=function(){t.apply(p);_.invoke(c,"remove")};return p},addShape:function e(o,a,r){r=r||a.shape.coords;var n=ve._typesOf(a.shape);var i=a.shape.options||ve.defaultOptions(n);var t=ve._mapTypes(n,r,function(e,t,r){var n=_.extend({},a,i[r]);return ve._addType(o,e,t,n)});var s=_.filter(_.pluck(t,"update"),_.identity);var l=function e(){_.invoke(s,"call")};var u=_.filter(_.pluck(t,"remove"),_.identity);var c=function e(){_.invoke(u,"call")};var p=function e(){return _.map(t,function(e){if(e.getOptions){return e.getOptions()}else{return{}}})};var f=function e(){var t=_.map(r,function(e){if(_.isArray(e)){return e}else{return e.coord}});return{type:n,coords:t,options:p()}};return{type:n,points:r,update:l,remove:c,toJSON:f,getOptions:p}},equal:function e(t,r){var n=ve._typesOf(t);var o=ve._typesOf(r);if(n.length!==o.length){return false}var a=ve._mapTypes(n,t.coords,ve._combine);var i=ve._mapTypes(o,r.coords,ve._combine);return _.all(_.map(a,function(e,t){var r=i[t];if(e.type!==r.type){return false}return ve._forType(e.type).equal(e.coords,r.coords)}))},_typesOf:function e(t){var r=t.type;if(!_.isArray(r)){r=[r]}return _.map(r,function(e){if(e==="polygon"){return"polygon-3"}else{return e}})},defaultOptions:function e(t){return _.map(t,function(e){var t=ve._forType(e).defaultOptions;return _.extend({},t)})},_forType:function e(t){var r=t.split("-")[0];return ve[r]},_mapTypes:function e(t,o,a,i){return _.map(t,function(e,t){var r=ve.getPointCountForType(e);var n=_.first(o,r);o=_.rest(o,r);return a.call(i,e,n,t)})},_addType:function e(o,t,a,i){var r=_.isArray(a[0])?{coordA:a[0],coordZ:a[1]}:{pointA:a[0],pointZ:a[1]};t=t.split("-")[0];if(t==="polygon"){var n=o.addMovablePolygon(_.extend({},i,{fixed:!i.editable,snapX:i.snap&&i.snap[0]||0,snapY:i.snap&&i.snap[1]||0,points:a,constrainToGraph:false}));return{update:n.transform.bind(n),remove:n.remove.bind(n)}}else if(t==="line"||t==="lineSegment"){var s=o.addMovableLineSegment(_.extend({},i,r,{movePointsWithLine:true,fixed:true,constraints:{fixed:true},extendLine:t==="line"}));return{update:s.transform.bind(s,true),remove:s.remove.bind(s)}}else if(t==="angle"){var l=i.editable?null:false;var u=o.addMovableAngle({angleLabel:"$deg0",fixed:true,points:a,normalStyle:i.normalStyle,reflex:i.reflex});if(!_.isArray(a[0])&&!i.editable){a[0].remove();a[2].remove()}return{update:u.update.bind(u,l),remove:u.remove.bind(u),getOptions:function e(){return{reflex:u.isReflex()}}}}else if(t==="circle"){var c={remove:_.identity};var p=function e(){var t=a[0].coord||a[0];var r=a[1].coord||a[1];var n=V.distanceToPoint(t,r);c.remove();c=o.circle(t,n,_.extend({stroke:Q.DYNAMIC,"stroke-width":2},i.normalStyle))};p();if(a[1].remove&&!i.editable){a[1].remove()}return{update:p,remove:function e(){c.remove()}}}else if(t==="point"){return{update:null,remove:null}}else{throw new Error("Invalid shape type "+t)}},_combine:function e(t,r){return{type:t,coords:r}},polygon:{equal:pe},line:{equal:X.equal},lineSegment:{equal:pe},angle:{equal:function e(t,r){if(!V.equal(t[1],r[1])){return false}var n=[t[1],t[0]];var o=[t[1],t[2]];var a=[r[1],r[0]];var i=[r[1],r[2]];var s=Y.equal(n,a)&&Y.equal(o,i);var l=Y.equal(n,i)&&Y.equal(o,a);return s||l},defaultOptions:{reflex:false}},circle:{equal:function e(t,r){var n=V.distanceToPoint(t[0],t[1]);var o=V.distanceToPoint(r[0],r[1]);return V.equal(t[0],r[0])&&W.equal(n,o)}},point:{equal:V.equal}};var ge=he.ListItem;var me=function(e){v(a,e);function a(){var e;var r;u(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++){n[o]=arguments[o]}r=f(this,(e=h(a)).call.apply(e,[this].concat(n)));m(d(r),"_transformationRefs",function(){return _.times(r.props.transformations.length,function(e){return r.refs["transformation"+e]})});m(d(r),"value",function(){return _.invoke(r._transformationRefs(),"value")});m(d(r),"handleChange",function(e,t){r.props.onChange(r.value(),t)});m(d(r),"focusLast",function(){var e=r._transformationRefs();if(e.length!==0){_.last(e).focus()}});return r}p(a,[{key:"render",value:function e(){if(this.props.mode==="static"){return i.createElement("span",null)}var t=_.map(this.props.transformations,function(e,t){return i.createElement(ge,{ref:"transformation"+t,key:"transformation"+t,transform:e,mode:this.props.mode,onChange:this.handleChange,onFocus:_.partial(this.props.onFocus,""+t),onBlur:_.partial(this.props.onBlur,""+t),keypadElement:this.props.keypadElement,apiOptions:this.props.apiOptions})},this);return i.createElement("div",{className:"perseus-transformation-list"},t)}}]);return a}(i.Component);var ye=function(e){v(t,e);function t(){u(this,t);return f(this,h(t).apply(this,arguments))}p(t,[{key:"render",value:function e(){var t=this.props.toggled?"simple-button exercise-orange toggled highlighted-tool-button":"simple-button";return i.createElement("button",{type:"button",className:t,disabled:this.props.disabled,onClick:this.props.onClick,onTouchStart:z},this.props.children)}}]);return t}(i.Component);var be=function(e){v(a,e);function a(){var e;var t;u(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++){n[o]=arguments[o]}t=f(this,(e=h(a)).call.apply(e,[this].concat(n)));m(d(t),"state",{selected:null});m(d(t),"changeSelected",function(e){t.props.removeTool(t.state.selected);if(!e||e===t.state.selected){t.setState({selected:null})}else{t.props.addTool(e);t.setState({selected:e})}});return t}p(a,[{key:"render",value:function e(){var t=_.map(de,function(e,t){if(this.props.enabled[t]){return i.createElement(ye,{key:t,disabled:this.props.apiOptions.readOnly,toggled:this.state.selected===t,onClick:this.changeSelected.bind(this,t)},e.verbName)}},this);return i.createElement("div",{className:"transformer-tools-bar"},i.createElement("span",{className:"simple-button-group"},t),i.createElement("button",{className:"transformer-undo-button simple-button",type:"button",disabled:this.props.apiOptions.readOnly,onClick:this.props.onUndoClick,onTouchStart:z},i.createElement(x,U)," "+i18n._("Undo")),i.createElement("div",{className:"clear"}))}}]);return a}(i.Component);var Oe=function(e){v(a,e);function a(){var e;var t;u(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++){n[o]=arguments[o]}t=f(this,(e=h(a)).call.apply(e,[this].concat(n)));m(d(t),"changeSelected",function(e){if(e){t.props.addTool(e)}});return t}p(a,[{key:"render",value:function e(){var t=_.map(de,function(e,t){if(this.props.enabled[t]){return i.createElement(ye,{key:t,toggled:false,disabled:this.props.apiOptions.readOnly,onClick:this.changeSelected.bind(this,t)},i.createElement(x,B)," ",e.nounName)}},this);return i.createElement("div",{className:"transformer-tools-bar"},t,i.createElement("button",{className:"transformer-undo-button simple-button",type:"button",onClick:this.props.onUndoClick,disabled:this.props.apiOptions.readOnly,onTouchStart:z},i.createElement(x,U)," "+i18n._("Undo")),i.createElement("div",{className:"clear"}))}}]);return a}(i.Component);var we=O({displayName:"Transformer",propTypes:{apiOptions:M.propTypes,keypadElement:j,trackInteraction:b.func.isRequired},getDefaultProps:function e(){return _.defaults({transformations:[]},re)},render:function e(){var t=_.extend(te(this.props.graph,J),this.props.graph);var r=this.props.graphMode==="interactive";var n=r?be:Oe;var o=i.createElement("div",{style:{width:t.box[0]}},i.createElement(n,{ref:"toolsBar",enabled:ee(this.props.tools,"enabled"),apiOptions:this.props.apiOptions,addTool:this.addTool,removeTool:this.removeTool,onUndoClick:this.handleUndoClick}));return i.createElement("div",{className:"perseus-widget "+"perseus-widget-transformer"},i.createElement(k,{ref:"graph",box:t.box,range:t.range,labels:t.labels,step:t.step,gridStep:t.gridStep,markings:t.markings,backgroundImage:t.backgroundImage,showProtractor:t.showProtractor,onGraphieUpdated:this.setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),!r&&i18n._("Add transformations below:"),this.props.graphMode==="static"&&[i.createElement("br",{key:"static-br"}),i.createElement("em",{key:"static-nomove"}," ",i18n._("Note: For this question, the shape will not move.")," ")],r&&o,i.createElement(me,{ref:"transformationList",mode:this.props.listMode,transformations:this.props.transformations,onChange:this.setTransformationProps,onFocus:this._handleFocus,onBlur:this._handleBlur,keypadElement:this.props.keypadElement,apiOptions:this.props.apiOptions}),!r&&o)},componentDidMount:function e(){this.setupGraphie(this.graphie())},componentDidUpdate:function e(t){if(this.shouldSetupGraphie(this.props,t)){this.refs.graph.reset()}else if(!q(this.props.transformations,this.transformations)){this.setTransformations(this.props.transformations)}},shouldSetupGraphie:function e(t,r){if(!q(r.starting,t.starting)){return true}else if(r.graphMode!==t.graphMode){return true}else if(r.listMode!==t.listMode){return true}else if(r.drawSolutionShape!==t.drawSolutionShape){return true}else if(t.drawSolutionShape&&!q(r.correct.shape,t.correct.shape)){return true}else if(!q(this.tools,t.tools)){return true}else{return false}},graphie:function e(){return this.refs.graph.graphie()},setupGraphie:function e(t){if(this.props.drawSolutionShape&&this.props.correct.shape&&this.props.correct.shape.coords){ve.addShape(t,{fixed:true,shape:this.props.correct.shape,normalStyle:{stroke:Q.GRAY,"stroke-dasharray":"","stroke-width":2}})}this.currentTool=null;this.refs.toolsBar.changeSelected(null);this.addTransformerShape(this.props.starting.shape,false);this.setTransformations(this.props.transformations);this.tools={translation:_.clone(this.props.tools.translation),rotation:_.clone(this.props.tools.rotation),reflection:_.clone(this.props.tools.reflection),dilation:_.clone(this.props.tools.dilation)}},setTransformations:function e(t){this.resetCoords();this.transformations=_.clone(t);_.each(this.transformations,this.applyTransform)},addTransformerShape:function e(t,r){var n=this;var o=this.graphie();this.shape=ve.addMovableShape(o,{shape:t,editable:false,showPoints:this.props.graphMode!=="static",translatable:r,onMove:function e(t,r){t=K.roundToNearest(o.snap[0],t);r=K.roundToNearest(o.snap[1],r);n.addTransform({type:"translation",vector:[t,r]});return[t,r]},normalPointStyle:{fill:r?Q.INTERACTIVE:Q.DYNAMIC,stroke:r?Q.INTERACTIVE:Q.DYNAMIC},highlightPointStyle:{fill:Q.INTERACTING,stroke:Q.INTERACTING}})},addTool:function e(t){var r=this;if(this.props.graphMode==="interactive"){if(t==="translation"){this.currentTool=this.addTranslationTool()}else if(t==="rotation"){this.currentTool=this.addRotationTool()}else if(t==="reflection"){this.currentTool=this.addReflectionTool()}else if(t==="dilation"){this.currentTool=this.addDilationTool()}else{throw new Error("Invalid tool id: "+t)}}else{var n;if(t==="translation"){n={type:t,vector:[null,null]}}else if(t==="rotation"){n={type:t,center:[null,null],angleDeg:null}}else if(t==="reflection"){n={type:t,line:[[null,null],[null,null]]}}else if(t==="dilation"){n={type:t,center:[null,null],scale:null}}else{throw new Error("Invalid tool id: "+t)}this.doTransform(n,function(){r.refs.transformationList.focusLast()})}},removeTool:function e(t){if(this.currentTool){this.currentTool.remove()}this.currentTool=null},addTranslationTool:function e(){var t=this;this.shape.remove();this.addTransformerShape(this.shape.toJSON(),true);return{remove:function e(){t.shape.remove();t.addTransformerShape(t.shape.toJSON(),false)}}},snapCoord:function e(t){var r=this.graphie();return _.map(t,function(e,t){return K.roundToNearest(r.snap[t],e)})},normalizeReflectionCoords:function e(t){var r=this.snapCoord(X.midpoint(t));var n=G.polarDegFromCart(G.subtract(t[0],t[1]));var o=[1,K.roundToNearest(45,n[1])];var a=G.cartFromPolarDeg(o);var i=_.map([-1,1],function(e){var t=G.add(r,G.scale(a,e*this.scaleToCurrentRange(R)));return this.snapCoord(t)},this);return i},addReflectionTool:function e(){var t=this.props.tools.reflection;if(!t.enabled){return}var n=this;var r=this.refs.graph.graphie();var o=function e(){n.changeTool("reflection",{coords:_.pluck(i,"coord")})};var a=this.normalizeReflectionCoords(t.coords);var i=_.map(a,function(e){return r.addMovablePoint({coord:e,visible:false})},this);var s;var l=ne(t);r.style({},function(){s=r.addMovableLineSegment({fixed:t.constraints.fixed,constraints:t.constraints,pointA:i[0],pointZ:i[1],snapX:r.snap[0],snapY:r.snap[1],extendLine:true,normalStyle:{stroke:l,"stroke-width":2,"stroke-dasharray":"- "},highlightStyle:{stroke:Q.INTERACTING,"stroke-width":2,"stroke-dasharray":"- "},movePointsWithLine:true,onMoveEnd:o})});var u=r.addReflectButton({fixed:t.constraints.fixed,line:s,size:this.scaleToCurrentRange(F),onClick:function e(){n.doTransform({type:"reflection",line:_.pluck(i,"coord")});if(c){c.setCoord(G.add(u.coord,G.subtract(u.coord,c.coord)));c.update()}},normalStyle:{stroke:l,"stroke-width":2,fill:l},highlightStyle:{stroke:Q.INTERACTING,"stroke-width":3,fill:Q.INTERACTING},onMoveEnd:o});var c=null;if(!t.constraints.fixed){var p=G.polarDegFromCart(G.subtract(i[1].coord,i[0].coord))[1]+90;c=r.addRotateHandle({center:u,radius:this.scaleToCurrentRange(R),angleDeg:p,width:this.scaleToCurrentRange(.24),hoverWidth:this.scaleToCurrentRange(.4),lengthAngle:17,onMove:function e(t){return K.roundToNearest(45,t)},onMoveEnd:o})}P(s).on("move",function(){u.update();P(u).trigger("move")});if(c){P(c).on("move",function(){var e=n.snapCoord(c.coord);var t=G.subtract(e,u.coord);var r=u.isFlipped()?1:0;i[r].setCoord(G.add(u.coord,G.rotateDeg(t,90)));i[1-r].setCoord(G.add(u.coord,G.rotateDeg(t,-90)));s.transform(true);u.update()})}return{remove:function e(){u.remove();if(c){c.remove()}s.remove();i[0].remove();i[1].remove()}}},scaleToCurrentRange:function e(t){return oe(t,this.refs.graph.props.range)},addRotationTool:function e(){var t=this.props.tools.rotation;if(!t.enabled){return}var o=this;var r=this.refs.graph.graphie();var n=ne(t);this.rotatePoint=r.addMovablePoint({constraints:t.constraints,coord:t.coord,snapX:r.snap[0],snapY:r.snap[1],normalStyle:{"stroke-dasharray":"",stroke:n,fill:n},highlightStyle:{"stroke-dasharray":"",stroke:Q.INTERACTING,fill:Q.INTERACTING}});this.rotateHandle=r.addRotateHandle({center:this.rotatePoint,radius:this.scaleToCurrentRange(D),width:this.scaleToCurrentRange(.24),hoverWidth:this.scaleToCurrentRange(.4),onMove:function e(t,r){var n=o.getRotationTransformFromAngle(o.rotatePoint.coord,t-r);o.doTransform(n);return r+n.angleDeg}});this.rotatePoint.onMoveEnd=function(e,t){o.changeTool("rotation",{coord:[e,t]})};return{remove:function e(){o.rotateHandle.remove();o.rotatePoint.remove()}}},addDilationTool:function e(){var t=this.props.tools.dilation;if(!t.enabled){return}var n=this;var r=this.refs.graph.graphie();var o=ne(t);n.dilationCircle=r.addCircleGraph({centerConstraints:t.constraints,center:t.coord,radius:n.scaleToCurrentRange(2),snapX:r.snap[0],snapY:r.snap[1],minRadius:n.scaleToCurrentRange(1),snapRadius:n.scaleToCurrentRange(.5),onResize:function e(t,r){n.doTransform({type:"dilation",center:n.dilationCircle.centerPoint.coord,scale:t/r})},circleNormalStyle:{stroke:o,"stroke-width":2,"stroke-dasharray":"- ","fill-opacity":0},circleHighlightStyle:{stroke:Q.INTERACTING,"stroke-width":2,"stroke-dasharray":"",fill:Q.INTERACTING,"fill-opacity":.05},centerNormalStyle:{stroke:o,fill:o,"stroke-width":2,"stroke-dasharray":""},centerHighlightStyle:{stroke:o,fill:o,"stroke-width":2,"stroke-dasharray":""}});var a=this.dilationCircle.centerPoint.onMoveEnd;this.dilationCircle.centerPoint.onMoveEnd=function(){if(a){a.apply(this,_.toArray(arguments))}n.changeTool("dilation",{coord:n.dilationCircle.centerPoint.coord})};return{remove:function e(){n.dilationCircle.remove()}}},getRotationTransformFromAngle:function e(t,r){r=(r+360)%360;if(r>180){r-=360}var n=Math.round(r/I)*I;return{type:"rotation",center:t,angleDeg:n}},doTransform:function e(t,r){this.applyTransform(t);this.addTransform(t,r)},applyTransform:function e(t){if(this.props.graphMode!=="static"){var r=he.apply(t);this.applyCoordTransformation(r)}},applyCoordTransformation:function e(r){_.each(this.shape.points,function(e){var t=r(e.coord);e.setCoord(t)});this.shape.update()},resetCoords:function e(){var r=this.props.starting.shape.coords;_.each(this.shape.points,function(e,t){e.setCoord(r[t])});this.shape.update()},handleUndoClick:function e(){this.refs.toolsBar.changeSelected(null);if(this.props.transformations.length){this.props.onChange({transformations:_.initial(this.props.transformations)})}},setTransformationProps:function e(t,r){this.props.onChange({transformations:t},r)},addTransform:function e(t,r){this.transformations=he.append(this.transformations,t);this.props.onChange({transformations:_.clone(this.transformations)},r)},changeTool:function e(t,r){var n=_.clone(this.props.tools);n[t]=_.extend({},this.props.tools[t],r);this.tools[t]=_.clone(n[t]);this.props.onChange({tools:n});this.props.trackInteraction()},simpleValidate:function e(t){return we.validate(this.getUserInput(),t)},getCoords:function e(){var t=this.props.starting.shape.coords;var r=this.props.transformations;return _.reduce(r,function(e,t){return _.map(e,he.apply(t))},t)},getEditorJSON:function e(){var t=_.pick(this.props,"grading","starting","graphMode","listMode","tools","drawSolutionShape","gradeEmpty");t.graph=this.refs.graph.toJSON();t.version=1.2;t.answer=this.getUserInput();return t},getUserInput:function e(){return{transformations:this.props.transformations,shape:{type:this.shape.type,coords:this.getCoords(),options:this.shape.getOptions()}}},_handleFocus:function e(){var t=Array.prototype.slice.call(arguments);this.props.onFocus(t)},_handleBlur:function e(){var t=Array.prototype.slice.call(arguments);this.props.onBlur(t)},_getTransformationForID:function e(t){var r=["transformationList","transformation"+t];var n=this;_.each(r,function(e){n=n.refs[e]});return n},getInputPaths:function e(){var o=this;if(this.props.listMode==="static"){return[]}var a=[];_.each(this.props.transformations,function(e,t){e=o._getTransformationForID(t);var r=e.getInputPaths();var n=_.map(r,function(e){return[""+t].concat(e)});a=a.concat(n)});return a},_passToInner:function e(t,r){if(!r||!r.length){return}var n=_.rest(r);var o=[n].concat(_.rest(arguments,2));var a=_.head(r);var i=this._getTransformationForID(a);return i[t].apply(i,o)},focus:function e(){var t=this.getInputPaths();if(t.length>0){this.focusInputPath(t[0]);return true}return false},focusInputPath:function e(t){if(t.length===0){return false}Z(t.length>=2);return this._passToInner("focusInputPath",t)},blurInputPath:function e(t){if(t.length===0){return false}Z(t.length>=2);return this._passToInner("blurInputPath",t)},setInputValue:function e(t,r,n){Z(t.length>=2);return this._passToInner("setInputValue",t,r,n)},getDOMNodeForPath:function e(t){Z(t.length>=2);return this._passToInner("getDOMNodeForPath",t)},getGrammarTypeForPath:function e(t){Z(t.length>=2);return this._passToInner("getGrammarTypeForPath",t)}});_.extend(we,{validate:function e(n,o){var t=function e(t){if(o.tools[t].required){var r=_.any(_.map(n.transformations,function(e){return e.type===t&&!he.isEmpty(e)&&!he.isNoOp(e)}));if(!r){return{v:{type:"invalid",message:i18n._("Your transformation must use a "+"%(type)s.",{type:de[t].lowerNounName})}}}}};for(var r in de){var a=t(r);if(typeof a==="object")return a.v}if(ve.equal(n.shape,o.correct.shape)){return{type:"points",earned:1,total:1,message:null}}else if(!o.gradeEmpty&&q(n.shape.coords,o.starting.shape.coords)){return{type:"invalid",message:i18n._("Use the interactive graph to define a "+"correct transformation.")}}else{return{type:"points",earned:0,total:1,message:null}}}});e.exports={name:"transformer",displayName:"Transformer",widget:we}},GbkG:function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("2B1R");r("zKZe");r("5DmW");r("NBAS");r("FZtP");var l=n(r("q1tI"));function n(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function u(){u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};return u.apply(this,arguments)}function c(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){v(t,e,r[e])})}return t}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function i(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);return e}function s(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return f(e)}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return p(e)}function f(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)d(e,t)}function d(e,t){d=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return d(e,t)}function v(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var g=r("17x9");var m=r("fhzG");var _=r("F/us");var y=r("e2gc");var b=r("bHYm");var O=r("yPu2");var w=r("uBl0");var P=r("ydm1");var k=r("Giaf");var x=k.MovablePoint;var E=k.MovableLine;var C=r("T2HF");var S=r("eAf/").number;var T=r("eAf/").vector;var M=r("eAf/").point;var j=r("yfnS");var I=r("NUXr"),N=I.containerSizeClassPropType;var A=r("UcaO"),D=A.interactiveSizes;var R=r("NUXr"),F=R.getInteractiveBoxFromSizeClass;var L=r("+jAD");var B=r("INEF"),U=B.GrapherUtil,q=B.typeToButton,H=B.functionForType,z=B.DEFAULT_GRAPHER_PROPS;function W(e,t,r){var n=function e(t,r,n){return(r[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(r[1]-t[1])};return n(r[0],r[1],t)>0!==n(r[0],r[1],e)>0}var G={padding:"5px 5px"};var V=function(e){h(o,e);function o(){var e;var i;a(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}i=s(this,(e=p(o)).call.apply(e,[this].concat(r)));v(f(i),"_coords",function(e){e=e||i.props;var t=e.graph;var r=e.model&&U.maybePointsFromNormalized(e.model.defaultCoords,t.range,t.step,t.snapStep);return e.coords||r||null});v(f(i),"_asymptote",function(e){e=e||i.props;return e.asymptote});v(f(i),"change",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return L.change.apply(f(i),t)});v(f(i),"renderPlot",function(){var e=i.props.model;var t=i.props.graph.range[0];var r=c({stroke:i.props.isMobile?j.BLUE_C:j.DYNAMIC},i.props.isMobile?{"stroke-width":3}:{});var n=e.getCoefficients(i._coords(),i._asymptote());if(!n){return}var o=e.getPropsForCoeffs(n,t);return l.createElement(e.Movable,u({},o,{key:i.props.model.url,range:t,style:r}))});v(f(i),"renderAsymptote",function(){var o=i.props.model;var a=i.props.graph;var e=i._asymptote();var t={strokeDasharray:"- "};return e&&l.createElement(E,{onMove:function e(t,r){var n=T.subtract(t,r);var o=_.map(i._asymptote(),function(e){return T.add(e,n)});i.props.onChange({asymptote:o})},constraints:[b.MovableLine.constraints.bound(),b.MovableLine.constraints.snap(),function(e,t){var r=T.subtract(e,t);var n=_.map(i._asymptote(),function(e){return T.add(e,r)});if(o.extraAsymptoteConstraint){return o.extraAsymptoteConstraint(e,t,i._coords(),n,a)}return true}],normalStyle:t,highlightStyle:t},_.map(e,function(e,t){return l.createElement(x,{key:"asymptoteCoord-".concat(t),coord:e,static:true,draw:null,extendLine:true,showHairlines:i.props.showHairlines,hideHairlines:i.props.hideHairlines,showTooltips:i.props.showTooltips,isMobile:i.props.isMobile})}))});return i}i(o,[{key:"render",value:function e(){var i=this;var t=function e(t,a){return l.createElement(x,{key:a,coord:t,static:i.props.static,constraints:[b.MovablePoint.constraints.bound(),b.MovablePoint.constraints.snap(),function(r){var e=_.all(i._coords(),function(e,t){return a===t||!e||!S.equal(r[0],e[0])});if(!e){return false}if(i.props.model&&i.props.model.extraCoordConstraint){var t=i.props.model.extraCoordConstraint;var n=_.clone(i._coords());var o=_.clone(n[a]);n[a]=r;return t(r,o,n,i._asymptote(),i.props.graph)}return e}],onMove:function e(t,r){var n;var o=i._asymptote();if(o&&i.props.model.allowReflectOverAsymptote&&W(t,r,o)){n=_.map(i._coords(),function(e){return M.reflectOverLine(e,o)})}else{n=_.clone(i._coords())}n[a]=t;i.props.onChange({coords:n})},showHairlines:i.props.showHairlines,hideHairlines:i.props.hideHairlines,showTooltips:i.props.showTooltips,isMobile:i.props.isMobile})};var r=_.map(this._coords(),t);var n=this.props.graph.box;var o=this.props.graph.backgroundImage;var a=null;if(o.url){var s=n[0]/D.defaultBoxSize;a=l.createElement(O,{src:o.url,width:o.width,height:o.height,scale:s})}return l.createElement("div",{className:"perseus-widget "+"perseus-widget-grapher",style:{width:n[0],height:this.props.flexibleType?"auto":n[1],boxSizing:"initial"}},l.createElement("div",{className:"graphie-container above-scratchpad",style:{width:n[0],height:n[1]}},a,l.createElement(k,u({},this.props.graph,{setDrawingAreaAvailable:this.props.setDrawingAreaAvailable}),this.props.model&&this.renderPlot(),this.props.model&&this.renderAsymptote(),this.props.model&&r)))}}]);return o}(l.Component);v(V,"propTypes",c({},L.propTypes,{flexibleType:g.bool,graph:g.any,hideHairlines:g.func,isMobile:g.bool,model:g.any,onChange:g.func,setDrawingAreaAvailable:g.func,showHairlines:g.func,showTooltips:g.bool,static:g.bool}));v(V,"defaultProps",{graph:{range:[[-10,10],[-10,10]],step:[1,1]},coords:null,asymptote:null,isMobile:false});var Y=m({displayName:"Grapher",propTypes:{apiOptions:g.any,availableTypes:g.arrayOf(g.any),containerSizeClass:N.isRequired,graph:g.any,markings:g.string,onChange:g.func,plot:g.any,static:g.bool,trackInteraction:g.func.isRequired},getDefaultProps:function e(){return z},render:function e(){var t=this.props.plot.type;var r=this.props.plot.coords;var n=this.props.plot.asymptote;var o=l.createElement("div",{style:G,className:"above-scratchpad"},l.createElement(P,{value:t,allowEmpty:true,buttons:_.map(this.props.availableTypes,q),onChange:this.handleActiveTypeChange}));var a=F(this.props.containerSizeClass);var i=c({},this.props.graph,U.getGridAndSnapSteps(this.props.graph,a[0]),{gridConfig:this._getGridConfig(c({},this.props.graph,{box:a},U.getGridAndSnapSteps(this.props.graph,a[0])))});var s={graph:{box:a,range:i.range,step:i.step,snapStep:i.snapStep,backgroundImage:i.backgroundImage,options:i,setup:this._setupGraphie},onChange:this.handlePlotChanges,model:t&&H(t),coords:r,asymptote:n,static:this.props.static,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,isMobile:this.props.apiOptions.isMobile,showTooltips:this.props.graph.showTooltips,showHairlines:this.showHairlines,hideHairlines:this.hideHairlines};return l.createElement("div",null,l.createElement(V,s),this.props.availableTypes.length>1&&o)},handlePlotChanges:function e(t){var r=_.extend({},this.props.plot,t);this.props.onChange({plot:r});this.props.trackInteraction()},handleActiveTypeChange:function e(t){var r=this.props.graph;var n=_.extend({},this.props.plot,U.defaultPlotProps(t,r));this.props.onChange({plot:n})},_getGridConfig:function e(r){return _.map(r.step,function(e,t){return w.gridDimensionConfig(e,r.range[t],r.box[t],r.gridStep[t])})},_calculateMobileTickStep:function e(t,r,n){var o=w.constrainedTickStepsFromTickSteps(r,n);o[0]=o[0]/t[0];o[1]=o[1]/t[1];return o},_setupGraphie:function e(t,r){var n=this.props.apiOptions.isMobile;if(r.markings==="graph"){t.graphInit({range:r.range,scale:_.pluck(r.gridConfig,"scale"),axisArrows:"<->",labelFormat:function e(t){return"\\small{"+t+"}"},gridStep:r.gridStep,snapStep:r.snapStep,tickStep:n?this._calculateMobileTickStep(r.gridStep,r.step,r.range):_.pluck(r.gridConfig,"tickStep"),labelStep:1,unityLabels:_.pluck(r.gridConfig,"unityLabel"),isMobile:n});t.label([0,r.range[1][1]],r.labels[1],n?"below right":"above");t.label([r.range[0][1],0],r.labels[0],n?"above left":"right")}else if(r.markings==="grid"){t.graphInit({range:r.range,scale:_.pluck(r.gridConfig,"scale"),gridStep:r.gridStep,axes:false,ticks:false,labels:false,isMobile:n})}else if(r.markings==="none"){t.init({range:r.range,scale:_.pluck(r.gridConfig,"scale")})}if(this.props.apiOptions.isMobile){var o={normalStyle:{strokeWidth:1}};this.horizHairline=new C(t,[0,0],[0,0],o);this.horizHairline.attr({stroke:j.INTERACTIVE});this.horizHairline.hide();this.vertHairline=new C(t,[0,0],[0,0],o);this.vertHairline.attr({stroke:j.INTERACTIVE});this.vertHairline.hide()}},showHairlines:function e(t){if(this.props.apiOptions.isMobile&&this.props.markings!=="none"){this.horizHairline.moveTo([this.props.graph.range[0][0],t[1]],[this.props.graph.range[0][1],t[1]]);this.horizHairline.show();this.vertHairline.moveTo([t[0],this.props.graph.range[1][0]],[t[0],this.props.graph.range[1][1]]);this.vertHairline.show()}},hideHairlines:function e(){if(this.props.apiOptions.isMobile){this.horizHairline.hide();this.vertHairline.hide()}},simpleValidate:function e(t){return U.validate(this.getUserInput(),t)},getUserInput:function e(){return Y.getUserInputFromProps(this.props)},focus:y.noop});var X=function e(t){var r={availableTypes:t.availableTypes,graph:t.graph};if(r.availableTypes.length===1){var n=r.graph;var o=U.chooseType(r.availableTypes);r.plot=U.defaultPlotProps(o,n)}return r};var K=function e(t){return _.extend({},X(t),{availableTypes:[t.correct.type],plot:t.correct})};_.extend(Y,{validate:function e(t,r){return U.validate(t,r)},getUserInputFromProps:function e(t){return t.plot}});e.exports={name:"grapher",displayName:"Grapher",widget:Y,transform:X,staticTransform:K}},HQqP:function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("yXV3");r("+2oP");r("5DmW");r("TWNs");r("JfAA");r("FZtP");function u(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){o(t,e,r[e])})}return t}function o(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var n=new RegExp("^[A-Za-z\\[\\]()=#+-]*$");var i=new RegExp("^(Cl|Br|[CONPSFBI]|\\[)");function c(e){this.message=e}function l(e,t,r){var n=t[0];var o=t.slice(1);var a;if(Array.isArray(e)){a=[].concat(e)}else{a=u({},e||{})}var i=r;if(o.length>0){i=l(a[n],o,r)}a[n]=i;return a}function p(e,t){var r=t.reduce(function(e,t){return e[t]},e);return l(e,t,r+1)}function a(e){return n.test(e)}function s(e,t){var r=e[0];var n=e.slice(1);if(r==="="){return y(n,l(t,["bond","bondType"],"double"))}else if(r==="#"){return y(n,l(t,["bond","bondType"],"triple"))}throw new c("Invalid character: "+r)}function f(e,t){if(t.length===0){return e}if(e===""){throw new c("Mismatched parentheses")}var r=e[0];var n=e.slice(1);if(r==="("){return f(n,t.concat(r))}if(r===")"){return f(n,t.slice(1))}return f(n,t)}function h(e,t){var r=e[0];var n=e.slice(1);if(r==="("){var o=u({},t,{parens:t.parens+"("});o=p(t,["idx",t.idx.length-1,1]);var a=-1;if(t.idx[t.idx.length-1][0]%2===0){a=0}var i=u({},o,{idx:o.idx.concat([[a,0]]),parens:o.parens.concat("(")});var s=y(n,i);var l=y(f(n,["("]),o);return[s].concat(l)}else if(r===")"){if(t.parens[t.parens.length-1]!=="("){throw new c("Mismatched parentheses")}return null}else{throw new c("Invalid bare character: "+r)}}function d(e,t){var r=null;var n=null;if(e[0]==="["){var o=e.indexOf("]");if(o===-1){return["",e]}r=e.slice(1,o);n=e.slice(o+1)}else{var a=i.exec(e);r=a[1];n=e.slice(r.length)}return[r,n]}function v(e,t){var r=d(e,t);var n=r[0];if(n===""){return["error","Unable to parse bracketed atom."]}var o=r[1];var a=l(t,["idx",t.idx.length-1],[1+t.idx[t.idx.length-1][0],0]);var i=y(o,l(a,["bond","bondType"],"single"));if(!Array.isArray(i)&&!!i){i=[i]}var s={type:"atom",symbol:n,bonds:i,idx:a.idx};if(t.bond){return{type:"bond",bondType:t.bond.bondType,to:s}}return s}function g(e){return i.test(e)}function m(e){return e==="="||e==="#"}function y(e,t){if(!a(e)){throw new c("Invalid input.")}if(!e||e.length===0){return null}if(g(e)){return v(e,t||{idx:[[0,0]],parens:[],stack:[],bondModifiers:[]})}else if(m(e[0])){return s(e,t)}else{return h(e,t)}}e.exports={parse:y,ParseError:c}},INEF:function(e,t,r){"use strict";r("4mDm");r("2B1R");r("toAj");r("5DmW");r("07d7");r("3bBZ");var n=o(r("q1tI"));function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}var _=r("F/us");var i=r("uBl0");var a=r("Giaf");var s=a.Plot;var u=r("eAf/").point;var l={url:null};function c(e){var t=e[0];var r=e[1];var n=e[2];var o=e[3];if(t<0){t*=-1;r*=-1;n*=-1}var a=2*Math.PI;if(r<0){r*=-1;n*=-1;n+=a/2}while(n>0){n-=a}while(n<0){n+=a}return[t,r,n,o]}function p(e){var t=e[0];var r=e[1];var n=e[2];var o=e[3];if(t<0){t*=-1;r*=-1;n*=-1}var a=Math.PI;if(r<0){r*=-1;n*=-1;n+=a/2}while(n>0){n-=a}while(n<0){n+=a}return[t,r,n,o]}var f={areEqual:function e(t,r){return i.deepEq(t,r)},Movable:s,getPropsForCoeffs:function e(t){return{fn:_.partial(this.getFunctionForCoeffs,t)}}};var h=_.extend({},f,{url:"https://ka-perseus-graphie.s3.amazonaws.com/67aaf581e6d9ef9038c10558a1f70ac21c11c9f8.png",defaultCoords:[[.25,.75],[.75,.75]],getCoefficients:function e(t){var r=t[0];var n=t[1];var o=n[0]-r[0];var a=n[1]-r[1];if(o===0){return}var i=a/o;var s=n[1]-i*n[0];return[i,s]},getFunctionForCoeffs:function e(t,r){var n=t[0],o=t[1];return n*r+o},getEquationString:function e(t){var r=this.getCoefficients(t);var n=r[0],o=r[1];return"y = "+n.toFixed(3)+"x + "+o.toFixed(3)}});var d=_.extend({},f,{url:"https://ka-perseus-graphie.s3.amazonaws.com/e23d36e6fc29ee37174e92c9daba2a66677128ab.png",defaultCoords:[[.5,.5],[.75,.75]],Movable:a.Parabola,getCoefficients:function e(t){var r=t[0];var n=t[1];var o=r[0];var a=r[1];var i=(n[1]-a)/((n[0]-o)*(n[0]-o));var s=-2*o*i;var l=i*o*o+a;return[i,s,l]},getFunctionForCoeffs:function e(t,r){var n=t[0],o=t[1],a=t[2];return(n*r+o)*r+a},getPropsForCoeffs:function e(t){return{a:t[0],b:t[1],c:t[2]}},getEquationString:function e(t){var r=this.getCoefficients(t);var n=r[0],o=r[1],a=r[2];return"y = "+n.toFixed(3)+"x^2 + "+o.toFixed(3)+"x + "+a.toFixed(3)}});var v=_.extend({},f,{url:"https://ka-perseus-graphie.s3.amazonaws.com/3d68e7718498475f53b206c2ab285626baf8857e.png",defaultCoords:[[.5,.5],[.6,.6]],Movable:a.Sinusoid,getCoefficients:function e(t){var r=t[0];var n=t[1];var o=n[1]-r[1];var a=Math.PI/(2*(n[0]-r[0]));var i=r[0]*a;var s=r[1];return[o,a,i,s]},getFunctionForCoeffs:function e(t,r){var n=t[0],o=t[1],a=t[2],i=t[3];return n*Math.sin(o*r-a)+i},getPropsForCoeffs:function e(t){return{a:t[0],b:t[1],c:t[2],d:t[3]}},getEquationString:function e(t){var r=this.getCoefficients(t);var n=r[0],o=r[1],a=r[2],i=r[3];return"y = "+n.toFixed(3)+" sin("+o.toFixed(3)+"x - "+a.toFixed(3)+") + "+i.toFixed(3)},areEqual:function e(t,r){return i.deepEq(c(t),c(r))}});var g=_.extend({},f,{url:"https://ka-perseus-graphie.s3.amazonaws.com/7db80d23c35214f98659fe1cf0765811c1bbfbba.png",defaultCoords:[[.5,.5],[.75,.75]],getCoefficients:function e(t){var r=t[0];var n=t[1];var o=n[1]-r[1];var a=Math.PI/(4*(n[0]-r[0]));var i=r[0]*a;var s=r[1];return[o,a,i,s]},getFunctionForCoeffs:function e(t,r){var n=t[0],o=t[1],a=t[2],i=t[3];return n*Math.tan(o*r-a)+i},getEquationString:function e(t){var r=this.getCoefficients(t);var n=r[0],o=r[1],a=r[2],i=r[3];return"y = "+n.toFixed(3)+" sin("+o.toFixed(3)+"x - "+a.toFixed(3)+") + "+i.toFixed(3)},areEqual:function e(t,r){return i.deepEq(p(t),p(r))}});var m=_.extend({},f,{url:"https://ka-perseus-graphie.s3.amazonaws.com/9cbfad55525e3ce755a31a631b074670a5dad611.png",defaultCoords:[[.5,.55],[.75,.75]],defaultAsymptote:[[0,.5],[1,.5]],extraCoordConstraint:function e(t,r,n,o,a){var i=_.head(o)[1];return _.all(n,function(e){return e[1]!==i})},extraAsymptoteConstraint:function e(t,r,n,o,a){var i=t[1];var s=_.all(n,function(e){return e[1]>i})||_.all(n,function(e){return e[1]<i});if(s){return[r[0],i]}else{var l=r[1];var u=_.all(n,function(e){return e[1]>l});if(u){var c=_.min(_.map(n,function(e){return e[1]}));return[r[0],c-a.snapStep[1]]}else{var p=_.max(_.map(n,function(e){return e[1]}));return[r[0],p+a.snapStep[1]]}}},allowReflectOverAsymptote:true,getCoefficients:function e(t,r){var n=t[0];var o=t[1];var a=_.head(r)[1];var i=Math.log((n[1]-a)/(o[1]-a))/(n[0]-o[0]);var s=(n[1]-a)/Math.exp(i*n[0]);return[s,i,a]},getFunctionForCoeffs:function e(t,r){var n=t[0],o=t[1],a=t[2];return n*Math.exp(o*r)+a},getEquationString:function e(t,r){if(!r){return null}var n=this.getCoefficients(t,r);var o=n[0],a=n[1],i=n[2];return"y = "+o.toFixed(3)+"e^("+a.toFixed(3)+"x) + "+i.toFixed(3)}});var y=_.extend({},f,{url:"https://ka-perseus-graphie.s3.amazonaws.com/f6491e99d34af34d924bfe0231728ad912068dc3.png",defaultCoords:[[.55,.5],[.75,.75]],defaultAsymptote:[[.5,0],[.5,1]],extraCoordConstraint:function e(t,r,n,o,a){var i=_.head(o)[0];return _.all(n,function(e){return e[0]!==i})&&n[0][1]!==n[1][1]},extraAsymptoteConstraint:function e(t,r,n,o,a){var i=t[0];var s=_.all(n,function(e){return e[0]>i})||_.all(n,function(e){return e[0]<i});if(s){return[i,r[1]]}else{var l=r[0];var u=_.all(n,function(e){return e[0]>l});if(u){var c=_.min(_.map(n,function(e){return e[0]}));return[c-a.snapStep[0],r[1]]}else{var p=_.max(_.map(n,function(e){return e[0]}));return[p+a.snapStep[0],r[1]]}}},allowReflectOverAsymptote:true,getCoefficients:function e(t,r){var n=function e(t){return[t[1],t[0]]};var o=m.getCoefficients(_.map(t,n),_.map(r,n));var a=-o[2]/o[0];var i=1/o[0];var s=1/o[1];return[s,i,a]},getFunctionForCoeffs:function e(t,r,n){var o=t[0],a=t[1],i=t[2];return o*Math.log(a*r+i)},getEquationString:function e(t,r){if(!r){return null}var n=this.getCoefficients(t,r);var o=n[0],a=n[1],i=n[2];return"y = ln("+o.toFixed(3)+"x + "+a.toFixed(3)+") + "+i.toFixed(3)}});var b=_.extend({},f,{url:"https://ka-perseus-graphie.s3.amazonaws.com/8256a630175a0cb1d11de223d6de0266daf98721.png",defaultCoords:[[.5,.5],[.75,.75]],getCoefficients:function e(t){var r=t[0];var n=t[1];var o=n[0]-r[0];var a=n[1]-r[1];if(o===0){return}var i=Math.abs(a/o);if(n[1]<r[1]){i*=-1}var s=r[0];var l=r[1];return[i,s,l]},getFunctionForCoeffs:function e(t,r){var n=t[0],o=t[1],a=t[2];return n*Math.abs(r-o)+a},getEquationString:function e(t){var r=this.getCoefficients(t);var n=r[0],o=r[1],a=r[2];return"y = "+n.toFixed(3)+"| x - "+o.toFixed(3)+"| + "+a.toFixed(3)}});var O={linear:h,quadratic:d,sinusoid:v,tangent:g,exponential:m,logarithm:y,absolute_value:b};var w=_.keys(O);function P(e){return O[e]}var k={validate:function e(t,r){if(t.type!==r.correct.type){return{type:"points",earned:0,total:1,message:null}}if(t.coords==null){return{type:"invalid",message:null}}var n=P(t.type);var o=n.getCoefficients(t.coords,t.asymptote);var a=n.getCoefficients(r.correct.coords,r.correct.asymptote);if(o==null||a==null){return{type:"invalid",message:null}}else if(n.areEqual(o,a)){return{type:"points",earned:1,total:1,message:null}}else{return{type:"points",earned:0,total:1,message:null}}},getEquationString:function e(t){var r=t.plot;if(r.type&&r.coords){var n=P(r.type);var o=n.getEquationString(r.coords,r.asymptote);return o||""}else{return""}},pointsFromNormalized:function e(t,i,s,r){var l=function e(t,r){return Math.floor((t[1]-t[0])/r)};return _.map(t,function(e){var t=_.map(e,function(e,t){var r=i[t];var n=s[t];var o=l(r,n);var a=Math.round(e*o);return r[0]+n*a});return u.roundTo(t,r)})},maybePointsFromNormalized:function e(t,r,n,o){if(t){return this.pointsFromNormalized(t,r,n,o)}else{return t}},defaultPlotProps:function e(t,r){var n=P(t);var o=[1,1];var a=i.snapStepFromGridStep(o);return{type:t,asymptote:this.maybePointsFromNormalized(n.defaultAsymptote,r.range,r.step,a),coords:null}},chooseType:_.first,getGridAndSnapSteps:function e(t,r){var n=t.gridStep||i.getGridStep(t.range,t.step,r);var o=t.snapStep||i.snapStepFromGridStep(n);return{gridStep:n,snapStep:o}}};var x={};x.graph={labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],backgroundImage:l,markings:"graph",rulerLabel:"",rulerTicks:10,valid:true,showTooltips:false};x.plot=k.defaultPlotProps("linear",x.graph);x.availableTypes=[x.plot.type];function E(e){var t=e.charAt(0).toUpperCase()+e.substring(1);return{value:e,title:t,content:n.createElement("img",{src:P(e).url,alt:t})}}e.exports={GrapherUtil:k,allTypes:w,typeToButton:E,functionForType:P,DEFAULT_GRAPHER_PROPS:x,DEFAULT_BACKGROUND_IMAGE:l}},JtQr:function(e,t,r){"use strict";r("ToJy");r("FZtP");function n(e,t){if(t.value===null){return}e.fillStyle=f.fgColor;e.font=f.font;e.fillText(t.value,t.pos[0]-f.fontSizePx/2+1,t.pos[1]+f.fontSizePx/2)}function o(e,t){var r=new Path2D;e.lineWidth=5*f.lineWidth;e.strokeStyle=f.fgColor;r.moveTo(t.startPos[0],t.startPos[1]);r.lineTo(t.endPos[0],t.endPos[1]);e.stroke(r);r=new Path2D;e.lineWidth=3*f.lineWidth;e.strokeStyle=f.bgColor;r.moveTo(t.startPos[0],t.startPos[1]);r.lineTo(t.endPos[0],t.endPos[1]);e.stroke(r)}function a(e,t){var r=new Path2D;e.lineWidth=7*f.lineWidth;e.strokeStyle=f.fgColor;r.moveTo(t.startPos[0],t.startPos[1]);r.lineTo(t.endPos[0],t.endPos[1]);e.stroke(r);r=new Path2D;e.lineWidth=5*f.lineWidth;e.strokeStyle=f.bgColor;r.moveTo(t.startPos[0],t.startPos[1]);r.lineTo(t.endPos[0],t.endPos[1]);e.stroke(r);i(e,t)}function i(e,t){var r=new Path2D;e.lineWidth=f.lineWidth;e.strokeStyle=f.fgColor;r.moveTo(t.startPos[0],t.startPos[1]);r.lineTo(t.endPos[0],t.endPos[1]);e.stroke(r)}var s={text:n,"line:single":i,"line:double":o,"line:triple":a};function l(t){return function(e){s[e.type](t,e)}}var u={"line:single":0,"line:double":0,"line:triple":0,text:1};function c(e,t){return u[e.type]-u[t.type]}function p(e,t){t.sort(c).forEach(l(e))}var f={bgColor:"rgb(255, 255, 255)",fgColor:"rgb(0, 0, 0)",fontSizePx:12,lineWidth:1};f.font=f.fontSizePx+"px sans";e.exports=p},Jxul:function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("5DmW");r("NBAS");r("FZtP");var s=l(r("q1tI"));var n=r("wINb");var o=r("PDH5");var a=i(r("Q8Wn"));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function u(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){y(t,e,r[e])})}return t}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function f(e,t,r){if(t)p(e.prototype,t);if(r)p(e,r);return e}function h(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return v(e)}function d(e){d=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return d(e)}function v(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)m(e,t)}function m(e,t){m=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return m(e,t)}function y(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var b=r("17x9");var _=r("F/us");var O=r("e2gc");var w=r("mR6N"),P=w.StyleSheet,k=w.css;var x=r("+jAD");var E=r("uBl0").updateQueryString;var C=688;function S(e){var t="/computer-programming/program/"+"".concat(e,"/embedded?embed=yes&author=no");if((0,o.isFileProtocol)(a.default.protocol)){return"https://khanacademy.org".concat(t)}return(0,n.absoluteUrlFromPath)(t)}var T=function(e){g(a,e);function a(){var e;var n;c(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++){r[o]=arguments[o]}n=h(this,(e=d(a)).call.apply(e,[this].concat(r)));y(v(n),"handleMessageEvent",function(e){var t={};try{t=JSON.parse(e.originalEvent.data)}catch(e){return}if(_.isUndefined(t.testsPassed)){return}var r=t.testsPassed?"correct":"incorrect";n.change({status:r,message:t.message})});y(v(n),"change",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return x.change.apply(v(n),t)});y(v(n),"simpleValidate",function(e){return a.validate({status:n.props.status,message:n.props.message},e)});return n}f(a,[{key:"componentDidMount",value:function e(){O(window).on("message",this.handleMessageEvent)}},{key:"componentWillUnmount",value:function e(){O(window).off("message",this.handleMessageEvent)}},{key:"render",value:function e(){if(!this.props.programID){return s.createElement("div",null)}var t=false;var r=S(this.props.programID);var n;var o={height:this.props.height,width:"100%"};if(this.props.showEditor){r+="&editor=yes";n="perseus-scratchpad-editor"}else{r+="&editor=no&width=".concat(C);n="perseus-scratchpad";if(this.props.programType!=="webpage"){t=true}}if(this.props.showButtons){r+="&buttons=yes";o.height+=67}else{r+="&buttons=no"}if(this.props.settings){var a={};_.each(this.props.settings,function(e){if(e.name&&e.value){a[e.name]=e.value}});r=E(r,"settings",JSON.stringify(a))}var i=["allow-popups","allow-same-origin","allow-scripts","allow-top-navigation"].join(" ");return s.createElement("div",{className:k(M.widthOverride,t&&M.container)},s.createElement("iframe",{sandbox:i,src:r,style:o,className:n,allowFullScreen:true}))}}],[{key:"validate",value:function e(t,r){if(t.status==="correct"){return{type:"points",earned:1,total:1,message:t.message||null}}else if(t.status==="incorrect"){return{type:"points",earned:0,total:1,message:t.message||null}}else{return{type:"invalid",message:"Keep going, you're not there yet!"}}}}]);return a}(s.Component);y(T,"propTypes",u({},x.propTypes,{programID:b.string,programType:b.oneOf(["pjs","sql","webpage"]),width:b.number,height:b.number,settings:b.array,showEditor:b.bool,showButtons:b.bool,status:b.oneOf(["incomplete","incorrect","correct"]),message:b.string}));y(T,"defaultProps",{showEditor:false,showButtons:false,status:"incomplete",message:null});var M=P.create({widthOverride:{width:820},container:{margin:"auto"}});e.exports={name:"cs-program",displayName:"CS Program",supportedAlignments:["block","full-width"],widget:T,hidden:true}},"K/mI":function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("5DmW");r("NBAS");r("FZtP");var n=o(r("q1tI"));function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function a(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){d(t,e,r[e])})}return t}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function l(e,t,r){if(t)s(e.prototype,t);if(r)s(e,r);return e}function u(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return p(e)}function c(e){c=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return c(e)}function p(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return h(e,t)}function d(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var v=r("emzA");var g=r("17x9");var m=r("i8i4");var _=r("F/us");var y=r("e2gc");var b=r("rTmL");var i18n=r("HEOz");var O=r("j8wP").ClassNames;var w=r("j8wP").Options;var P=r("+jAD");var k=r("7xiW");var x=r("FGkX"),E=x.SignificantFigures,C=x.displaySigFigs;var S="all";var T="some";var M=10;var j=function e(t){return new E(t).sigFigs};var I=function e(t,r){return C(t,r,-M,false)};var N=function(e){f(a,e);function a(){var e;var n;i(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++){r[o]=arguments[o]}n=u(this,(e=c(a)).call.apply(e,[this].concat(r)));d(p(n),"_errorTimeout",null);d(p(n),"_showError",function(){if(n.props.value===""){return}var e=y(m.findDOMNode(n.refs.error));if(!e.is(":visible")){e.css({top:50,opacity:.1}).show().animate({top:0,opacity:1},300)}});d(p(n),"_hideError",function(){var e=y(m.findDOMNode(n.refs.error));if(e.is(":visible")){e.animate({top:50,opacity:.1},300,function(){y(this).hide()})}});d(p(n),"change",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return P.change.apply(p(n),t)});d(p(n),"handleBlur",function(){n.props.onBlur([]);clearTimeout(n._errorTimeout);if(!b.unitParse(n.props.value).parsed){n._showError()}});d(p(n),"handleChange",function(e){n._hideError();n.props.onChange({value:e.target.value})});d(p(n),"simpleValidate",function(e,t){t=t||function(){};return a.validate(n.getUserInput(),e)});d(p(n),"getUserInput",function(){return n.props.value});d(p(n),"getInputPaths",function(){return[[]]});d(p(n),"focusInputPath",function(e){m.findDOMNode(n.refs.input).focus()});d(p(n),"handleFocus",function(){n.props.onFocus([])});d(p(n),"blurInputPath",function(e){m.findDOMNode(n.refs.input).blur()});d(p(n),"setInputValue",function(e,t,r){n.props.onChange({value:t},r)});d(p(n),"getDOMNodeForPath",function(){return m.findDOMNode(n.refs.input)});d(p(n),"getGrammarTypeForPath",function(e){return"unit"});return n}l(a,[{key:"render",value:function e(){var t=this.props.apiOptions.staticRender?n.createFactory(k):function(e){return n.createElement("input",e)};var r=t({onChange:this.handleChange,ref:"input",className:O.INTERACTIVE,value:this.props.value,onFocus:this.handleFocus,onBlur:this.handleBlur});return n.createElement("div",{className:"old-unit-input"},r,n.createElement("div",{ref:"error",className:"error",style:{display:"none"}},i18n._("I don't understand that")))}},{key:"componentDidUpdate",value:function e(){clearTimeout(this._errorTimeout);if(b.unitParse(this.props.value).parsed){this._hideError()}else{this._errorTimeout=setTimeout(this._showError,2e3)}}},{key:"componentWillUnmount",value:function e(){clearTimeout(this._errorTimeout)}}]);return a}(n.Component);d(N,"propTypes",a({},P.propTypes,{value:g.string}));d(N,"defaultProps",{apiOptions:w.defaults,value:""});var A=function e(t){return t.simplify().asMul().partition()[1].flatten().simplify()};_.extend(N,{validate:function e(t,r){var n=b.unitParse(r.value).expr;var o=b.unitParse(t);if(!o.parsed){return{type:"invalid",message:i18n._("I couldn't understand those units.")}}var a=null;var i=r.sigfigs;var s=j(o.coefficient)===i;if(!s){a=i18n._("Check your significant figures.")}var l;try{var u=new b.Var("x");var c=new b.Eq(n.simplify(),"=",new b.Mul(u,o.expr.simplify()));var p=c.solveLinearEquationForVariable(u);l=Number(p.eval()).toPrecision(i)===Number(1).toPrecision(i)}catch(e){l=false}if(!l){a=i18n._("That answer is numerically incorrect.")}var f;var h=A(o.expr.simplify());var d=A(n.simplify());if(r.accepting===S){f=b.compare(h,d).equal}else{f=_(r.acceptingUnits).any(function(e){var t=A(b.unitParse(e).unit.simplify());return b.compare(t,h).equal})}if(!f){a=i18n._("Check your units.")}var v=f&&l&&s;return{type:"points",earned:v?1:0,total:1,message:a}}});e.exports={name:"unit-input",displayName:"Unit",defaultAlignment:"inline-block",widget:N,transform:function e(t){return v(t).del(["value"]).freeze()},version:{major:0,minor:1},countSigfigs:j,sigfigPrint:I,hidden:true}},KSWw:function(e,t,r){"use strict";r("ma9I");r("fbCW");r("yXV3");r("+2oP");r("EnZy");r("FZtP");var d=30;function v(e,t,r){var n=e[0];var o=e[1];return[n+Math.cos(t*2*Math.PI/360)*r,o+-1*Math.sin(t*2*Math.PI/360)*r]}function s(t,r,e,n){var o=t.symbol;if(o==="C"&&Object.keys(r).length!==1){o=null}if(t.idx==="1,0"){var a=[0,0];t.pos=a;t.baseAngle=-30+n;return{type:"text",value:o,pos:a,idx:t.idx}}var i=r[t.connections.find(function(e){return r[e].pos})];var s=i.connections.indexOf(t.idx);var l=60;var u=120;if(i.connections.length===4){u=90;l=90}else if(e.find(function(e){return e.bondType==="triple"&&e.to===t.idx})||e.find(function(e){return e.bondType==="triple"&&e.to===i.idx})){u=0;l=0}var c=0;var p=i.idx.split(":");var f=p[p.length-1].split(",")[0];if(parseInt(f)%2!==0){c=i.baseAngle-(l-u*s)}else{c=i.baseAngle+(l-u*s)}var h=v(i.pos,c,d);t.pos=h;t.baseAngle=c;return{type:"text",value:o,pos:h,idx:t.idx}}function a(e,t){var r=.25;var n=[e.pos[0],e.pos[1]];var o=[t.pos[0],t.pos[1]];if(e.symbol!=="C"){n=[t.pos[0]-(1-r)*(t.pos[0]-e.pos[0]),t.pos[1]-(1-r)*(t.pos[1]-e.pos[1])]}if(t.symbol!=="C"){o=[e.pos[0]-(1-r)*(e.pos[0]-t.pos[0]),e.pos[1]-(1-r)*(e.pos[1]-t.pos[1])]}return[n,o]}function n(e,t){var r=t[e.from];var n=t[e.to];var o=a(r,n);return{type:"line:"+e.bondType,startPos:o[0],endPos:o[1]}}function i(e){return e.join(":")}function l(r,n,e){if(e===null){return[r,n]}if(e.type==="atom"){var o=i(e.idx);r[o]={idx:o,symbol:e.symbol,connections:[]};if(e.bonds){e.bonds.forEach(function(e){var t=i(e.to.idx);r[o].connections.push(t);n.push({from:o,to:t,bondType:e.bondType});l(r,n,e.to);r[t].connections.push(o)})}}return[r,n]}function u(e,t,r,n,o){if(t.length===0){return e}var a=t.shift();var i=r[a];i.connections.forEach(function(e){if(!r[e].pos){t.push(e)}});return u(e.concat(s(i,r,n,o)),t,r,n,o)}function c(e,t,r){if(r.length===0){return e}return c(e.concat(n(r[0],t)),t,r.slice(1))}function o(e,t){var r=l({},[],e);var n=r[0];var o=r[1];var a=u([],["1,0"],n,o,t);return c(a,n,o)}e.exports={layout:o,_atomLayout:s,_bondLayout:n,_bondLength:d,_convertTree:l}},La43:function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("pjDv");r("5DmW");r("inlA");r("FZtP");function n(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){o(t,e,r[e])})}return t}function o(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var a=r("OgJR"),l=a.rangesOverlap,u=a.intersectRanges;function i(e,t){return{left:e.left-t.left,top:e.top-t.top}}function s(e,t){return n({},i(e,t),{width:e.width,height:e.height})}function c(e){var t=[];p(e.commonAncestorContainer,e,t);return t}function p(e,t,r){var n=new Range;n.selectNodeContents(e);if(e.nodeType===Node.TEXT_NODE){var o=u(t,n);if(o){f(e,o,r)}}else if(e.nodeType===Node.ELEMENT_NODE){if(!l(t,n)){return}for(var a=0,i=Array.from(e.childNodes);a<i.length;a++){var s=i[a];p(s,t,r)}}}function f(e,t,r){var n=e.parentElement;var o=window.getComputedStyle(n);var a=null;if(typeof o.lineHeight==="string"&&o.lineHeight.endsWith("px")){var i=parseFloat(o.lineHeight);if(!isNaN(i)){a=i}}var s=Array.from(t.getClientRects());for(var l=0,u=s;l<u.length;l++){var c=u[l];var p={left:c.left,top:c.top,height:c.height,width:c.width};if(a!==null){var f=a-p.height;p.top-=f;p.height=a}r.push(p)}}e.exports={getClientRectsForTextInRange:c,getRelativePosition:i,getRelativeRect:s}},"M++g":function(e,t,r){"use strict";r("pNMO");r("ma9I");r("yXV3");r("zKZe");r("5DmW");r("NBAS");r("07d7");r("JfAA");var s=n(r("q1tI"));function n(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function l(){l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};return l.apply(this,arguments)}function u(e,t){if(e==null)return{};var r=i(e,t);var n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++){n=a[o];if(t.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;r[n]=e[n]}}return r}function i(e,t){if(e==null)return{};var r={};var n=Object.keys(e);var o,a;for(a=0;a<n.length;a++){o=n[a];if(t.indexOf(o)>=0)continue;r[o]=e[o]}return r}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function p(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);return e}function f(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return d(e)}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function d(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)a(e,t)}function a(e,t){a=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return a(e,t)}function g(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var m=r("TSYQ");var y=r("17x9");var b=r("i8i4");var _=r("F/us");var O=r("e2gc");var w=r("uBl0").firstNumericalParse;var P=r("uBl0").captureScratchpadTouchStart;var k=r("eAf/").number;var x=r("XwLL");var E=x.toNumericString;var C=x.getNumericFormat;var S=function(e){v(a,e);function a(){var e;var o;c(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}o=f(this,(e=h(a)).call.apply(e,[this].concat(r)));g(d(o),"state",{format:o.props.format});g(d(o),"getValue",function(){return o.parseInputValue(b.findDOMNode(o.refs.input).value)});g(d(o),"getStringValue",function(){return b.findDOMNode(o.refs.input).value.toString()});g(d(o),"parseInputValue",function(e){if(e===""){var t=o.props.placeholder;return _.isFinite(t)?+t:null}else{var r=w(e);return _.isFinite(r)?r:o.props.value}});g(d(o),"focus",function(){b.findDOMNode(o.refs.input).focus();o._handleFocus()});g(d(o),"blur",function(){b.findDOMNode(o.refs.input).blur();o._handleBlur()});g(d(o),"setSelectionRange",function(e,t){b.findDOMNode(d(o)).setSelectionRange(e,t)});g(d(o),"getSelectionStart",function(){return b.findDOMNode(d(o)).selectionStart});g(d(o),"getSelectionEnd",function(){return b.findDOMNode(d(o)).selectionEnd});g(d(o),"_checkValidity",function(e){if(e==null){return true}var t=w(e);var r=o.props.checkValidity;return _.isFinite(t)&&r(t)});g(d(o),"_handleChange",function(e){var t=e.target.value;var r=o.parseInputValue(t);var n=C(t);o.props.onChange(r);if(n){o.props.onFormatChange(r,n);o.setState({format:n})}});g(d(o),"_handleFocus",function(){if(o.props.onFocus){o.props.onFocus()}});g(d(o),"_handleBlur",function(e){if(e&&e.type==="keypress"&&e.keyCode!==13){return}o._setValue(o.props.value,o.state.format);if(o.props.onBlur){o.props.onBlur()}});g(d(o),"_onKeyDown",function(e){if(o.props.onKeyDown){o.props.onKeyDown(e)}if(!o.props.useArrowKeys||!_.contains(["ArrowUp","ArrowDown"],e.key)){return}var t=o.getValue();if(t!==Math.floor(t)){return}if(e.key==="ArrowUp"){t=t+1}else if(e.key==="ArrowDown"){t=t-1}if(o._checkValidity(t)){o.props.onChange(t)}});g(d(o),"_setValue",function(e,t){O(b.findDOMNode(o.refs.input)).val(E(e,t))});return o}p(a,[{key:"render",value:function e(){var t=m({"number-input":true,"invalid-input":!this._checkValidity(this.props.value),mini:this.props.size==="mini",small:this.props.size==="small",normal:this.props.size==="normal"});if(this.props.className!=null){t=t+" "+this.props.className}var r=this.props,n=r.onFormatChange,o=r.checkValidity,a=r.useArrowKeys,i=u(r,["onFormatChange","checkValidity","useArrowKeys"]);return s.createElement("input",l({},i,{className:t,type:"text",ref:"input",onChange:this._handleChange,onFocus:this._handleFocus,onBlur:this._handleBlur,onKeyPress:this._handleBlur,onKeyDown:this._onKeyDown,onTouchStart:P,defaultValue:E(this.props.value,this.state.format),value:undefined}))}},{key:"componentDidUpdate",value:function e(t){if(!k.equal(this.getValue(),this.props.value)){this._setValue(this.props.value,this.state.format)}}}]);return a}(s.Component);g(S,"propTypes",{value:y.number,format:y.string,placeholder:y.oneOfType([y.string,y.number]),onChange:y.func.isRequired,onFormatChange:y.func,checkValidity:y.func,size:y.string,label:y.oneOf(["put your labels outside your inputs!"])});g(S,"defaultProps",{value:null,placeholder:null,format:null,onFormatChange:function e(){return null},checkValidity:function e(){return true},useArrowKeys:false});e.exports=S},OgJR:function(e,t,r){"use strict";r("ma9I");function f(e,t,r,n){var o;if(t==="start"&&n==="start"){o=Range.START_TO_START}else if(t==="start"&&n==="end"){o=Range.END_TO_START}else if(t==="end"&&n==="start"){o=Range.START_TO_END}else{o=Range.END_TO_END}return e.compareBoundaryPoints(o,r)}function o(e,t){var r=e.cloneRange();r.setEnd(t.endContainer,t.endOffset);return r}function a(e,t){var r=f(e,"end",t,"start")<0||f(t,"end",e,"start")<0;return!r}function n(e,t){var r=f(e,"start",t,"start")<=0&&f(e,"end",t,"end")>=0;return r}function i(e,t){if(!a(e,t)){return null}var r=f(e,"start",t,"start")>0?e:t;var n=f(e,"end",t,"end")<0?e:t;return o(r,n)}function s(e,t){if(!a(e,t)){return null}var r=f(e,"start",t,"start")<0?e:t;var n=f(e,"end",t,"end")>0?e:t;return o(r,n)}function l(e,t,r,n,o){var a=-1;var i=n;var s=o;var l=0;while(i<=s){l++;if(l>t.length*2){throw new Error("Assertion error: Binary search isn't terminating? "+"lower=".concat(i,", upper=").concat(s))}var u=Math.floor((i+s)/2);if(r==="first"){var c=f(t[u],"end",e,"start");if(c<=0){i=u+1}else{a=u;s=u-1}}else{var p=f(t[u],"start",e,"end");if(p>=0){s=u-1}else{a=u;i=u+1}}}return a}function u(e,t){var r=l(e,t,"first",0,t.length-1);if(r<0){return null}var n=l(e,t,"last",r,t.length-1);if(n<0){return null}return[r,n]}e.exports={findFirstAndLastWordIndexes:u,rangesOverlap:a,rangeIncludes:n,intersectRanges:i,unionRanges:s,spanRanges:o}},"P++F":function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("5DmW");r("NBAS");r("FZtP");var n=u(r("q1tI"));var o=l(r("Pwnf"));var i=r("JimW");var a=l(r("gE8/"));var s=l(r("6RhW"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function c(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){b(t,e,r[e])})}return t}function p(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function h(e,t,r){if(t)f(e.prototype,t);if(r)f(e,r);return e}function d(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return v(e)}function v(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function g(e){g=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return g(e)}function m(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)y(e,t)}function y(e,t){y=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return y(e,t)}function b(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var O=r("17x9");var _=r("F/us");var w=r("+jAD");var P=r("j8wP");var k=r("Atlv");var x=function(e){m(t,e);function t(){p(this,t);return d(this,g(t).apply(this,arguments))}h(t,[{key:"componentDidMount",value:function e(){this.props.trackInteraction()}},{key:"render",value:function e(){return n.createElement(i.View,{style:C.tooltipBody},n.createElement(k,{apiOptions:this.props.apiOptions,content:this.props.content,widgets:this.props.widgets}))}}]);return t}(n.Component);b(x,"propTypes",{apiOptions:P.Options.propTypes,content:O.string,trackInteraction:O.func.isRequired,widgets:O.objectOf(O.any)});var E=function(e){m(a,e);function a(){var e;var t;p(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++){n[o]=arguments[o]}t=d(this,(e=g(a)).call.apply(e,[this].concat(n)));b(v(t),"getUserInput",function(){return{}});b(v(t),"simpleValidate",function(e){return a.validate(t.getUserInput(),e)});return t}h(a,[{key:"render",value:function e(){var t=n.createElement(x,{apiOptions:this.props.apiOptions,content:this.props.definition,key:this.props.definition,trackInteraction:this.props.trackInteraction,widgets:this.props.widgets});return n.createElement(s.default,{content:t,placement:"top"},n.createElement("span",{className:"perseus-widget-definition"},n.createElement(i.View,{style:C.definitionLink},this.props.togglePrompt)))}}]);return a}(n.Component);b(E,"propTypes",c({},w.propTypes,{apiOptions:P.Options.propTypes,definition:O.string,togglePrompt:O.string,trackInteraction:O.func.isRequired,widgets:O.objectOf(O.any)}));b(E,"defaultProps",{togglePrompt:"define me",definition:"definition goes here"});var C={tooltipBody:{color:o.default.offBlack,display:"block",fontSize:20,fontWeight:500,lineHeight:"30px",margin:a.default.xSmall},definitionLink:{borderBottom:"dashed 1px ".concat(o.default.blue),color:o.default.blue,cursor:"pointer",display:"inline-block",textDecoration:"none"}};_.extend(E,{validate:function e(t,r){return{type:"points",earned:0,total:0,message:null}}});e.exports={name:"definition",displayName:"Definition",accessible:true,defaultAlignment:"inline",widget:E,transform:_.identity}},P76s:function(e,t,r){"use strict";r("ma9I");r("yXV3");r("2B1R");r("NBAS");r("UxlC");var u=a(r("q1tI"));var n=o(r("XDp7"));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function i(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function c(e,t,r){if(t)l(e.prototype,t);if(r)l(e,r);return e}function p(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return f(e)}function f(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)v(e,t)}function v(e,t){v=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return v(e,t)}var g=r("mR6N"),m=g.StyleSheet,y=g.css;var b=r("i8i4");var _=r("F/us");var O=r("e2gc");var w=r("o0j1");var P=r("Atlv");var k=r("+lle");var x=r("zahm"),E=x.linterContextDefault;var i18n=r("HEOz");var C=function(e){d(t,e);function t(){s(this,t);return p(this,h(t).apply(this,arguments))}c(t,[{key:"measureLineHeight",value:function e(){if(typeof this._cachedLineHeight!=="number"){this.forceMeasureLineHeight()}return this._cachedLineHeight}},{key:"forceMeasureLineHeight",value:function e(){this.$body.text(" ");this._cachedLineHeight=this.$end.offset().top-this.$body.offset().top;this.$body.text("")}},{key:"render",value:function e(){var r=this;return u.createElement("div",{className:y(S.measurer)},u.createElement("div",null,u.createElement("div",{ref:function e(t){return r.$body=O(t)},className:"paragraph"}),u.createElement("div",{ref:function e(t){return r.$end=O(t)}})))}}]);return t}(u.Component);var S=m.create({measurer:{position:"absolute",width:"100%",top:0,left:0}});var T=function(e){d(a,e);function a(){var e;var t;s(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++){n[o]=arguments[o]}t=p(this,(e=h(a)).call.apply(e,[this].concat(n)));i(f(t),"state",{nLines:null,startLineNumbersAfter:0,stylesAreApplied:false});i(f(t),"_handleSerializedHighlightsUpdate",function(e){t.props.onChange({highlights:e})});return t}c(a,[{key:"componentDidMount",value:function e(){var t=this;this._updateState();this._onResize=_.throttle(function(){if(t.shouldRenderJipt()){return}t._lineHeightMeasurer.forceMeasureLineHeight();t._updateState()},500);window.addEventListener("resize",this._onResize);window.setTimeout(function(){t.setState({stylesAreApplied:true})},0)}},{key:"shouldComponentUpdate",value:function e(t,r){return!_.isEqual(this.props,t)||!_.isEqual(this.state,r)}},{key:"componentDidUpdate",value:function e(){this._updateState()}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this._onResize)}},{key:"_updateState",value:function e(){if(this.shouldRenderJipt()){return}this.setState({nLines:this._measureLines(),startLineNumbersAfter:this._getInitialLineNumber()})}},{key:"_measureLines",value:function e(){var t=O(b.findDOMNode(this.refs.content));var r=t.height();var n=this._getLineHeight();var o=Math.round(r/n);return o}},{key:"_getInitialLineNumber",value:function e(){var r=this;var n=true;var t=this.props.findWidgets(function(e,t){if(t.type!=="passage"){return false}if(e===r.props.widgetId){n=false}return n});return t.map(function(e){return e.getLineCount()}).reduce(function(e,t){return e+t},0)}},{key:"_getLineHeight",value:function e(){return this._lineHeightMeasurer.measureLineHeight()}},{key:"getLineCount",value:function e(){if(this.state.nLines!=null){return this.state.nLines}else{return this._measureLines()}}},{key:"_getStartRefLineNumber",value:function e(t){var r=k.START_REF_PREFIX+t;var n=this.refs[r];if(!n){return null}var o=O(b.findDOMNode(n));var a=o.next();if(a.length===0){a=o}var i=a.offset().top;return this.state.startLineNumbersAfter+1+this._convertPosToLineNumber(i)}},{key:"_getEndRefLineNumber",value:function e(t){var r=k.END_REF_PREFIX+t;var n=this.refs[r];if(!n){return null}var o=O(b.findDOMNode(n));var a=o.prev();if(a.length===0){a=o}var i=a.height();var s=a.offset().top;var l=this._convertPosToLineNumber(s+i);if(i===0){l+=1}return this.state.startLineNumbersAfter+l}},{key:"_convertPosToLineNumber",value:function e(t){var r=O(b.findDOMNode(this.refs.content));var n=t-r.offset().top;var o=this._getLineHeight();var a=Math.round(n/o);return a}},{key:"_getRefContent",value:function e(t){var r=k.START_REF_PREFIX+t;var n=this.refs[r];if(!n){return null}return n.getRefContent()}},{key:"getReference",value:function e(t){var r=this._getStartRefLineNumber(t);var n=this._getEndRefLineNumber(t);if(r==null||n==null){return null}var o=this._getRefContent(t);return{startLine:r,endLine:n,content:o}}},{key:"getUserInput",value:function e(){return null}},{key:"simpleValidate",value:function e(t){return a.validate(this.getUserInput(),t)}},{key:"_renderInstructions",value:function e(t){var r=t.firstQuestionRef;var n=t.firstSentenceRef;var o="";if(r){o+=i18n._("The symbol %(questionSymbol)s indicates that question "+"%(questionNumber)s references this portion of the "+"passage.",{questionSymbol:"[["+r+"]]",questionNumber:r})}if(n){o+=i18n._(" The symbol %(sentenceSymbol)s indicates that the "+"following sentence is referenced in a question.",{sentenceSymbol:"["+n+"]"})}var a=k.parse(o);return u.createElement("div",{className:"perseus-widget-passage-instructions"},k.output(a))}},{key:"shouldRenderJipt",value:function e(){return n.default.useJIPT&&this.props.passageText.indexOf("crwdns")!==-1}},{key:"_renderContent",value:function e(t){var r=this;var n=this.state.stylesAreApplied;var o=!this.props.reviewModeRubric;return u.createElement(w,{editable:o,enabled:n,onSerializedHighlightsUpdate:this._handleSerializedHighlightsUpdate,serializedHighlights:this.props.highlights},u.createElement("div",{ref:"content"},u.createElement(C,{ref:function e(t){return r._lineHeightMeasurer=t}}),k.output(t)))}},{key:"_hasFootnotes",value:function e(){var t=this.props.footnotes;var r=/^\s*$/.test(t);return!r}},{key:"_renderFootnotes",value:function e(){var t=this.props.footnotes;var r=k.parse(t);return k.output(r)}},{key:"render",value:function e(){var t=this;var r;var n=this.state.nLines;if(this.props.showLineNumbers&&n){r=_.range(1,n+1).map(function(e){if(e===4&&n>4){return u.createElement("span",{key:"line-marker",className:"line-marker"},i18n._("Line"))}else{return u.createElement("span",{key:e},e+t.state.startLineNumbersAfter)}})}var o={firstSentenceRef:null,firstQuestionRef:null};var a=/("{1})([^"]*)("{1})/g;var i=this.props.passageText.replace(a,"“$2”");var s=k.parse(i,o);var l=/\S/.test(this.props.passageTitle);return u.createElement("div",null,u.createElement("div",{className:"perseus-widget-passage-container"},this._renderInstructions(o),u.createElement("div",{className:"perseus-widget-passage"},l&&u.createElement("h3",{className:"passage-title"},u.createElement(P,{content:this.props.passageTitle,linterContext:this.props.linterContext})),r&&u.createElement("div",{className:"line-numbers","aria-hidden":true},r),!l&&u.createElement("h3",{className:"perseus-sr-only"},i18n._("Beginning of reading passage.")),u.createElement("div",{className:"passage-text"},this.shouldRenderJipt()?u.createElement(P,{content:this.props.passageText}):this._renderContent(s)),this._hasFootnotes()&&[u.createElement("h4",{key:"footnote-start",className:"perseus-sr-only"},i18n._("Beginning of reading passage footnotes.")),u.createElement("div",{key:"footnotes",className:"footnotes"},this._renderFootnotes())],u.createElement("div",{className:"perseus-sr-only"},i18n._("End of reading passage.")))))}}],[{key:"validate",value:function e(t,r){return{type:"points",earned:0,total:0,message:null}}}]);return a}(u.Component);i(T,"defaultProps",{passageTitle:"",passageText:"",footnotes:"",showLineNumbers:true,highlights:{},linterContext:E});e.exports={name:"passage",displayName:"Passage (SAT only)",widget:T,transform:function e(t){return _.pick(t,"passageTitle","passageText","footnotes","showLineNumbers")},isLintable:true}},RY23:function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("5DmW");r("NBAS");r("FZtP");var n=o(r("q1tI"));function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function a(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){d(t,e,r[e])})}return t}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function l(e,t,r){if(t)s(e.prototype,t);if(r)s(e,r);return e}function u(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return p(e)}function c(e){c=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return c(e)}function p(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return h(e,t)}function d(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var v=r("17x9");var _=r("F/us");var g=r("+jAD");var m=r("fUCW");var y=r("Atlv");var b=r("zahm"),O=b.linterContextProps,w=b.linterContextDefault;var P=function(e){f(a,e);function a(){var e;var n;i(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++){r[o]=arguments[o]}n=u(this,(e=c(a)).call.apply(e,[this].concat(r)));d(p(n),"getUserInput",function(){return m.getUserInput.call(p(n))});d(p(n),"change",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return g.change.apply(p(n),t)});d(p(n),"simpleValidate",function(e){return a.validate(n.getUserInput(),e)});return n}l(a,[{key:"render",value:function e(){return n.createElement(y,{content:this.props.content,inline:true,apiOptions:this.props.apiOptions,linterContext:this.props.linterContext})}}]);return a}(n.Component);d(P,"propTypes",a({},g.propTypes,{content:v.string,linterContext:O}));d(P,"defaultProps",{content:"",linterContext:w});_.extend(P,{validate:function e(t,r){return{type:"points",earned:0,total:0,message:null}}});e.exports={name:"passage-ref-target",displayName:"PassageRefTarget",defaultAlignment:"inline",widget:P,hidden:true,transform:function e(t){return _.pick(t,"content")},version:{major:0,minor:0},isLintable:true}},SrcR:function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("2B1R");r("5DmW");r("NBAS");r("FZtP");var o=n(r("q1tI"));function n(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function a(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){d(t,e,r[e])})}return t}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function l(e,t,r){if(t)s(e.prototype,t);if(r)s(e,r);return e}function u(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return p(e)}function c(e){c=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return c(e)}function p(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return h(e,t)}function d(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var v=r("17x9");var _=r("F/us");var i18n=r("HEOz");var g=r("+jAD");var m=r("fUCW");var y=8;var b=5;var O={display:"table",tableLayout:"fixed"};var w={display:"table-row"};var P={display:"table-cell",padding:b};var k={borderRadius:10,cursor:"pointer"};var x={padding:b,display:"inline-block"};var E={float:"right",paddingRight:b};var C=50;var S=function e(t,n){return _.map(t,function(e,r){return _.map(e,function(e,t){return n(e,r,t)})})};var T=function e(t,r,n){return _.times(t,function(t){return _.times(r,function(e){return n(t,e)})})};var M={plus:function e(){return[[false,true,false],[true,true,true],[false,true,false]]},x:function e(){return[[true,false,true],[false,true,false],[true,false,true]]},"plus/x":function e(t){return t%2?M.x():M.plus()}};var j=function e(t,r,n){t=Math.floor(t);t=Math.max(t,r);t=Math.min(t,n);return t};var I=function(e){f(a,e);function a(){var e;var t;i(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++){n[o]=arguments[o]}t=u(this,(e=c(a)).call.apply(e,[this].concat(n)));d(p(t),"_flip",function(){t.props.onChange(!t.props.value)});return t}l(a,[{key:"render",value:function e(){var t=this.props.value?"#55dd55":"#115511";var r=_.extend({},k,{width:this.props.size,height:this.props.size,backgroundColor:t});return o.createElement("div",{style:r,onClick:this._flip})}}]);return a}(o.Component);d(I,"propTypes",{value:v.bool.isRequired,size:v.number.isRequired});var N=function(e){f(t,e);function t(){i(this,t);return u(this,c(t).apply(this,arguments))}l(t,[{key:"render",value:function e(){var n=this;return o.createElement("div",{style:O,className:"no-select"},_.map(this.props.cells,function(e,r){return o.createElement("div",{key:r,style:w},_.map(e,function(e,t){return o.createElement("div",{key:t,style:P},o.createElement(I,{value:e,size:n.props.size,onChange:_.partial(n.props.onChange,r,t)}))}))}))}}]);return t}(o.Component);d(N,"propTypes",{cells:v.arrayOf(v.arrayOf(v.bool)).isRequired,size:v.number.isRequired});var A=function e(t,n){return _.map(t,function(e,r){return _.map(e,function(e,t){return n(r,t)?!e:e})})};var D=function e(t,o,a,i){return A(t,function(e,t){var r=e-o;var n=t-a;if(Math.abs(r)<=1&&Math.abs(n)<=1){return i[r+1][n+1]}else{return false}})};var R=function(e){f(a,e);function a(){var e;var n;i(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++){r[o]=arguments[o]}n=u(this,(e=c(a)).call.apply(e,[this].concat(r)));d(p(n),"getUserInput",function(){return m.getUserInput.call(p(n))});d(p(n),"change",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return g.change.apply(p(n),t)});d(p(n),"_width",function(){if(n.props.cells.length!==0){return n.props.cells[0].length}else{return 0}});d(p(n),"_initNextPatterns",function(){n._currPattern=M[n.props.flipPattern](0);n._nextPattern=M[n.props.flipPattern](1);n._patternIndex=2});d(p(n),"_shiftPatterns",function(){n._currPattern=n._nextPattern;n._nextPattern=M[n.props.flipPattern](n._patternIndex);n._patternIndex++});d(p(n),"_flipTile",function(e,t){var r=D(n.props.cells,e,t,n._currPattern);n._shiftPatterns();n.change({cells:r,moveCount:n.props.moveCount+1})});d(p(n),"_reset",function(){n.change({cells:n.props.startCells,moveCount:0})});d(p(n),"simpleValidate",function(e){return F(e,n.getUserInput())});return n}l(a,[{key:"render",value:function e(){var t=this._width();var r=C;var n=t*(r+2*b);return o.createElement("div",null,o.createElement(N,{cells:this.props.cells,size:r,onChange:this._flipTile}),o.createElement("div",{style:{width:n}},o.createElement("div",{style:x},i18n.ngettext("Moves: %(num)s","Moves: %(num)s",this.props.moveCount)),o.createElement("div",{style:E},o.createElement("input",{type:"button",value:"Reset",onClick:this._reset,className:"simple-button"}))),o.createElement("div",{className:"clearfix"}))}},{key:"componentDidMount",value:function e(){this._initNextPatterns()}},{key:"componentDidUpdate",value:function e(t){if(t.flipPattern!==this.props.flipPattern){this._initNextPatterns()}}}]);return a}(o.Component);d(R,"propTypes",a({},g.propTypes,{cells:v.arrayOf(v.arrayOf(v.bool)),startCells:v.arrayOf(v.arrayOf(v.bool)),flipPattern:v.string.isRequired,moveCount:v.number.isRequired}));d(R,"defaultProps",{cells:[[false,false,false],[false,false,false],[false,false,false]],startCells:[[false,false,false],[false,false,false],[false,false,false]],flipPattern:"plus",moveCount:0});var F=function e(n,t){var r=_.all(t.cells,function(e,r){return _.all(e,function(e,t){return e===n.startCells[r][t]})});if(r){return{type:"invalid",message:i18n._("Click on the tiles to change the lights.")}}var o=_.all(t.cells,function(e){return _.all(e,function(e){return e})});if(o){return{type:"points",earned:1,total:1,message:null}}else if(n.gradeIncompleteAsWrong){return{type:"points",earned:0,total:1,message:null}}else{return{type:"invalid",message:i18n._("You must turn on all of the lights to continue.")}}};var L=function e(t){return{cells:t.startCells,startCells:t.startCells,flipPattern:t.flipPattern}};e.exports={name:"lights-puzzle",displayName:"Lights Puzzle",hidden:true,widget:R,transform:L}},UDUP:function(e,t,r){"use strict";r("ma9I");r("fbCW");r("2B1R");r("5DmW");r("NBAS");var o=n(r("q1tI"));function n(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)a(e.prototype,t);if(r)a(e,r);return e}function l(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return c(e)}function u(e){u=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return u(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)f(e,t)}function f(e,t){f=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return f(e,t)}function h(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var i18n=r("HEOz");var d=r("iUos");var v=r("fQFx");var g=function(e){p(a,e);function a(){var e;var n;i(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++){r[o]=arguments[o]}n=l(this,(e=u(a)).call.apply(e,[this].concat(r)));h(c(n),"state",{hoveredHighlightKey:null,hoveringTooltipFor:null});h(c(n),"_highlightRenderers",{});h(c(n),"_handleMouseMove",function(e){var t={left:e.clientX,top:e.clientY};var r=n._getHoveredHighlightKey(t);n.setState({hoveredHighlightKey:r})});return n}s(a,[{key:"componentDidMount",value:function e(){this._updateEditListeners(false,this.props.editable)}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){this._updateEditListeners(this.props.editable,t.editable);if(this.state.hoveredHighlightKey!=null&&!(this.state.hoveredHighlightKey in t.highlights)){this.setState({hoveredHighlightKey:null})}if(this.state.hoveringTooltipFor!=null&&!(this.state.hoveringTooltipFor in t.highlights)){this.setState({hoveringTooltipFor:null})}}},{key:"componentWillUnmount",value:function e(){this._updateEditListeners(this.props.editable,false)}},{key:"_updateEditListeners",value:function e(t,r){if(!t&&r){window.addEventListener("mousemove",this._handleMouseMove)}else if(t&&!r){window.removeEventListener("mousemove",this._handleMouseMove);this.setState({hoveredHighlightKey:null,hoveringTooltipFor:null})}}},{key:"_getHoveredHighlightKey",value:function e(r){var n=this;var t=this.state.hoveringTooltipFor;if(typeof t==="string"){return t}var o=Object.keys(this.props.highlights);return o.find(function(e){var t=n._highlightRenderers[e];return t&&t.isHovered(r)})}},{key:"_renderTooltip",value:function e(){var t=this;var r=this.state.hoveredHighlightKey;if(r==null){return null}var n=this.props.highlights[r];return o.createElement(v,{label:i18n._("Remove highlight"),focusNode:n.domRange.endContainer,focusOffset:n.domRange.endOffset,offsetParent:this.props.offsetParent,onClick:function e(){return t.props.onRemoveHighlight(r)},onMouseEnter:function e(){return t.setState({hoveringTooltipFor:r})},onMouseLeave:function e(){return t.setState({hoveringTooltipFor:null})}})}},{key:"render",value:function e(){var n=this;return o.createElement("div",null,Object.keys(this.props.highlights).map(function(r){return o.createElement(d,{ref:function e(t){if(t){n._highlightRenderers[r]=t}else{delete n._highlightRenderers[r]}},key:r,highlight:n.props.highlights[r],highlightKey:r,offsetParent:n.props.offsetParent,zIndexes:n.props.zIndexes})}),this.props.editable&&this._renderTooltip())}}]);return a}(o.PureComponent);e.exports=g},VMUI:function(e,t,r){"use strict";r("pNMO");r("4Brf");r("ma9I");r("yq1k");r("4mDm");r("07d7");r("JTJg");r("3bBZ");function h(e,t){return a(e)||o(e,t)||n()}function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(e,t){var r=[];var n=true;var o=false;var a=undefined;try{for(var i=e[Symbol.iterator](),s;!(n=(s=i.next()).done);n=true){r.push(s.value);if(t&&r.length===t)break}}catch(e){o=true;a=e}finally{try{if(!n&&i["return"]!=null)i["return"]()}finally{if(o)throw a}}return r}function a(e){if(Array.isArray(e))return e}var i=r("OgJR"),d=i.findFirstAndLastWordIndexes,v=i.unionRanges,g=i.spanRanges,m=i.rangeIncludes;function s(e,t){var r={};var n=t.domRange;var o=t.firstWordIndex;var a=t.lastWordIndex;for(var i=0,s=Object.keys(e);i<s.length;i++){var l=s[i];var u=e[l];var c=v(u.domRange,n);if(c){n=c;o=Math.min(u.firstWordIndex,o);a=Math.max(u.lastWordIndex,a)}else{r[l]=u}}var p={firstWordIndex:o,lastWordIndex:a,domRange:n};var f=Object.keys(r);var h=y(f);r[h]=p;return r}function l(e,t,r){for(var n=0,o=Object.keys(e);n<o.length;n++){var a=o[n];var i=e[a].domRange;if(m(i,r)){return null}}var s=d(r,t);if(!s){return null}var l=h(s,2),u=l[0],c=l[1];var p=t[u];var f=t[c];return{firstWordIndex:u,lastWordIndex:c,domRange:g(p,f)}}function y(e){var t="".concat((new Date).getTime());if(!e.includes(t)){return t}var r=0;var n;do{n="".concat(t,"-").concat(r);r++}while(e.includes(n));return n}function u(e,t){var r=e.range,n=r.firstWordIndex,o=r.lastWordIndex;var a=t[n];if(!a){throw new Error("first word index ".concat(a," is out of bounds: ")+"must be 0–".concat(t.length-1," inclusive"))}var i=t[o];if(!i){throw new Error("last word index ".concat(i," is out of bounds: ")+"must be 0–".concat(t.length-1," inclusive"))}return{firstWordIndex:n,lastWordIndex:o,domRange:g(a,i)}}function c(e){var t=e.firstWordIndex,r=e.lastWordIndex;return{range:{type:"word-indexes",firstWordIndex:t,lastWordIndex:r}}}e.exports={addHighlight:s,buildHighlight:l,deserializeHighlight:u,serializeHighlight:c}},VO3A:function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("2B1R");r("zKZe");r("5DmW");r("NBAS");r("FZtP");var i=o(r("q1tI"));var s=n(r("XDp7"));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function a(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){m(t,e,r[e])})}return t}function l(){l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};return l.apply(this,arguments)}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function p(e,t,r){if(t)c(e.prototype,t);if(r)c(e,r);return e}function f(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return h(e)}function h(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function d(e){d=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return d(e)}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)g(e,t)}function g(e,t){g=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return g(e,t)}function m(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var y=r("17x9");var _=r("F/us");var b=r("mR6N"),O=b.StyleSheet,w=b.css;var P=r("j8wP").Options;var k=r("+jAD");var x=r("fYWP").widget;var E=r("UcaO"),C=E.grayLight,S=E.gray76,T=E.tableBackgroundAccent,M=E.kaGreen,j=E.phoneMargin,I=E.negativePhoneMargin;var N=r("zahm"),A=N.linterContextProps,D=N.linterContextDefault;var i18n=r("HEOz");var R=function(e){v(t,e);function t(){u(this,t);return f(this,d(t).apply(this,arguments))}p(t,[{key:"render",value:function e(){var r=this;var n=[];var t=function e(t){n.push(i.createElement("div",{key:t,className:w(B.indicator,t===r.props.currentGroup&&B.selectedIndicator),onClick:function e(){return r.props.onChangeCurrentGroup(t)}}))};for(var o=0;o<this.props.numGroups;o++){t(o)}return i.createElement("div",{className:w(B.indicatorContainer)},n)}}]);return t}(i.Component);m(R,"propTypes",{currentGroup:y.number.isRequired,numGroups:y.number.isRequired,onChangeCurrentGroup:y.func.isRequired});var F=function(e){v(a,e);function a(){var e;var n;u(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++){r[o]=arguments[o]}n=f(this,(e=d(a)).call.apply(e,[this].concat(r)));m(h(n),"state",{currentGroup:0});m(h(n),"change",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return k.change.apply(h(n),t)});m(h(n),"getInputPaths",function(){return n._childGroup.getInputPaths()});m(h(n),"setInputValue",function(e,t,r){return n._childGroup.setInputValue(e,t,r)});m(h(n),"getAcceptableFormatsForInputPath",function(e){return n._childGroup.getAcceptableFormatsForInputPath(e)});m(h(n),"focus",function(){return n._childGroup.focus()});m(h(n),"focusInputPath",function(e){n._childGroup.focusInputPath(e)});m(h(n),"blurInputPath",function(e){n._childGroup.blurInputPath(e)});m(h(n),"handleNextQuestion",function(){var e=n.state.currentGroup;var t=n.props.gradedGroups.length;if(e<t-1){n.setState({currentGroup:e+1})}});return n}p(a,[{key:"shouldComponentUpdate",value:function e(t,r){return t!==this.props||r!==this.state}},{key:"render",value:function e(){var r=this;if(s.default.useJIPT&&this.props.gradedGroups.length>1){return i.createElement("div",{className:w(B.container)},this.props.gradedGroups.map(function(e,t){return i.createElement(x,l({key:t},r.props,e,{inGradedGroupSet:false,linterContext:r.props.linterContext}))}))}var t=this.props.gradedGroups[this.state.currentGroup];if(!t){return i.createElement("span",null,i18n.doNotTranslate("No current group..."))}var n=this.props.gradedGroups.length;var o=this.state.currentGroup<n-1?this.handleNextQuestion:null;return i.createElement("div",{className:w(B.container)},i.createElement("div",{className:w(B.top)},i.createElement("div",{className:w(B.title)},t.title),i.createElement("div",{className:w(B.spacer)}),i.createElement(R,{numGroups:n,currentGroup:this.state.currentGroup,onChangeCurrentGroup:function e(t){return r.setState({currentGroup:t})}})),i.createElement(x,l({key:this.state.currentGroup,ref:function e(t){return r._childGroup=t}},this.props,t,{inGradedGroupSet:true,title:null,onNextQuestion:o,linterContext:this.props.linterContext})))}}]);return a}(i.Component);m(F,"propTypes",a({},k.propTypes,{apiOptions:P.propTypes,gradedGroups:y.array,trackInteraction:y.func.isRequired,linterContext:A}));m(F,"defaultProps",{gradedGroups:[],linterContext:D});var L=function e(t,r){return{groups:t.gradedGroups.map(r)}};e.exports={name:"graded-group-set",displayName:"Graded group set (articles only)",widget:F,traverseChildWidgets:L,hidden:false,tracking:"all",isLintable:true};var B=O.create({top:{display:"flex",flexDirection:"row"},spacer:{flex:1},title:{fontSize:12,color:S,textTransform:"uppercase",marginBottom:11,letterSpacing:.8},indicatorContainer:{display:"flex",flexDirection:"row"},indicator:{width:10,height:10,borderRadius:5,backgroundColor:C,marginLeft:5,cursor:"pointer"},selectedIndicator:{backgroundColor:M},container:{borderTop:"1px solid ".concat(S),borderBottom:"1px solid ".concat(S),backgroundColor:T,marginLeft:I,marginRight:I,paddingBottom:j,paddingLeft:j,paddingRight:j,paddingTop:10,width:"auto"}})},VWbw:function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("2B1R");r("+2oP");r("ToJy");r("toAj");r("5DmW");r("Rm1S");r("UxlC");r("FZtP");var p=y(r("q1tI"));var n=m(r("17x9"));var o=m(r("fhzG"));var T=m(r("F/us"));var a=m(r("e2gc"));var i=m(r("eAf/"));var s=m(r("9/5/"));var f=m(r("jH0K"));var h=m(r("qoj5"));var c=m(r("bHYm"));var d=m(r("M++g"));var v=m(r("uBl0"));var g=m(r("yfnS"));var M=m(r("NT9k"));var l=m(r("NUXr"));var u=m(r("T2HF"));function m(e){return e&&e.__esModule?e:{default:e}}function y(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function b(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){O(t,e,r[e])})}return t}function O(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var i18n=r("HEOz");var j=i.default.number,w=i.default.point;var P=l.default.containerSizeClassPropType,k=l.default.getInteractiveBoxFromSizeClass;var x=v.default.DeprecationMixin;var E="https://ka-perseus-graphie.s3.amazonaws.com/b1452c0d79fd0f7ff4c3af9488474a0a0decb361.png";var C={url:null};var I=v.default.eq;var N=v.default.deepEq;var S="unlimited";function A(e,t,r){return(t[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(t[1]-e[1])}function D(e,t,r){return I(A(e,t,r),0)}function R(e){if(I(e,0)){return 0}else{return e>0?1:-1}}function F(e,t){return e==null?t:e}function L(e,t,r){return r[0]<=Math.max(e[0],t[0])&&r[0]>=Math.min(e[0],t[0])&&r[1]<=Math.max(e[1],t[1])&&r[1]>=Math.min(e[1],t[1])}function B(e,t){var r=[[e[0],e[1],t[0]],[e[0],e[1],t[1]],[t[0],t[1],e[0]],[t[0],t[1],e[1]]];var n=T.default.map(r,function(e){return R(A.apply(void 0,e))});if(n[0]!==n[1]&&n[2]!==n[3]){return true}for(var o=0;o<4;o++){if(n[o]===0&&L.apply(void 0,r[o])){return true}}return false}function U(e,t){return T.default.map(T.default.zip(e,t),function(e){return e[0]-e[1]})}function q(e){return Math.sqrt(T.default.reduce(e,function(e,t){return e+Math.pow(t,2)},0))}function H(e,t){return T.default.reduce(T.default.zip(e,t),function(e,t){return e+t[0]*t[1]},0)}function z(e){var t=T.default.zip(e,K(e));return T.default.map(t,function(e){return q(U.apply(void 0,e))})}function W(e){var t=T.default.zip(K(e,-1),e,K(e,1));var r=T.default.map(t,function(e){var t=U(e[1],e[0]);var r=U(e[2],e[1]);var n=Math.acos(H(t,r)/(q(t)*q(r)));return R(A.apply(void 0,e))>0?n:-n});var n=T.default.reduce(r,function(e,t){return e+t},0);return T.default.map(r,function(e){return n>0?Math.PI-e:Math.PI+e})}function G(e,t,o){if(e.length!==t.length){return false}var r=e.length;var n=W(e);var a=W(t);var i=z(e);var s=z(t);for(var l=0;l<2*r;l++){var u=a.slice();var c=s.slice();if(l>=r){u.reverse();c.reverse();c=K(c,1)}u=K(u,l);c=K(c,l);if(N(n,u)){var p=function(){var e=T.default.zip(i,c);var t=T.default.map(e,function(e){return e[0]/e[1]});var r=T.default.all(t,function(e){return I(t[0],e)});var n=T.default.all(e,function(e){return j.equal(e[0],e[1],o)});if(r&&n){return{v:true}}}();if(typeof p==="object")return p.v}}return false}function V(e,t){return e<t||I(e,t)}function Y(e,t,r){return Math.acos((e*e+t*t-r*r)/(2*e*t))*180/Math.PI}function X(e){var t=e[0];var r=e[1];var n=e[2];var o=e[3];if(t<0){t*=-1;r*=-1;n*=-1}var a=2*Math.PI;if(r<0){r*=-1;n*=-1;n+=a/2}while(n>0){n-=a}while(n<0){n+=a}return[t,r,n,o]}function K(e,t){t=typeof t==="undefined"?1:t%e.length;return e.slice(t).concat(e.slice(0,t))}function Q(e){return e.replace(/(?:^|-)(.)/g,function(e,t){return t.toUpperCase()})}function Z(e,t){if(I(e[0],t[0])){return"x = "+e[0].toFixed(3)}else{var r=(t[1]-e[1])/(t[0]-e[0]);var n=e[1]-r*e[0];return"y = "+r.toFixed(3)+"x + "+n.toFixed(3)}}function J(e,t){var r=e[0][0];var n=e[0][1];var o=e[1][0];var a=e[1][1];var i=t[0][0];var s=t[0][1];var l=t[1][0];var u=t[1][1];var c=(r-o)*(s-u)-(n-a)*(i-l);if(Math.abs(c)<1e-9){return"Lines are parallel"}else{var p=((r*a-n*o)*(i-l)-(r-o)*(i*u-s*l))/c;var f=((r*a-n*o)*(s-u)-(n-a)*(i*u-s*l))/c;return"Intersection: ("+p.toFixed(3)+", "+f.toFixed(3)+")"}}function $(e,t){return Math.floor((e[1]-e[0])/t)}var ee={showGraph:function e(t){return{markings:t.showGraph?"graph":"none"}}};var te=(0,o.default)({displayName:"InteractiveGraph",propTypes:{containerSizeClass:P.isRequired,trackInteraction:n.default.func.isRequired},getDefaultProps:function e(){return{labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],backgroundImage:C,markings:"graph",showTooltips:false,showProtractor:false,showRuler:false,rulerLabel:"",rulerTicks:10,graph:{type:"linear"}}},getInitialState:function e(){return{shouldShowInstructions:this._getShouldShowInstructions()}},UNSAFE_componentWillMount:function e(){x.UNSAFE_componentWillMount.call(this)},componentDidMount:function e(){this.setGraphie(this.refs.graph.graphie())},UNSAFE_componentWillReceiveProps:function e(t){if(this.isClickToAddPoints()!==this.isClickToAddPoints(t)){this.shouldResetGraphie=true;this.setState({shouldShowInstructions:this._getShouldShowInstructions(t)})}if(this.props.backgroundImage.url!==t.backgroundImage.url||this.props.backgroundImage!==t.backgroundImage||this.props.containerSizeClass!==t.containerSizeClass){this.shouldResetGraphie=true}},componentDidUpdate:function e(t,r){var n=t.graph.type;var o=this.props.graph.type;if(n!==o||t.graph.allowReflexAngles!==this.props.graph.allowReflexAngles||t.graph.angleOffsetDeg!==this.props.graph.angleOffsetDeg||t.graph.numPoints!==this.props.graph.numPoints||t.graph.numSides!==this.props.graph.numSides||t.graph.numSegments!==this.props.graph.numSegments||t.graph.showAngles!==this.props.graph.showAngles||t.graph.showSides!==this.props.graph.showSides||t.graph.snapTo!==this.props.graph.snapTo||t.graph.snapDegrees!==this.props.graph.snapDegrees){this["remove"+Q(n)+"Controls"]();this["add"+Q(o)+"Controls"]()}if(this.shouldResetGraphie){this.resetGraphie()}},_getShouldShowInstructions:function e(t){t=t||this.props;return this.isClickToAddPoints(t)&&(t.graph.coords==null||t.graph.coords.length===0)},deprecatedProps:ee,setGraphie:function e(t){this.graphie=t;this.setupGraphie()},handleAddPointsMouseDown:function e(t){if(!this.isClickToAddPoints()){throw new Error("handleAddPointsClick should not be registered"+"when isClickToAddPoints() is false")}if(!this.isCoordInTrash(t)){var r;if(this.props.graph.type==="point"){r=this.createPointForPointsType(t,this.points.length);if(!r.constrain()){r.remove();return}this.points.push(r);var n=this.points.length-1;this.points[n].grab(t);this.updateCoordsFromPoints()}else if(this.props.graph.type==="polygon"){if(this.polygon.closed()){return}r=this.createPointForPolygonType(t,this.points.length);this.points.push(r);var o=this.points.length-1;this.points[o].grab(t);this.updatePolygon()}this.setState({shouldShowInstructions:false})}},resetGraphie:function e(){this.shouldResetGraphie=false;this.parabola=null;this.sinusoid=null;this.refs.graph.reset()},setupGraphie:function e(){this.setTrashCanVisibility(0);if(this.isClickToAddPoints()){this.setTrashCanVisibility(.5)}if(this.props.apiOptions.isMobile){this.horizHairline=new u.default(this.graphie,[0,0],[0,0],{normalStyle:{strokeWidth:1}});this.horizHairline.attr({stroke:g.default.INTERACTIVE});this.horizHairline.hide();this.vertHairline=new u.default(this.graphie,[0,0],[0,0],{normalStyle:{strokeWidth:1}});this.vertHairline.attr({stroke:g.default.INTERACTIVE});this.vertHairline.hide()}var t=this.props.graph.type;this["add"+Q(t)+"Controls"]()},showHairlines:function e(t){if(this.props.apiOptions.isMobile&&this.props.markings!=="none"){this.horizHairline.moveTo([this.props.range[0][0],t[1]],[this.props.range[0][1],t[1]]);this.horizHairline.show();this.vertHairline.moveTo([t[0],this.props.range[1][0]],[t[0],this.props.range[1][1]]);this.vertHairline.show()}},hideHairlines:function e(){if(this.props.apiOptions.isMobile){this.horizHairline.hide();this.vertHairline.hide()}},setTrashCanVisibility:function e(t){var r=this.graphie;if(j.equal(t,0)){if(this.trashCan){this.trashCan.remove();this.trashCan=null}}else if(!this.props.apiOptions.isMobile){if(!this.trashCan){this.trashCan=r.raphael.image(E,r.xpixels-40,r.ypixels-40,40,40)}this.trashCan.attr({opacity:t})}},isClickToAddPoints:function e(t){t=t||this.props;return t.graph.type==="point"&&t.graph.numPoints===S||t.graph.type==="polygon"&&t.graph.numSides===S},_lineStroke:function e(){return this.props.isMobile?{"stroke-width":3}:{}},addLine:function e(t){var r=this;var n=this;var o=n.graphie;var a=te.getLineCoords(n.props.graph,n.props);var i=n.points=T.default.map(a,function(e){return c.default.addMaybeMobileMovablePoint(r,{coord:e,constraints:[c.default.MovablePoint.constraints.bound(),c.default.MovablePoint.constraints.snap()],onMove:function e(){var t=T.default.extend({},n.props.graph,{coords:T.default.invoke(i,"coord")});n.onChange({graph:t})}})});var s={points:i,static:true,normalStyle:b({stroke:this.props.apiOptions.isMobile?g.default.BLUE_C:g.default.INTERACTIVE},this._lineStroke())};if(t==="line"){s.extendLine=true}else if(t==="ray"){s.extendRay=true}n.line=c.default.addMovableLine(o,s);i[0].listen("constraints","isLine",function(e){return!w.equal(e,i[1].coord())});i[1].listen("constraints","isLine",function(e){return!w.equal(e,i[0].coord())})},removeLine:function e(){T.default.invoke(this.points,"remove");this.line.remove()},addLinearControls:function e(){this.addLine("line")},removeLinearControls:function e(){this.removeLine()},addQuadraticControls:function e(){var r=this;var t=this.props.graph.coords;if(!t){t=te.defaultQuadraticCoords(this.props)}var n=function e(){var t=T.default.extend({},r.props.graph,{coords:[o.coord(),a.coord(),i.coord()]});r.onChange({graph:t});r.updateQuadratic()};var o=this.pointA=c.default.addMaybeMobileMovablePoint(this,{coord:t[0],constraints:[c.default.MovablePoint.constraints.bound(),c.default.MovablePoint.constraints.snap(),function(e){return!o||e[0]!==a.coord()[0]&&e[0]!==i.coord()[0]}],onMove:n});var a=this.pointB=c.default.addMaybeMobileMovablePoint(this,{coord:t[1],constraints:[c.default.MovablePoint.constraints.bound(),c.default.MovablePoint.constraints.snap(),function(e){return!a||e[0]!==o.coord()[0]&&e[0]!==i.coord()[0]}],onMove:n});var i=this.pointC=c.default.addMaybeMobileMovablePoint(this,{coord:t[2],constraints:[c.default.MovablePoint.constraints.bound(),c.default.MovablePoint.constraints.snap(),function(e){return!i||e[0]!==o.coord()[0]&&e[0]!==a.coord()[0]}],onMove:n});this.updateQuadratic()},updateQuadratic:function e(){var t=te.getCurrentQuadraticCoefficients(this.props);if(!t){return}var r=t[0];var n=t[1];var o=t[2];if(this.parabola){var a=this.graphie.svgParabolaPath(r,n,o);this.parabola.attr({path:a})}else{this.parabola=this.graphie.parabola(r,n,o);this.parabola.attr(b({stroke:this.props.apiOptions.isMobile?g.default.BLUE_C:g.default.DYNAMIC},this._lineStroke()));this.parabola.toBack()}},removeQuadraticControls:function e(){this.pointA.remove();this.pointB.remove();this.pointC.remove();if(this.parabola){this.parabola.remove();this.parabola=null}},addSinusoidControls:function e(){var r=this;var t=this.props.graph.coords;if(!t){t=te.defaultSinusoidCoords(this.props)}var n=function e(){var t=T.default.extend({},r.props.graph,{coords:[o.coord(),a.coord()]});r.onChange({graph:t});r.updateSinusoid()};var o=this.pointA=c.default.addMaybeMobileMovablePoint(this,{coord:t[0],constraints:[c.default.MovablePoint.constraints.bound(),c.default.MovablePoint.constraints.snap(),function(e){return!o||e[0]!==a.coord()[0]}],onMove:n});var a=this.pointB=c.default.addMaybeMobileMovablePoint(this,{coord:t[1],constraints:[c.default.MovablePoint.constraints.bound(),c.default.MovablePoint.constraints.snap(),function(e){return!o||e[0]!==o.coord()[0]}],onMove:n});this.updateSinusoid()},updateSinusoid:function e(){var t=te.getCurrentSinusoidCoefficients(this.props);if(!t){return}var r=t[0];var n=t[1];var o=t[2];var a=t[3];if(this.sinusoid){var i=this.graphie.svgSinusoidPath(r,n,o,a);this.sinusoid.attr({path:i})}else{this.sinusoid=this.graphie.sinusoid(r,n,o,a);this.sinusoid.attr(b({stroke:this.props.apiOptions.isMobile?g.default.BLUE_C:g.default.DYNAMIC},this._lineStroke()));this.sinusoid.toBack()}},removeSinusoidControls:function e(){this.pointA.remove();this.pointB.remove();if(this.sinusoid){this.sinusoid.remove();this.sinusoid=null}},addCircleControls:function e(){var t=this;var r=this.graphie;var n=T.default.min(r.snap);var o=this.circle=r.addCircleGraph({center:this.props.graph.center||[0,0],radius:this.props.graph.radius||T.default.min(this.props.step),snapX:r.snap[0],snapY:r.snap[1],minRadius:n,snapRadius:n});(0,a.default)(o).on("move",function(){var e=T.default.extend({},t.props.graph,{center:o.center,radius:o.radius});t.onChange({graph:e})})},removeCircleControls:function e(){this.circle.remove()},addLinearSystemControls:function e(){var o=this;var r=this.graphie;var t=te.getLinearSystemCoords(this.props.graph,this.props);var a=[g.default.INTERACTIVE,g.default.GREEN];var n=this.points=T.default.map(t,function(e,r){var n=T.default.map(e,function(e,t){return c.default.addMaybeMobileMovablePoint(o,{coord:e,constraints:[c.default.MovablePoint.constraints.bound(),c.default.MovablePoint.constraints.snap(),function(e){if(!n){return}return!w.equal(e,n[1-t].coord())}],onMove:function e(){var t=T.default.extend({},o.props.graph,{coords:T.default.map(o.points,function(e){return T.default.invoke(e,"coord")})});o.onChange({graph:t})},normalStyle:{fill:a[r]},highlightStyle:{fill:a[r]}})});return n});this.lines=T.default.map(n,function(e,t){return c.default.addMovableLine(r,{points:e,static:true,extendLine:true,normalStyle:{stroke:a[t]}})})},removeLinearSystemControls:function e(){T.default.invoke(this.lines,"remove");T.default.map(this.points,function(e){return T.default.invoke(e,"remove")})},isCoordInTrash:function e(t){if(this.props.apiOptions.isMobile){return false}var r=this.graphie;var n=r.scalePoint(t);return n[0]>=r.xpixels-40&&n[1]>=r.ypixels-40},createPointForPointsType:function e(t,r){var n=this;var o=function e(){n.points=T.default.filter(n.points,function(e){return e!==a});n.updateCoordsFromPoints();setTimeout(a.remove.bind(a),0)};var a=c.default.addMaybeMobileMovablePoint(this,b({coord:t,constraints:[c.default.MovablePoint.constraints.bound(),c.default.MovablePoint.constraints.snap(),function(t){return T.default.all(n.points,function(e){return a===e||!w.equal(t,e.coord())})}],onMoveStart:function e(){if(n.isClickToAddPoints()){n.setTrashCanVisibility(1)}},onMove:n.updateCoordsFromPoints,onMoveEnd:function e(t){if(n.isClickToAddPoints()){if(n.isCoordInTrash(t)){o()}n.setTrashCanVisibility(.5)}}},this.props.apiOptions.isMobile&&n.isClickToAddPoints()?{onRemove:o}:{}));return a},removePoint:function e(r){var n=null;this.points=T.default.filter(this.points,function(e,t){if(e===r){n=t;return false}else{return true}});return n},createPointForPolygonType:function e(t,P){var k=this;var r=!T.default.contains(["angles","sides"],this.props.graph.snapTo);var x=function e(t){return(P+t+k.points.length)%k.points.length};var p=function e(){var t=k.removePoint(h);if(k.polygon.closed()){k.points=K(k.points,t);k.polygon.update({closed:false})}k.updatePolygon();k.clearCoords();setTimeout(h.remove.bind(h),0)};var f=(0,s.default)(function(e,t){e.state.isInitialMove=t},1e3);var n=function e(t){var r=k.points.length>1&&(h===k.points[0]&&w.equal(t,T.default.last(k.points).coord())||h===T.default.last(k.points)&&w.equal(t,k.points[0].coord()));if(k.isClickToAddPoints()){if(k.isCoordInTrash(t)){p()}else if(r){var n=k.points.pop();if(k.points.length>2){k.polygon.update({closed:true});k.updateCoordsFromPoints()}else{k.polygon.update({closed:false});k.clearCoords()}k.updatePolygon();setTimeout(n.remove.bind(n),0)}else{var o=T.default.any(k.points,function(e){return e!==h&&w.equal(e.coord(),t)});if(o){k.removePoint(h);if(k.points.length<3){k.polygon.update({closed:false});k.clearCoords()}else if(k.polygon.closed()){k.updateCoordsFromPoints()}k.updatePolygon();setTimeout(h.remove.bind(h),0)}else{var a=h===T.default.head(k.points)||h===T.default.last(k.points);var i=!h.hasMoved();var s=!h.state.isInitialMove;var l=!k.polygon.closed();var u=k.points.length>2;var c=a&&i&&s&&l&&u;if(c){k.polygon.update({closed:true});k.updatePolygon();k.updateCoordsFromPoints()}}}k.setTrashCanVisibility(.5)}f(h,false)};var o=function e(t){if(k.points==null||k.points.length===0){return true}var a=T.default.invoke(k.points,"coord");a[P]=t;if(!k.isClickToAddPoints()){if(D(a[x(-2)],a[x(-1)],a[P])||D(a[x(-1)],a[P],a[x(1)])||D(a[P],a[x(1)],a[x(2)])){return false}var r=T.default.zip(a,K(a));if(k.points.length>3){for(var n=-1;n<=0;n++){var o=r[x(n)];var i=T.default.without(r,o,r[x(n-1)],r[x(n+1)]);for(var s=0;s<i.length;s++){var l=i[s];if(B(o,l)){return false}}}}}if(k.props.graph.snapTo==="angles"&&k.points.length>2){var u=T.default.map(W(a),function(e){return e*180/Math.PI});T.default.each([-1,1],function(e){u[x(e)]=Math.round(u[x(e)])});var c=function e(t,r,n){var o=M.default.findAngle(a[x(t)],a[x(n)],a[x(r)]);return(o+360)%360};var p=[u[x(-1)]-c(-2,-1,1),u[x(1)]-c(-1,1,2)];p[2]=180-(p[0]+p[1]);if(T.default.any(p,function(e){return V(e,1)})){return false}var f=q(U(a[x(-1)],a[x(1)]));var h=R(A(a[x(-1)],a[x(1)],a[P]))===1;var d=Math.sin(p[1]*Math.PI/180)/Math.sin(p[2]*Math.PI/180)*f;var v=M.default.findAngle(a[x(1)],a[x(-1)]);var g=k.graphie.polar(d,v+(h?1:-1)*p[0]);return k.graphie.addPoints(a[x(-1)],g)}else if(k.props.graph.snapTo==="sides"&&k.points.length>1){var m=T.default.map([[a[x(-1)],a[P]],[a[P],a[x(1)]],[a[x(-1)],a[x(1)]]],function(e){return q(U.apply(void 0,e))});T.default.each([0,1],function(e){m[e]=Math.round(m[e])});if(V(m[1]+m[2],m[0])||V(m[0]+m[2],m[1])||V(m[0]+m[1],m[2])){return false}var y=Y(m[0],m[2],m[1]);var b=M.default.findAngle(a[x(1)],a[x(-1)]);var O=R(A(a[x(-1)],a[x(1)],a[P]))===1;var w=k.graphie.polar(m[0],b+(O?1:-1)*y);return k.graphie.addPoints(a[x(-1)],w)}else{return true}};var h=c.default.addMaybeMobileMovablePoint(this,b({coord:t,constraints:[c.default.MovablePoint.constraints.bound(),r?c.default.MovablePoint.constraints.snap():null,o],onMoveStart:function e(){if(k.isClickToAddPoints()){k.setTrashCanVisibility(1)}},onMove:function e(){if(k.polygon.closed()){k.updateCoordsFromPoints()}},onMoveEnd:n},this.props.apiOptions.isMobile&&this.isClickToAddPoints()?{onRemove:p}:{}));h.state.isInitialMove=true;return h},updateCoordsFromPoints:function e(){var t=T.default.extend({},this.props.graph,{coords:T.default.map(this.points,function(e){return T.default.result(e,"coord")})});this.onChange({graph:t})},clearCoords:function e(){var t=T.default.extend({},this.props.graph,{coords:null});this.onChange({graph:t})},onChange:function e(t){this.props.onChange(t);this.props.trackInteraction()},addPointControls:function e(){var t=te.getPointCoords(this.props.graph,this.props);this.points=[];this.points=T.default.map(t,this.createPointForPointsType,this)},removePointControls:function e(){T.default.invoke(this.points,"remove")},addSegmentControls:function e(){var r=this;var a=this;var i=this.graphie;var t=te.getSegmentCoords(this.props.graph,this.props);var s=function e(t){return c.default.addMaybeMobileMovablePoint(r,t)};this.points=[];this.lines=T.default.map(t,function(e,t){var r=function e(){var t=T.default.extend({},a.props.graph,{coords:T.default.invoke(a.lines,"coords")});a.onChange({graph:t})};var n=T.default.map(e,function(e,t){return s({coord:e,constraints:[c.default.MovablePoint.constraints.bound(),c.default.MovablePoint.constraints.snap(),function(e){if(!n){return}return!w.equal(e,n[1-t].coord())}],onMove:r})});a.points=a.points.concat(n);var o=c.default.addMovableLine(i,{points:n,static:false,constraints:[c.default.MovableLine.constraints.bound(),c.default.MovableLine.constraints.snap()],onMove:[c.default.MovableLine.onMove.updatePoints,r],normalStyle:b({stroke:this.props.apiOptions.isMobile?g.default.BLUE_C:g.default.INTERACTIVE},this._lineStroke()),highlightStyle:b({stroke:this.props.apiOptions.isMobile?g.default.BLUE_C:g.default.INTERACTING},this._lineStroke())});T.default.invoke(n,"toFront");return o},this)},removeSegmentControls:function e(){T.default.invoke(this.points,"remove");T.default.invoke(this.lines,"remove")},addRayControls:function e(){this.addLine("ray")},removeRayControls:function e(){this.removeLine()},addPolygonControls:function e(){this.polygon=null;var t=te.getPolygonCoords(this.props.graph,this.props);this.points=[];this.points=T.default.map(t,this.createPointForPolygonType,this);this.updatePolygon()},updatePolygon:function e(){var t;if(this.polygon){t=this.polygon.closed()}else if(this.points.length>=3){t=true}else{t=false}var r=this.graphie;var n=this.points.length;var o=!T.default.contains(["angles","sides"],this.props.graph.snapTo);var a=T.default.times(n,function(e){if(!this.props.graph.showAngles||!t&&(e===0||e===n-1)){return""}else if(this.props.graph.snapTo==="angles"){return"$deg0"}else{return"$deg1"}},this);var i=T.default.times(n,function(e){return t||e!==0&&e!==n-1},this);var s=T.default.times(n,function(e){if(this.props.graph.showAngles&&(t||e!==0&&e!==n-1)){return 1}else{return 0}},this);var l=T.default.times(n,function(e){if(!this.props.graph.showSides||!t&&e===n-1){return""}else if(this.props.graph.snapTo==="sides"){return"$len0"}else{return"$len1"}},this);if(this.polygon==null){var u=this;u.polygon=c.default.addMovablePolygon(r,{constraints:[c.default.MovablePolygon.constraints.bound(),o?c.default.MovablePolygon.constraints.snap():null],closed:t,points:u.points,angleLabels:a,showRightAngleMarkers:i,numArcs:s,sideLabels:l,onMove:[c.default.MovablePolygon.onMove.updatePoints,function(){if(this.closed()){u.updateCoordsFromPoints()}}],normalStyle:b({stroke:this.props.apiOptions.isMobile?g.default.BLUE_C:g.default.INTERACTIVE},this._lineStroke())})}else{this.polygon.update({closed:t,points:this.points,angleLabels:a,showRightAngleMarkers:i,numArcs:s,sideLabels:l})}},removePolygonControls:function e(){T.default.invoke(this.points,"remove");this.polygon.remove()},addAngleControls:function e(){var t=this;var r=this.graphie;var n=te.getAngleCoords(this.props.graph,this.props);this.points=T.default.map(n,function(e,t){return r.addMovablePoint(T.default.extend({coord:e,normalStyle:{stroke:g.default.INTERACTIVE,fill:g.default.INTERACTIVE}},t===1?{snapX:r.snap[0],snapY:r.snap[1]}:{}))});this.angle=r.addMovableAngle({points:this.points,snapDegrees:this.props.graph.snapDegrees||1,snapOffsetDeg:this.props.graph.angleOffsetDeg||0,angleLabel:this.props.graph.showAngles?"$deg0":"",pushOut:2,allowReflex:F(this.props.graph.allowReflexAngles,true)});(0,a.default)(this.angle).on("move",function(){var e=T.default.extend({},t.props.graph,{coords:t.angle.getClockwiseCoords()});t.onChange({graph:e})})},removeAngleControls:function e(){T.default.invoke(this.points,"remove");this.angle.remove()},toggleShowAngles:function e(){var t=T.default.extend({},this.props.graph,{showAngles:!this.props.graph.showAngles});this.onChange({graph:t})},toggleShowSides:function e(){var t=T.default.extend({},this.props.graph,{showSides:!this.props.graph.showSides});this.onChange({graph:t})},getUserInput:function e(){return te.getUserInputFromProps(this.props)},simpleValidate:function e(t){return te.validate(this.getUserInput(),t,this)},focus:a.default.noop,render:function e(){var o=this;var t;var r;if(this.props.flexibleType){t=p.createElement("select",{value:this.props.graph.type,onChange:function e(t){var r=t.target.value;o.onChange({graph:{type:r}})}},p.createElement("option",{value:"linear"},i18n.doNotTranslate("Linear function")),p.createElement("option",{value:"quadratic"},i18n.doNotTranslate("Quadratic function")),p.createElement("option",{value:"sinusoid"},i18n.doNotTranslate("Sinusoid function")),p.createElement("option",{value:"circle"},i18n.doNotTranslate("Circle")),p.createElement("option",{value:"point"},i18n.doNotTranslate("Point(s)")),p.createElement("option",{value:"linear-system"},i18n.doNotTranslate("Linear System")),p.createElement("option",{value:"polygon"},i18n.doNotTranslate("Polygon")),p.createElement("option",{value:"segment"},i18n.doNotTranslate("Line Segment(s)")),p.createElement("option",{value:"ray"},i18n.doNotTranslate("Ray")),p.createElement("option",{value:"angle"},i18n.doNotTranslate("Angle")));if(this.props.graph.type==="point"){r=p.createElement("select",{key:"point-select",value:this.props.graph.numPoints||1,onChange:function e(t){var r=+t.target.value||t.target.value;o.onChange({graph:{type:"point",numPoints:r,coords:null}})}},T.default.map(T.default.range(1,7),function(e){return p.createElement("option",{key:e,value:e},e," ",i18n.doNotTranslate("point"),e>1&&i18n.doNotTranslate('"s"'))}),p.createElement("option",{value:S},i18n.doNotTranslate("unlimited")))}else if(this.props.graph.type==="polygon"){r=p.createElement("div",null,p.createElement("div",null,p.createElement("select",{key:"polygon-select",value:this.props.graph.numSides||3,onChange:function e(t){var r=+t.target.value||t.target.value;var n=T.default.extend({},o.props.graph,{numSides:r,coords:null,snapTo:"grid"});o.onChange({graph:n})}},T.default.map(T.default.range(3,13),function(e){return p.createElement("option",{key:e,value:e},i18n.doNotTranslate("%(n)s sides",{n:e}))}),p.createElement("option",{value:S},i18n.doNotTranslate("unlimited sides")))),p.createElement("div",null,p.createElement("label",null," ",i18n.doNotTranslate("Snap to")," ",p.createElement("select",{key:"polygon-snap",value:this.props.graph.snapTo,onChange:function e(t){var r=T.default.extend({},o.props.graph,{snapTo:t.target.value,coords:null});o.onChange({graph:r})}},p.createElement("option",{value:"grid"},i18n.doNotTranslate("grid")),this.props.graph.numSides!==S&&p.createElement(p.Fragment,null,p.createElement("option",{value:"angles"}," ",i18n.doNotTranslate("interior angles")," "),p.createElement("option",{value:"sides"}," ",i18n.doNotTranslate("side measures")," ")))),p.createElement(h.default,null,p.createElement("p",null,i18n.doNotTranslate("These options affect the movement of the vertex points. The grid option will guide the points to the nearest half step along the grid.")),p.createElement("p",null,i18n.doNotTranslate("The interior angle and side measure options guide the points to the nearest whole angle or side"))," ",i18n.doNotTranslate("measure respectively.")," ")),p.createElement("div",null,p.createElement("label",null,i18n.doNotTranslate("Show angle measures:")," ",p.createElement("input",{type:"checkbox",checked:this.props.graph.showAngles,onChange:this.toggleShowAngles})),p.createElement(h.default,null,p.createElement("p",null,i18n.doNotTranslate("Displays the interior angle measures.")))),p.createElement("div",null,p.createElement("label",null,i18n.doNotTranslate("Show side measures:")," ",p.createElement("input",{type:"checkbox",checked:this.props.graph.showSides,onChange:this.toggleShowSides})),p.createElement(h.default,null,p.createElement("p",null,i18n.doNotTranslate("Displays the side lengths.")))))}else if(this.props.graph.type==="segment"){r=p.createElement("select",{key:"segment-select",value:this.props.graph.numSegments||1,onChange:function e(t){var r=+t.target.value;o.onChange({graph:{type:"segment",numSegments:r,coords:null}})}},T.default.map(T.default.range(1,7),function(e){return p.createElement("option",{key:e,value:e},e," ",i18n.doNotTranslate("segment"),e>1&&i18n.doNotTranslate("s"))}))}else if(this.props.graph.type==="angle"){var n=F(this.props.graph.allowReflexAngles,true);r=p.createElement("div",null,p.createElement("div",null,p.createElement("label",null,i18n.doNotTranslate("Show angle measure:")," ",p.createElement("input",{type:"checkbox",checked:this.props.graph.showAngles,onChange:this.toggleShowAngles}))),p.createElement("div",null,p.createElement("label",null,i18n.doNotTranslate("Allow reflex angles:")," ",p.createElement("input",{type:"checkbox",checked:n,onChange:function e(t){o.onChange({graph:T.default.extend({},o.props.graph,{allowReflexAngles:!n,coords:null})})}})),p.createElement(h.default,null,p.createElement("p",null,i18n.doNotTranslate("Reflex angles are angles with a measure greater than 180 degrees.")),p.createElement("p",null,i18n.doNotTranslate("By default, these should remain enabled.")))),p.createElement("div",null,p.createElement("label",null,i18n.doNotTranslate("Snap to increments of")," ",p.createElement(d.default,{key:"degree-snap",placeholder:1,value:this.props.graph.snapDegrees,onChange:function e(t){o.onChange({graph:T.default.extend({},o.props.graph,{snapDegrees:Math.abs(t),coords:null})})}})," ",i18n.doNotTranslate("degrees")," ")),p.createElement("div",null,p.createElement("label",null," ",i18n.doNotTranslate("With an offset of")," ",p.createElement(d.default,{key:"angle-offset",placeholder:0,value:this.props.graph.angleOffsetDeg,onChange:function e(t){o.onChange({graph:T.default.extend({},o.props.graph,{angleOffsetDeg:t,coords:null})})}})," ",i18n.doNotTranslate("degrees")," ")))}}var a=k(this.props.containerSizeClass);var i;if(this.isClickToAddPoints()&&this.state.shouldShowInstructions){if(this.props.graph.type==="point"){i=i18n._("Click to add points")}else if(this.props.graph.type==="polygon"){i=i18n._("Click to add vertices")}}else{i=undefined}var s=this.isClickToAddPoints()?this.handleAddPointsMouseDown:null;var l=this.props.gridStep||v.default.getGridStep(this.props.range,this.props.step,a[0]);var u=this.props.snapStep||v.default.snapStepFromGridStep(l);var c=this.props.apiOptions.isMobile;return p.createElement("div",{className:"perseus-widget "+"perseus-widget-interactive-graph",style:{width:a[0],height:this.props.flexibleType?"auto":a[1]}},p.createElement(f.default,{instructions:i,ref:"graph",box:a,labels:this.props.labels,range:this.props.range,step:c?v.default.constrainedTickStepsFromTickSteps(this.props.step,this.props.range):this.props.step,gridStep:l,snapStep:u,markings:this.props.markings,backgroundImage:this.props.backgroundImage,showProtractor:this.props.showProtractor,showRuler:this.props.showRuler,rulerLabel:this.props.rulerLabel,rulerTicks:this.props.rulerTicks,onMouseDown:s,onGraphieUpdated:this.setGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,isMobile:c}),t,r)}});T.default.extend(te,{getQuadraticCoefficients:function e(t){var r=t[0];var n=t[1];var o=t[2];var a=(r[0]-n[0])*(r[0]-o[0])*(n[0]-o[0]);if(a===0){return}var i=(o[0]*(n[1]-r[1])+n[0]*(r[1]-o[1])+r[0]*(o[1]-n[1]))/a;var s=(o[0]*o[0]*(r[1]-n[1])+n[0]*n[0]*(o[1]-r[1])+r[0]*r[0]*(n[1]-o[1]))/a;var l=(n[0]*o[0]*(n[0]-o[0])*r[1]+o[0]*r[0]*(o[0]-r[0])*n[1]+r[0]*n[0]*(r[0]-n[0])*o[1])/a;return[i,s,l]},getSinusoidCoefficients:function e(t){var r=t[0];var n=t[1];var o=n[1]-r[1];var a=Math.PI/(2*(n[0]-r[0]));var i=r[0]*a;var s=r[1];return[o,a,i,s]},getLineCoords:function e(t,r){return t.coords||te.pointsFromNormalized(r,[[.25,.75],[.75,.75]])},getPointCoords:function e(t,r){var n=t.numPoints||1;var o=t.coords;if(o){return o}else{switch(n){case 1:o=[t.coord||[0,0]];break;case 2:o=[[-5,0],[5,0]];break;case 3:o=[[-5,0],[0,0],[5,0]];break;case 4:o=[[-6,0],[-2,0],[2,0],[6,0]];break;case 5:o=[[-6,0],[-3,0],[0,0],[3,0],[6,0]];break;case 6:o=[[-5,0],[-3,0],[-1,0],[1,0],[3,0],[5,0]];break;case S:o=[];break}var a=[[-10,10],[-10,10]];var i=te.normalizeCoords(o,a);return te.pointsFromNormalized(r,i)}},getLinearSystemCoords:function e(t,r){return t.coords||T.default.map([[[.25,.75],[.75,.75]],[[.25,.25],[.75,.25]]],function(e){return te.pointsFromNormalized(r,e)})},getPolygonCoords:function e(t,r){var n=t.coords;if(n){return n}var o=t.numSides||3;if(o===S){n=[]}else{var a=2*Math.PI/o;var i=(1/o-1/2)*Math.PI;var s=t.snapTo==="sides"?Math.sqrt(3)/3*7:4;n=T.default.times(o,function(e){return[s*Math.cos(e*a+i),s*Math.sin(e*a+i)]})}var l=[[-10,10],[-10,10]];n=te.normalizeCoords(n,l);var u=!T.default.contains(["angles","sides"],t.snapTo);n=te.pointsFromNormalized(r,n,!u);return n},getSegmentCoords:function e(t,r){var n=t.coords;if(n){return n}var o=t.numSegments||1;var a={1:[5],2:[5,-5],3:[5,0,-5],4:[6,2,-2,-6],5:[6,3,0,-3,-6],6:[5,3,1,-1,-3,-5]}[o];var i=[[-10,10],[-10,10]];return T.default.map(a,function(e){var t=[[-5,e],[5,e]];t=te.normalizeCoords(t,i);t=te.pointsFromNormalized(r,t);return t})},getAngleCoords:function e(t,r){var n=t.coords;if(n){return n}var o=t.snapDegrees||1;var a=o;while(a<20){a+=o}a=a*Math.PI/180;var i=(t.angleOffsetDeg||0)*Math.PI/180;n=te.pointsFromNormalized(r,[[.85,.5],[.5,.5]]);var s=q(U.apply(void 0,n));n[0]=[n[1][0]+s*Math.cos(i),n[1][1]+s*Math.sin(i)];n[2]=[n[1][0]+s*Math.cos(a+i),n[1][1]+s*Math.sin(a+i)];return n},normalizeCoords:function e(t,n){return T.default.map(t,function(e){return T.default.map(e,function(e,t){var r=n[t][1]-n[t][0];return(e+n[t][1])/r})})},getEquationString:function e(t){var r=t.graph.type;var n="get"+Q(r)+"EquationString";return te[n](t)},pointsFromNormalized:function e(i,t,s){return T.default.map(t,function(e){return T.default.map(e,function(e,t){var r=i.range[t];if(s){return r[0]+(r[1]-r[0])*e}else{var n=i.step[t];var o=$(r,n);var a=Math.round(e*o);return r[0]+n*a}})})},getLinearEquationString:function e(t){var r=te.getLineCoords(t.graph,t);if(I(r[0][0],r[1][0])){return"x = "+r[0][0].toFixed(3)}else{var n=(r[1][1]-r[0][1])/(r[1][0]-r[0][0]);var o=r[0][1]-n*r[0][0];if(I(n,0)){return"y = "+o.toFixed(3)}else{return"y = "+n.toFixed(3)+"x + "+o.toFixed(3)}}},getCurrentQuadraticCoefficients:function e(t){var r=t.graph.coords||te.defaultQuadraticCoords(t);return te.getQuadraticCoefficients(r)},defaultQuadraticCoords:function e(t){var r=[[.25,.75],[.5,.25],[.75,.75]];return te.pointsFromNormalized(t,r)},getQuadraticEquationString:function e(t){var r=te.getCurrentQuadraticCoefficients(t);return"y = "+r[0].toFixed(3)+"x^2 + "+r[1].toFixed(3)+"x + "+r[2].toFixed(3)},getCurrentSinusoidCoefficients:function e(t){var r=t.graph.coords||te.defaultSinusoidCoords(t);return te.getSinusoidCoefficients(r)},defaultSinusoidCoords:function e(t){var r=[[.5,.5],[.65,.6]];return te.pointsFromNormalized(t,r)},getSinusoidEquationString:function e(t){var r=te.getCurrentSinusoidCoefficients(t);return"y = "+r[0].toFixed(3)+"sin("+r[1].toFixed(3)+"x - "+r[2].toFixed(3)+") + "+r[3].toFixed(3)},getCircleEquationString:function e(t){var r=t.graph;var n=r.center||[0,0];var o=r.radius||2;return"center ("+n[0]+", "+n[1]+"), radius "+o},getLinearSystemEquationString:function e(t){var r=te.getLinearSystemCoords(t.graph,t);return"\n"+Z(r[0][0],r[0][1])+"\n"+Z(r[1][0],r[1][1])+"\n"+J(r[0],r[1])},getPointEquationString:function e(t){var r=te.getPointCoords(t.graph,t);return r.map(function(e){return"("+e[0]+", "+e[1]+")"}).join(", ")},getSegmentEquationString:function e(t){var r=te.getSegmentCoords(t.graph,t);return T.default.map(r,function(e){return"["+T.default.map(e,function(e){return"("+e.join(", ")+")"}).join(" ")+"]"}).join(" ")},getRayEquationString:function e(t){var r=te.getLineCoords(t.graph,t);var n=r[0];var o=r[1];var a=te.getLinearEquationString(t);if(n[0]>o[0]){a+=" (for x <= "+n[0].toFixed(3)+")"}else if(n[0]<o[0]){a+=" (for x >= "+n[0].toFixed(3)+")"}else if(n[1]>o[1]){a+=" (for y <= "+n[1].toFixed(3)+")"}else{a+=" (for y >= "+n[1].toFixed(3)+")"}return a},getPolygonEquationString:function e(t){var r=te.getPolygonCoords(t.graph,t);return T.default.map(r,function(e){return"("+e.join(", ")+")"}).join(" ")},getAngleEquationString:function e(t){var r=te.getAngleCoords(t.graph,t);var n=M.default.findAngle(r[2],r[0],r[1]);return n.toFixed(0)+"° angle"+" at ("+r[1].join(", ")+")"},validate:function e(t,r,n){var o=!!(t.coords||t.center&&t.radius);if(t.type===r.correct.type&&o){if(t.type==="linear"){var a=t.coords;var i=r.correct.coords;if(D(i[0],i[1],a[0])&&D(i[0],i[1],a[1])){return{type:"points",earned:1,total:1,message:null}}}else if(t.type==="linear-system"){var s=t.coords;var l=r.correct.coords;if(D(l[0][0],l[0][1],s[0][0])&&D(l[0][0],l[0][1],s[0][1])&&D(l[1][0],l[1][1],s[1][0])&&D(l[1][0],l[1][1],s[1][1])||D(l[0][0],l[0][1],s[1][0])&&D(l[0][0],l[0][1],s[1][1])&&D(l[1][0],l[1][1],s[0][0])&&D(l[1][0],l[1][1],s[0][1])){return{type:"points",earned:1,total:1,message:null}}}else if(t.type==="quadratic"){var u=this.getQuadraticCoefficients(t.coords);var c=this.getQuadraticCoefficients(r.correct.coords);if(N(u,c)){return{type:"points",earned:1,total:1,message:null}}}else if(t.type==="sinusoid"){var p=this.getSinusoidCoefficients(t.coords);var f=this.getSinusoidCoefficients(r.correct.coords);var h=X(p);var d=X(f);if(N(h,d)){return{type:"points",earned:1,total:1,message:null}}}else if(t.type==="circle"){if(N(t.center,r.correct.center)&&I(t.radius,r.correct.radius)){return{type:"points",earned:1,total:1,message:null}}}else if(t.type==="point"){var v=t.coords;var g=te.getPointCoords(r.correct,n);v=v.slice();g=g.slice();v.sort();g.sort();if(N(v,g)){return{type:"points",earned:1,total:1,message:null}}}else if(t.type==="polygon"){var m=t.coords.slice();var y=r.correct.coords.slice();var b;if(r.correct.match==="similar"){b=G(m,y,Number.POSITIVE_INFINITY)}else if(r.correct.match==="congruent"){b=G(m,y,j.DEFAULT_TOLERANCE)}else if(r.correct.match==="approx"){b=G(m,y,.1)}else{m.sort();y.sort();b=N(m,y)}if(b){return{type:"points",earned:1,total:1,message:null}}}else if(t.type==="segment"){var O=t.coords.slice();var w=r.correct.coords.slice();O=T.default.invoke(O,"sort").sort();w=T.default.invoke(w,"sort").sort();if(N(O,w)){return{type:"points",earned:1,total:1,message:null}}}else if(t.type==="ray"){var P=t.coords;var k=r.correct.coords;if(N(P[0],k[0])&&D(k[0],k[1],P[1])){return{type:"points",earned:1,total:1,message:null}}}else if(t.type==="angle"){var x=t.coords;var E=r.correct.coords;var C;if(r.correct.match==="congruent"){var S=T.default.map([x,E],function(e){var t=M.default.findAngle(e[2],e[0],e[1]);return(t+360)%360});C=I.apply(void 0,S)}else{C=N(x[1],E[1])&&D(E[1],E[0],x[0])&&D(E[1],E[2],x[2])}if(C){return{type:"points",earned:1,total:1,message:null}}}}if(!o||T.default.isEqual(t,r.graph)){return{type:"invalid",message:null}}else{return{type:"points",earned:0,total:1,message:null}}},getUserInputFromProps:function e(t){return t.graph}});e.exports={name:"interactive-graph",displayName:"Interactive graph",widget:te}},Voua:function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("4mDm");r("2B1R");r("+2oP");r("5DmW");r("NBAS");r("07d7");r("inlA");r("LKBx");r("FZtP");r("3bBZ");var y=n(r("q1tI"));var b=r("uBl0");function n(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function o(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){h(t,e,r[e])})}return t}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}function l(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return c(e)}function u(e){u=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return u(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)f(e,t)}function f(e,t){f=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return f(e,t)}function h(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var d=r("17x9");var _=r("F/us");var v=r("rTmL");var g=r("+jAD");var m=r("Giaf");var O=m.Label;var w=m.Line;var P=m.MovablePoint;var k=m.MovableLine;var x=m.Plot;var E=m.PlotParametric;var C=m.Point;var S=m.Rect;var T=r("eAf/").vector;var M=function e(t,r){r=r||{};var n=t+"||"+r.decimal_separatpr+"||";var o=r.functions;var a=o?o.length:0;for(var i=0;i<a;i++){n+=o[i]+"|"}return n};var j=Object.create(null);var I=function e(t,r){var n=M(t,r);var o=j[n];if(o){return o}o=v.parse(t,r);j[n]=o;return o};var N=Object.create(null);var A=function e(t,r){var n=M(t,r);var o=N[n];if(o){return o}var a=v.parse(t,r).expr;o=a?a.compile():function(){return 0};N[n]=o;return o};var D={graph:{box:[400,400],labels:["x","y"],range:[[-10,10],[-10,10]],tickStep:[1,1],gridStep:[1,1],markings:"graph"},elements:[]};var R=function(e){p(o,e);function o(){var e;var i;a(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}i=l(this,(e=u(o)).call.apply(e,[this].concat(r)));h(c(i),"_getInitialVariables",function(e){var p={};_.each(_.where(e,{type:"movable-point"}),function(e){var t=e.options.varSubscript;var r=I(e.options.startX||"0").expr;var n=I(e.options.startY||"0").expr;var o=0;var a=0;if(r){o=r.eval({})||0}if(n){a=n.eval({})||0}p["x_"+t]=o;p["y_"+t]=a},c(i));_.each(_.where(e,{type:"movable-line"}),function(e){var t=e.options.startSubscript;var r=e.options.endSubscript;var n=I(e.options.startX||"0").expr;var o=I(e.options.startY||"0").expr;var a=I(e.options.endX||"0").expr;var i=I(e.options.endY||"0").expr;var s=0;var l=0;var u=0;var c=0;if(n){s=n.eval({})||0}if(o){l=o.eval({})||0}if(a){u=a.eval({})||0}if(i){c=i.eval({})||0}p["x_"+t]=s;p["y_"+t]=l;p["x_"+r]=u;p["y_"+r]=c},c(i));_.each(_.where(e,{type:"function"}),function(e){p[e.options.funcName]=e.options.value});return p});h(c(i),"_getInitialFunctions",function(e){return _.map(_.where(e,{type:"function"}),function(e){return e.options.funcName})});h(c(i),"_setupGraphie",function(e,t){e.graphInit(_.extend({},t,{grid:_.contains(["graph","grid"],i.props.graph.markings),axes:_.contains(["graph"],i.props.graph.markings),ticks:_.contains(["graph"],i.props.graph.markings),labels:_.contains(["graph"],i.props.graph.markings),labelFormat:function e(t){return"\\small{"+t+"}"},axisArrows:"<->",unityLabels:false}))});h(c(i),"_updatePointLocation",function(e,t){var r=_.clone(i.state.variables);r["x_"+e]=t[0];r["y_"+e]=t[1];i.setState({variables:r});i.props.trackInteraction()});h(c(i),"_updateLineLocation",function(e,t){var r=i._eval("("+e.endX+")-("+e.startX+")");var n=i._eval("("+e.endY+")-("+e.startY+")");var o=T.add(t,[r,n]);var a=_.clone(i.state.variables);a["x_"+e.startSubscript]=t[0];a["y_"+e.startSubscript]=t[1];a["x_"+e.endSubscript]=o[0];a["y_"+e.endSubscript]=o[1];i.setState({variables:a});i.props.trackInteraction()});h(c(i),"_eval",function(e,t){var r=A(e,{functions:i.state.functions});var n=_.extend({},i.state.variables,t);_.each(_.keys(n),function(e){if(_.isString(n[e])){var t=A(n[e],{functions:i.state.functions});n[e]=function(e){return t(_.extend({},n,{x:e}))}}});return r(n)||0});h(c(i),"_extractVars",function(e){if(e==null){return[]}var t=[];_.each(e.args(),function(e){if(e&&e.constructor.name==="Expr"){t=t.concat(this._extractVars(e))}},c(i));if(e.name()==="Var"){t.push(e.prettyPrint())}return t});h(c(i),"change",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return g.change.apply(c(i),t)});h(c(i),"getUserInput",function(){return{}});h(c(i),"simpleValidate",function(e){return o.validate(i.getUserInput(),e)});h(c(i),"state",{variables:i._getInitialVariables(i.props.elements),functions:i._getInitialFunctions(i.props.elements)});return i}s(o,[{key:"UNSAFE_componentWillReceiveProps",value:function e(t){if(!_.isEqual(this.props.elements,t.elements)){this.setState({variables:this._getInitialVariables(t.elements),functions:this._getInitialFunctions(t.elements)})}}},{key:"render",value:function e(){var t=this.props.graph.range;var r=this.props.graph.labels;if(this.props.graph.markings==="graph"){r=this.props.graph.labels.map(function(e){return e.startsWith("$")&&e.endsWith("$")?e.slice(1,-1):e})}return y.createElement(m,{box:this.props.graph.box,range:this.props.graph.range,options:this.props.graph,setup:this._setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable},this.props.graph.markings==="graph"&&y.createElement(O,{coord:[0,t[1][1]],text:r[1],direction:"above"}),this.props.graph.markings==="graph"&&y.createElement(O,{coord:[t[0][1],0],text:r[0],direction:"right"}),_.map(this.props.elements,function(n,e){var o=this;if(n.type==="point"){return y.createElement(C,{key:n.key,coord:[this._eval(n.options.coordX),this._eval(n.options.coordY)],color:n.options.color})}else if(n.type==="line"){var t=[this._eval(n.options.startX),this._eval(n.options.startY)];var r=[this._eval(n.options.endX),this._eval(n.options.endY)];return y.createElement(w,{key:n.key,start:t,end:r,style:{stroke:n.options.color,strokeWidth:n.options.strokeWidth,strokeDasharray:n.options.strokeDasharray,arrows:n.options.arrows}})}else if(n.type==="movable-point"){var a=[function(e){var t=Math.max(o._eval(n.options.constraintXMin),Math.min(o._eval(n.options.constraintXMax),e[0]));var r=Math.max(o._eval(n.options.constraintYMin),Math.min(o._eval(n.options.constraintYMax),e[1]));return[t,r]}];if(n.options.constraint==="snap"){a.push(P.constraints.snap(n.options.snap))}else if(n.options.constraint==="x"){a.push(function(e){return[o._eval(n.options.constraintFn,{y:e[1]}),e[1]]})}else if(n.options.constraint==="y"){a.push(function(e){return[e[0],o._eval(n.options.constraintFn,{x:e[0]})]})}return y.createElement(P,{key:n.key,coord:[this.state.variables["x_"+n.options.varSubscript],this.state.variables["y_"+n.options.varSubscript]],constraints:a,foo_x:n.options.constraint,foo_y:n.options.constraintFn,foo_z:n.options.snap,onMove:_.partial(this._updatePointLocation,n.options.varSubscript)})}else if(n.type==="movable-line"){var i=[function(e){var t=Math.max(o._eval(n.options.constraintXMin),Math.min(o._eval(n.options.constraintXMax),e[0]));var r=Math.max(o._eval(n.options.constraintYMin),Math.min(o._eval(n.options.constraintYMax),e[1]));return[t,r]}];if(n.options.constraint==="snap"){i.push(P.constraints.snap(n.options.snap))}else if(n.options.constraint==="x"){i.push(function(e){return[o._eval(n.options.constraintFn,{y:e[1]}),e[1]]})}else if(n.options.constraint==="y"){i.push(function(e){return[e[0],o._eval(n.options.constraintFn,{x:e[0]})]})}var s=[this.state.variables["x_"+n.options.startSubscript],this.state.variables["y_"+n.options.startSubscript]];var l=[this.state.variables["x_"+n.options.endSubscript],this.state.variables["y_"+n.options.endSubscript]];return y.createElement(k,{key:n.key,constraints:i,onMove:_.bind(this._updateLineLocation,this,n.options),foo_x:n.options.constraint,foo_y:n.options.constraintFn,foo_z:n.options.snap},y.createElement(P,{coord:s,static:true,normalStyle:{stroke:"none",fill:"none"}}),y.createElement(P,{coord:l,static:true,normalStyle:{stroke:"none",fill:"none"}}))}else if(n.type==="function"){var u=function e(t){return o._eval(n.options.value,{x:t})};var c=_.without(this._extractVars(I(n.options.value).expr),"x");var p=_.object(c,_.map(c,function(e){return o.state.variables[e]}));var f=[this._eval(n.options.rangeMin,this.state.variables),this._eval(n.options.rangeMax,this.state.variables)];return y.createElement(x,{key:n.key,fn:u,foo_fn:n.options.value,foo_varvalues:p,range:f,style:{stroke:n.options.color,strokeWidth:n.options.strokeWidth,strokeDasharray:n.options.strokeDasharray,plotPoints:100}})}else if(n.type==="parametric"){var h=function e(t){return[o._eval(n.options.x,{t:t}),o._eval(n.options.y,{t:t})]};var d=_.without(this._extractVars(I(n.options.x).expr).concat(this._extractVars(I(n.options.y).expr)),"t");var v=_.object(d,_.map(d,function(e){return o.state.variables[e]}));var g=[this._eval(n.options.rangeMin,this.state.variables),this._eval(n.options.rangeMax,this.state.variables)];return y.createElement(E,{key:n.key,fn:h,foo_fnx:n.options.x,foo_fny:n.options.y,foo_varvalues:v,range:g,style:{stroke:n.options.color,strokeWidth:n.options.strokeWidth,strokeDasharray:n.options.strokeDasharray,plotPoints:100}})}else if(n.type==="label"){var m=[this._eval(n.options.coordX),this._eval(n.options.coordY)];return y.createElement(O,{key:e+1,coord:m,text:(0,b.unescapeMathMode)(n.options.label),style:{color:n.options.color}})}else if(n.type==="rectangle"){return y.createElement(S,{key:e+1,x:this._eval(n.options.coordX),y:this._eval(n.options.coordY),width:_.max([this._eval(n.options.width),0]),height:_.max([this._eval(n.options.height),0]),style:{stroke:"none",fill:n.options.color}})}},this))}}]);return o}(y.Component);h(R,"propTypes",o({},g.propTypes,{graph:d.object,elements:d.arrayOf(d.object)}));h(R,"defaultProps",D);_.extend(R,{validate:function e(t,r){return{type:"points",earned:0,total:0,message:null}}});e.exports={name:"interaction",displayName:"Interaction",widget:R,transform:_.identity,hidden:true}},YXfq:function(e,t,r){"use strict";r("ma9I");r("2B1R");r("5DmW");r("NBAS");var o=n(r("q1tI"));function n(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)a(e.prototype,t);if(r)a(e,r);return e}function l(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return c(e)}function u(e){u=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return u(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)f(e,t)}function f(e,t){f=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return f(e,t)}function h(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var d=r("17x9");var i18n=r("HEOz");var v=r("1I17").molecule;var g=function(e){p(a,e);function a(){var e;var o;i(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}o=l(this,(e=u(a)).call.apply(e,[this].concat(r)));h(c(o),"arrowLength",100);h(c(o),"drawArrow",function(){var e=o.refs["arrowCanvas"+o.props.index];var t=e.getContext("2d");t.clearRect(0,0,e.width,e.height);var r=new Path2D;t.strokeStyle="rgb(0,0,0)";t.lineWidth=1.2;t.lineCap="round";var n=5;r.moveTo(n,e.height/2);r.lineTo(e.width-n,e.height/2);r.moveTo(e.width-2*n,e.height/2-n);r.lineTo(e.width-n,e.height/2);r.moveTo(e.width-2*n,e.height/2+n);r.lineTo(e.width-n,e.height/2);t.stroke(r)});return o}s(a,[{key:"componentDidMount",value:function e(){this.drawArrow()}},{key:"componentDidUpdate",value:function e(){this.drawArrow()}},{key:"render",value:function e(){return o.createElement("div",{className:"arrow-container"},o.createElement("div",{className:"above-text"},this.props.data.topText),o.createElement("canvas",{height:"30",id:"arrowCanvas"+this.props.index,ref:"arrowCanvas"+this.props.index,width:this.arrowLength},i18n._("Reaction arrow pointing to the right.")),o.createElement("div",{className:"below-text"},this.props.data.bottomText))}}]);return a}(o.Component);h(g,"propTypes",{data:d.any,index:d.number});var m=function(e){p(a,e);function a(){var e;var t;i(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++){n[o]=arguments[o]}t=l(this,(e=u(a)).call.apply(e,[this].concat(n)));h(c(t),"simpleValidate",function(){return{type:"points",earned:0,total:0,message:null}});h(c(t),"getUserInput",function(){return[]});h(c(t),"validate",function(e,t){return{type:"points",earned:0,total:0,message:null}});h(c(t),"focus",function(){return true});return t}s(a,[{key:"render",value:function e(){var n=this;return o.createElement("div",{className:"reaction",ref:"reaction"},this.props.smiles.map(function(e,t){var r=n.props.widgetId+"-"+t;return o.createElement("div",{key:r,className:"molecule-container"},o.createElement(v,{id:r,rotationAngle:n.props.rotationAngle[t],smiles:e}),t===n.props.smiles.length-1?null:o.createElement(g,{data:n.props.separators[t],index:t}))}))}}]);return a}(o.Component);h(m,"propTypes",{rotationAngle:d.arrayOf(d.number),separators:d.arrayOf(d.object),smiles:d.arrayOf(d.string),widgetId:d.string});h(m,"defaultProps",{smiles:[],rotationAngle:[],separators:[]});e.exports={name:"reaction-diagram",displayName:"Chemical reaction",hidden:true,widget:m}},bTcU:function(e,t,r){"use strict";r("pNMO");r("4Brf");r("ma9I");r("TeQF");r("yq1k");r("4mDm");r("2B1R");r("+2oP");r("ToJy");r("zKZe");r("5DmW");r("NBAS");r("07d7");r("JTJg");r("UxlC");r("FZtP");r("3bBZ");var l=r("mR6N");var u=a(r("TSYQ"));var c=o(r("q1tI"));var i=a(r("i8i4"));var p=r("K7le");var n=r("6OHE");var f=a(r("uEGL"));var h=a(r("Atlv"));var s=a(r("yPu2"));var v=a(r("4s5V"));var g=a(r("oaDE"));var m=a(r("9cGa"));function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function a(e){return e&&e.__esModule?e:{default:e}}function y(){y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};return y.apply(this,arguments)}function b(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){S(t,e,r[e])})}return t}function O(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function w(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return k(e)}function P(e){P=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return P(e)}function k(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function x(e,t,r){if(t)d(e.prototype,t);if(r)d(e,r);return e}function E(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)C(e,t)}function C(e,t){C=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return C(e,t)}function S(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var i18n=r("HEOz");var T=function(e){E(d,e);x(d,null,[{key:"gradeMarker",value:function e(t){var r={hasAnswers:false,isCorrect:false};if(t.selected&&t.selected.length>0){r.hasAnswers=true}if(t.answers.length>0){if(t.selected&&t.selected.length===t.answers.length){r.isCorrect=t.selected.every(function(e){return t.answers.includes(e)})}}else if(!t.selected||t.selected.length===0){r.isCorrect=true}return r}},{key:"validate",value:function e(t,r){var n=0;var o=0;var a=true;var i=false;var s=undefined;try{for(var l=t.markers[Symbol.iterator](),u;!(a=(u=l.next()).done);a=true){var c=u.value;var p=d.gradeMarker(c);if(p.hasAnswers){n++}if(p.isCorrect){o++}}}catch(e){i=true;s=e}finally{try{if(!a&&l.return!=null){l.return()}}finally{if(i){throw s}}}if(n!==t.markers.length){return{type:"invalid",message:null}}return{type:"points",earned:o===t.markers.length?1:0,total:1,message:null}}},{key:"pointInTriangle",value:function e(t,r,n,o){var a=function e(t,r,n){return(t.x-n.x)*(r.y-n.y)-(r.x-n.x)*(t.y-n.y)};var i=a(t,r,n)<0;var s=a(t,n,o)<0;var l=a(t,o,r)<0;return i===s&&s===l}},{key:"imageSideForMarkerPosition",value:function e(t,r){if(t<20){return"left"}else if(t>80){return"right"}var n={x:20,y:0};var o={x:80,y:0};var a={x:80,y:100};var i={x:20,y:100};var s={x:50,y:50};var l={top:[n,o,s],right:[s,o,a],bottom:[i,s,a],left:[n,s,i]};var u={x:t,y:r};for(var c=0,p=Object.keys(l);c<p.length;c++){var f=p[c];var h=l[f];if(d.pointInTriangle.apply(d,[u].concat(h))){return f}}return"center"}},{key:"navigateToMarkerIndex",value:function e(i,t,r){var a=t[r];var n=t.map(function(e,t){var r=e.x-a.x;var n=e.y-a.y;var o=Math.sqrt(Math.pow(r,2)+Math.pow(n,2));return{index:t,dist:o,dir:{x:o!==0?r/o:0,y:o!==0?n/o:0}}}).filter(function(e){if(e.index===r){return false}return t[e.index].showCorrectness!=="correct"}).sort(function(e,t){var r=Math.round(e.dist*(i.x*e.dir.x+i.y*e.dir.y));var n=Math.round(t.dist*(i.x*t.dir.x+i.y*t.dir.y));var o;var a;if(i.x>0){o=e.dir.x>0&&r!==0;a=t.dir.x>0&&n!==0}else if(i.x<0){o=e.dir.x<0&&r!==0;a=t.dir.x<0&&n!==0}else if(i.y>0){o=e.dir.y>0&&r!==0;a=t.dir.y>0&&n!==0}else if(i.y<0){o=e.dir.y<0&&r!==0;a=t.dir.y<0&&n!==0}if(o!==a){if(o){return-1}else{return 1}}return r-n});return n.length>0?n[0].index:r}}]);function d(e){var o;O(this,d);o=w(this,P(d).call(this,e));S(k(o),"handleDocumentClick",function(e){if(o._selectedMarkerPopup&&o._answerChoices){var t=i.default.findDOMNode(o._answerChoices);var n=e.target;var r=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:3;return t&&(t.contains(n)||r>0&&e(t.parentElement,r-1))};if(!r(t)){o.dismissMarkerPopup()}}});S(k(o),"handleDocumentKeyDown",function(e){if(o._selectedMarkerPopup&&e.keyCode===27){e.stopPropagation();o.dismissMarkerPopup()}});o._markers=[];o.state={selectedMarkerIndex:-1,markersInteracted:false};return o}x(d,[{key:"componentDidMount",value:function e(){document.addEventListener("click",this.handleDocumentClick,true);document.addEventListener("keydown",this.handleDocumentKeyDown,true)}},{key:"componentWillUnmount",value:function e(){document.removeEventListener("click",this.handleDocumentClick,true);document.removeEventListener("keydown",this.handleDocumentKeyDown,true)}},{key:"simpleValidate",value:function e(t){return d.validate(this.getUserInput(),t)}},{key:"getUserInput",value:function e(){var t=this.props.markers;return{markers:t}}},{key:"showRationalesForCurrentlySelectedChoices",value:function e(t){var r=this.props.markers;var n=this.props.onChange;var o=r.map(function(e){var t=d.gradeMarker(e);return b({},e,{showCorrectness:t.hasAnswers?t.isCorrect?"correct":"incorrect":undefined})});n({markers:o},null,true)}},{key:"dismissMarkerPopup",value:function e(){var t=this;var r=this.state.selectedMarkerIndex;if(r===-1){return}this.setState({selectedMarkerIndex:-1},function(){var e=t._markers[r];if(e){i.default.findDOMNode(e).focus()}})}},{key:"handleMarkerChange",value:function e(t,r){var n=this.props,o=n.markers,a=n.onChange;var i=[].concat(o.slice(0,t),[b({},r,{showCorrectness:undefined})],o.slice(t+1));a({markers:i})}},{key:"handleMarkerClick",value:function e(t,r){var n=this;var o=this.state.selectedMarkerIndex;r.preventDefault();if(o!==t){this.setState({selectedMarkerIndex:t,markersInteracted:true},function(){setTimeout(function(){if(n._answerChoices){n._answerChoices.focusAnswer()}},100)})}else{this.dismissMarkerPopup()}}},{key:"handleMarkerKeyDown",value:function e(t,r){var n=this.props.markers;if(n.length<2){return}var o={ArrowUp:{x:0,y:-1},ArrowRight:{x:1,y:0},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0}}[r.key];if(!o){return}r.preventDefault();var a=this._markers[d.navigateToMarkerIndex(o,n,t)];if(a){i.default.findDOMNode(a).focus()}}},{key:"handleAnswerChoicesChangeForMarker",value:function e(t,r){var n=this.props,o=n.choices,a=n.markers,i=n.multipleAnswers;var s=o.filter(function(e,t){return r[t]});this.handleMarkerChange(t,b({},a[t],{selected:s}));if(!i){this.dismissMarkerPopup()}}},{key:"renderAnswerChoicesForMarker",value:function e(r,t){var n=this;var o=this.props,a=o.choices,i=o.multipleAnswers;var s=t.selected;return c.createElement("div",{className:(0,u.default)("perseus-label-image-widget-answer-choices",(0,l.css)(M.scrollableChoices))},c.createElement(v.default,{choices:a.map(function(e){return{content:e,checked:s?s.includes(e):false}}),multipleSelect:i,onChange:function e(t){return n.handleAnswerChoicesChangeForMarker(r,t)},ref:function e(t){return n._answerChoices=t}}))}},{key:"renderMarkers",value:function e(){var i=this;var t=this.props,r=t.markers,s=t.questionCompleted;var n=this.state,l=n.selectedMarkerIndex,u=n.markersInteracted;return r.map(function(t,r){var e=d.gradeMarker(t);var n=c.createElement(g.default,y({},t,{showCorrectness:s&&e.hasAnswers&&e.isCorrect?"correct":t.showCorrectness,showSelected:r===l,showPulsate:!u,key:"".concat(t.x,".").concat(t.y),onClick:function e(t){return i.handleMarkerClick(r,t)},onKeyDown:function e(t){return i.handleMarkerKeyDown(r,t)},ref:function e(t){return i._markers[r]=t}}));if(r!==l){return n}var o=window.matchMedia(f.default.xsOrSmaller.replace("@media ","")).matches;var a;if(o){a=t.y>50?"top":"bottom"}else{a={left:"right",top:"bottom",right:"left",bottom:"top",center:"top"}[d.imageSideForMarkerPosition(t.x,t.y)]}return c.createElement(p.Popover,{content:function e(){return c.createElement(p.PopoverContentCore,{style:M.choicesPopover},i.renderAnswerChoicesForMarker(r,t))},placement:a,opened:true,key:"".concat(t.x,".").concat(t.y),ref:function e(t){return i._selectedMarkerPopup=t}},n)})}},{key:"renderInstructions",value:function e(){var t=this.props,r=t.apiOptions.isMobile,n=t.choices,o=t.multipleAnswers,a=t.hideChoicesFromInstructions;var i=r?o?i18n._("Tap each dot on the image to select all answers that apply."):i18n._("Tap each dot on the image to select an answer."):o?i18n._("Click each dot on the image to select all answers that apply."):i18n._("Click each dot on the image to select an answer.");var s=i18n._("Choices:");return c.createElement("div",{className:(0,u.default)("perseus-label-image-widget-instructions",(0,l.css)(M.instructions))},c.createElement("div",{className:(0,l.css)(M.instructionsCaption)},i," ",!a&&s),!a&&c.createElement("div",{className:(0,l.css)(M.instructionsChoices)},n.map(function(e,t){return c.createElement("div",{className:(0,l.css)(M.instructionsChoice),key:t},c.createElement(h.default,{content:e}))})))}},{key:"render",value:function e(){var t=this.props,r=t.imageAlt,n=t.imageUrl,o=t.imageWidth,a=t.imageHeight;var i=this.state.selectedMarkerIndex;return c.createElement("div",null,this.renderInstructions(),c.createElement("div",{className:(0,l.css)(M.markersCanvas),style:{maxWidth:o,maxHeight:a}},c.createElement("div",{className:(0,l.css)(M.imageContainer,i!==-1&&M.imageInteractionDisabled)},c.createElement(m.default.Consumer,null,function(e){var t=e.setAssetStatus;return c.createElement(s.default,{alt:r,src:n,width:o,height:a,setAssetStatus:t})})),this.renderMarkers()))}}]);return d}(c.Component);var M=l.StyleSheet.create({instructions:{paddingBottom:16},instructionsCaption:b({},n.typography.bodyXsmallBold,{paddingBottom:16}),instructionsChoices:{display:"flex",flexWrap:"wrap",margin:"-8px 0"},instructionsChoice:{display:"flex",alignItems:"center",margin:"8px 0",":not(:last-child)":{"::after":{content:"''",display:"inline-block",position:"relative",width:2,height:2,marginLeft:5,marginRight:5,background:"rgba(33, 36, 44, 0.32)",borderRadius:2}}},markersCanvas:{position:"relative"},imageContainer:{display:"flex"},imageInteractionDisabled:{pointerEvents:"none"},scrollableChoices:S({paddingTop:8,paddingBottom:8},f.default.xsOrSmaller,{maxHeight:250,overflowY:"auto"}),choicesPopover:{padding:0}});e.exports={name:"label-image",displayName:"Label Image",widget:T,accessible:true,isLintable:true}},bjk2:function(e,t,r){"use strict";r("ma9I");r("2B1R");r("5DmW");r("NBAS");var n=a(r("q1tI"));var o=r("vwLt");function a(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function l(e,t,r){if(t)s(e.prototype,t);if(r)s(e,r);return e}function u(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return p(e)}function c(e){c=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return c(e)}function p(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return h(e,t)}function d(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var v=r("17x9");var g=r("i8i4");var _=r("F/us");var m=r("j8wP").Options;var y=function(e){f(a,e);function a(){var e;var t;i(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++){n[o]=arguments[o]}t=u(this,(e=c(a)).call.apply(e,[this].concat(n)));d(p(t),"focus",function(){g.findDOMNode(p(t)).focus();return true});d(p(t),"_handleChangeEvent",function(e){t._handleChange(parseInt(e.target.value))});d(p(t),"_handleChange",function(e){t.props.trackInteraction();t.props.onChange({selected:e})});d(p(t),"getUserInput",function(){return{value:t.props.selected}});d(p(t),"simpleValidate",function(e){return a.validate(t.getUserInput(),e)});return t}l(a,[{key:"render",value:function e(){return n.createElement("div",{onClick:function e(t){t.stopPropagation()},onTouchStart:function e(t){t.stopPropagation()}},n.createElement(o.SingleSelect,{onChange:this._handleChange,selectedValue:this.props.selected,disabled:this.props.apiOptions.readOnly},n.createElement(o.OptionItem,{value:0,disabled:true,label:this.props.placeholder}),this.props.choices.map(function(e,t){return n.createElement(o.OptionItem,{key:""+(t+1),value:t+1,label:e})})))}}]);return a}(n.Component);d(y,"propTypes",{apiOptions:m.propTypes,choices:v.arrayOf(v.string),onChange:v.func.isRequired,placeholder:v.string,selected:v.number,trackInteraction:v.func.isRequired});d(y,"defaultProps",{choices:[],selected:0,placeholder:"",apiOptions:m.defaults});_.extend(y,{validate:function e(t,r){var n=t.value;if(n===0){return{type:"invalid",message:null}}else{var o=r.choices[n-1].correct;return{type:"points",earned:o?1:0,total:1,message:null}}}});var b=function e(t){return{placeholder:t.placeholder,choices:_.map(t.choices,function(e){return e.content})}};e.exports={name:"dropdown",displayName:"Drop down",defaultAlignment:"inline-block",accessible:true,widget:y,transform:b}},bxxM:function(e,t,r){"use strict";e.exports=[r("h1Z3"),r("Jxul"),r("bjk2"),r("vUnj"),r("P++F"),r("GbkG"),r("fYWP"),r("VO3A"),r("/Qgg"),r("zyiX"),r("y1hP"),r("Voua"),r("VWbw"),r("bTcU"),r("SrcR"),r("k1y+"),r("j+Ew"),r("w4kA"),r("1I17"),r("qRYE"),r("h/tm"),r("P76s"),r("z875"),r("RY23"),r("ipxt"),r("YXfq"),r("BCuI"),r("7O7Y"),r("jDkz"),r("eCzM"),r("FGwj"),r("K/mI"),r("dWq9")]},czma:function(e,t,r){"use strict";r("ma9I");r("5DmW");r("NBAS");var i=n(r("q1tI"));function n(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function l(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);return e}function u(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return p(e)}function c(e){c=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return c(e)}function p(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)a(e,t)}function a(e,t){a=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return a(e,t)}function h(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var d=function(e){f(a,e);function a(){var e;var t;s(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++){n[o]=arguments[o]}t=u(this,(e=c(a)).call.apply(e,[this].concat(n)));h(p(t),"state",{mouseState:"up",trackedSelection:null});h(p(t),"_handleSelectionChange",function(){t._updateTrackedSelection(t.props.buildHighlight);if(t.state.mouseState==="down"){t.setState({mouseState:"down-and-selecting"})}});h(p(t),"_handleMouseDown",function(){t.setState({mouseState:"down"})});h(p(t),"_handleMouseUp",function(){t.setState({mouseState:"up"})});return t}l(a,[{key:"componentDidMount",value:function e(){this._updateListeners(false,this.props.enabled)}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){if(this.props.buildHighlight!==t.buildHighlight){this._updateTrackedSelection(t.buildHighlight)}this._updateListeners(this.props.enabled,t.enabled)}},{key:"componentWillUnmount",value:function e(){this._updateListeners(this.props.enabled,false)}},{key:"_updateListeners",value:function e(t,r){if(!t&&r){window.addEventListener("mousedown",this._handleMouseDown);window.addEventListener("mouseup",this._handleMouseUp);document.addEventListener("selectionchange",this._handleSelectionChange)}else if(t&&!r){window.removeEventListener("mousedown",this._handleMouseDown);window.removeEventListener("mouseup",this._handleMouseUp);document.removeEventListener("selectionchange",this._handleSelectionChange);this.setState({mouseState:"up",trackedSelection:null})}}},{key:"_computeFocusAndRange",value:function e(){var t=document.getSelection();if(!t||t.rangeCount===0){return null}var r=t.getRangeAt(0);if(r.collapsed){return null}var n=t.focusNode;var o=t.focusOffset;return{focusNode:n,focusOffset:o,range:r}}},{key:"_computeTrackedSelection",value:function e(t){var r=this._computeFocusAndRange();if(!r){return null}var n=r.focusNode,o=r.focusOffset,a=r.range;var i=t(a);if(!i){return null}return{focusNode:n,focusOffset:o,proposedHighlight:i}}},{key:"_updateTrackedSelection",value:function e(t){var r=this._computeTrackedSelection(t);this.setState({trackedSelection:r})}},{key:"render",value:function e(){var t=this.state,r=t.mouseState,n=t.trackedSelection;var o=r==="down-and-selecting";return this.props.children?i.createElement("div",null,this.props.children(n,o)):null}}]);return a}(i.PureComponent);e.exports=d},dWq9:function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("5DmW");r("NBAS");r("UxlC");r("FZtP");var o=a(r("q1tI"));var i=r("JimW");var s=n(r("Q8Wn"));var l=r("qRKg");function n(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function u(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){y(t,e,r[e])})}return t}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function f(e,t,r){if(t)p(e.prototype,t);if(r)p(e,r);return e}function h(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return v(e)}function d(e){d=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return d(e)}function v(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)m(e,t)}function m(e,t){m=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return m(e,t)}function y(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var b=r("17x9");var _=r("F/us");var O=r("+jAD");var w=r("WCF/");var i18n=r("HEOz");var P=1280;var k=720;var x="{host}/embed_video?slug={slug}"+"&internal_video_only=1";var E=/^https?:\/\//;var C=/(khanacademy\.org|localhost)/;var S=function(e){g(a,e);function a(){var e;var n;c(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++){r[o]=arguments[o]}n=h(this,(e=d(a)).call.apply(e,[this].concat(r)));y(v(n),"getUserInput",function(){return null});y(v(n),"simpleValidate",function(e){return a.validate(null,e)});y(v(n),"change",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return O.change.apply(v(n),t)});return n}f(a,[{key:"render",value:function e(){var t=this.props.location;if(!t){return o.createElement("div",null)}var r;if(E.test(t)){r=t}else{r=x.replace("{slug}",t);var n="https://www.khanacademy.org";if(C.test(s.default.host)){n="".concat(s.default.protocol,"//").concat(s.default.host)}r=r.replace("{host}",n)}return o.createElement(w,{width:P,height:k,key:t+this.props.alignment},o.createElement(i.View,{style:l.srOnly},i18n._("Khan Academy video wrapper")),o.createElement("iframe",{className:"perseus-video-widget",sandbox:"allow-same-origin allow-scripts",width:P,height:k,src:r,allowFullScreen:true}))}}]);return a}(o.Component);y(S,"propTypes",u({},O.propTypes,{alignment:b.string,location:b.string}));_.extend(S,{validate:function e(t,r){return{type:"points",earned:0,total:0,message:null}}});e.exports={name:"video",displayName:"Video",defaultAlignment:"block",supportedAlignments:["block","float-left","float-right","full-width"],widget:S}},e46u:function(e,t,r){"use strict";r("pNMO");r("4Brf");r("ma9I");r("TeQF");r("zKZe");r("5DmW");r("NBAS");r("07d7");r("FZtP");var u=o(r("q1tI"));var c=n(r("wa3X"));var p=n(r("Pwnf"));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function f(){f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};return f.apply(this,arguments)}function h(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){y(t,e,r[e])})}return t}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}function l(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return d(e)}function d(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function v(e){v=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return v(e)}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)m(e,t)}function m(e,t){m=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return m(e,t)}function y(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var b=r("17x9");var i18n=r("HEOz");var O=r("j8wP").Options;var w=r("APgo");var P=r("/4Qb"),k=P.iconStar,x=P.iconTryAgain;var E=r("UcaO"),C=E.phoneMargin,S=E.negativePhoneMargin;var T={HIDDEN:Symbol("HIDDEN"),ACTIVE:Symbol("ACTIVE"),INACTIVE:Symbol("INACTIVE"),INCORRECT:Symbol("INCORRECT"),CORRECT:Symbol("CORRECT")};var M=function(e){g(t,e);function t(){a(this,t);return l(this,v(t).apply(this,arguments))}s(t,[{key:"render",value:function e(){var t=this.props,r=t.apiOptions,n=t.answerBarState,o=t.onCheckAnswer,a=t.onNextQuestion;var i=h({},I.answerBar,{backgroundColor:n===T.CORRECT?p.default.offWhite:"white",justifyContent:n===T.CORRECT&&!a?"center":"space-between"});var s=n===T.INCORRECT?u.createElement("span",{style:I.text},u.createElement("span",{style:I.tryAgainIcon},u.createElement(w,x)),u.createElement("span",{style:{marginLeft:8}},i18n._("Keep trying"))):u.createElement("span",null);if(n!==T.CORRECT){var l=n===T.INCORRECT?i18n._("Try again"):i18n._("Check");return u.createElement("div",{style:i},s,u.createElement(c.default,{disabled:r.readOnly||n!==T.ACTIVE,onClick:o},l))}else{return u.createElement("div",{style:i},u.createElement("span",{style:I.text},u.createElement("span",{style:{fontSize:28,color:p.default.green}},u.createElement(w,f({},k,{style:{marginBottom:5}}))),u.createElement("span",{style:{marginLeft:8}},i18n._("Correct!"))),a&&u.createElement(c.default,{onClick:a},i18n._("Next question")))}}}]);return t}(u.Component);y(M,"propTypes",{answerBarState:b.any.isRequired,apiOptions:O.propTypes,onCheckAnswer:b.func.isRequired,onNextQuestion:b.func});var j=17;var I={answerBar:{display:"flex",alignItems:"center",height:68,marginLeft:S,marginRight:S,marginBottom:S,marginTop:C,paddingLeft:C,paddingRight:10,borderTop:"1px solid ".concat(p.default.offBlack50)},tryAgainIcon:{fontSize:28,color:"#63D9EA",transform:"scale(-1,1) rotate(-268deg)"},text:{display:"flex",flexDirection:"row",alignItems:"center",fontWeight:"bold",fontSize:j}};M.ANSWER_BAR_STATES=T;e.exports=M},eCzM:function(e,t,r){"use strict";r("ma9I");r("TeQF");r("2B1R");r("+2oP");r("pDQq");r("zKZe");r("5DmW");r("NBAS");var l=n(r("q1tI"));function n(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function u(){u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};return u.apply(this,arguments)}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function i(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);return e}function s(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return p(e)}function c(e){c=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return c(e)}function p(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return h(e,t)}function d(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var v=r("17x9");var g=r("i8i4");var _=r("F/us");var m=r("7xiW");var y=r("eMwK");var b=r("Atlv");var O=r("uBl0");var w=r("reBI").propTypes.keypadElementPropType;var P=r("j8wP").Options;var k=r("7BBF");var x=r("zahm"),E=x.linterContextProps,C=x.linterContextDefault;var S=r("p8fL").assert;var T=function e(t,r){return[""+t,""+r]};var M=function e(){return T(0,0)};var j=function e(t){S(_.isArray(t)&&t.length===2);return+t[0]};var I=function e(t){S(_.isArray(t)&&t.length===2);return+t[1]};var N=function e(t){var r=j(t);var n=I(t);return"answer"+r+","+n};var A=function(e){f(o,e);function o(){var e;var i;a(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}i=s(this,(e=c(o)).call.apply(e,[this].concat(r)));d(p(i),"_getRows",function(){return i.props.answers.length});d(p(i),"_getColumns",function(){return i.props.answers[0].length});d(p(i),"getUserInput",function(){return _.map(i.props.answers,_.clone)});d(p(i),"onValueChange",function(e,t,r){var n=_.map(i.props.answers,_.clone);n[e][t]=r.target?r.target.value:r;i.props.onChange({answers:n});i.props.trackInteraction()});d(p(i),"onHeaderChange",function(e,t){var r=i.props.headers.slice();r[e]=t.content;i.props.onChange({headers:r})});d(p(i),"simpleValidate",function(e){return o.validate(i.getUserInput(),e)});d(p(i),"_handleFocus",function(e){i.props.onFocus(e)});d(p(i),"_handleBlur",function(e){i.props.onBlur(e)});d(p(i),"focus",function(){i.focusInputPath(M());return true});d(p(i),"focusInputPath",function(e){var t=N(e);var r=i.refs[t];if(i.props.apiOptions.customKeypad){r.focus()}else if(i.props.apiOptions.staticRender){r.focus()}else{g.findDOMNode(r).focus()}});d(p(i),"blurInputPath",function(e){var t=N(e);var r=i.refs[t];if(i.props.apiOptions.customKeypad){r.blur()}else if(i.props.apiOptions.staticRender){r.blur()}else{g.findDOMNode(r).blur()}});d(p(i),"getDOMNodeForPath",function(e){var t=N(e);return g.findDOMNode(i.refs[t])});d(p(i),"getInputPaths",function(){var e=i._getRows();var t=i._getColumns();var n=[];_(e).times(function(r){_(t).times(function(e){var t=T(r,e);n.push(t)})});return n});d(p(i),"getGrammarTypeForPath",function(e){return"number"});d(p(i),"setInputValue",function(e,t,r){var n=j(e);var o=I(e);var a=_.map(i.props.answers,_.clone);a[n][o]=t;i.props.onChange({answers:a},r)});return i}i(o,[{key:"render",value:function e(){var r=this;var t=this._getRows();var n=this._getColumns();var o=this.props.headers;var a;var i;var s={};if(this.props.apiOptions.customKeypad){a=y;i={width:80};s.keypadElement=this.props.keypadElement}else if(this.props.apiOptions.staticRender){a=m;i={}}else{a="input";i={}}return l.createElement("table",{className:"perseus-widget-table-of-values non-markdown"},l.createElement("thead",null,l.createElement("tr",null,_.map(o,function(e,t){if(r.props.editableHeaders){return l.createElement("th",{key:t},l.createElement(r.props.Editor,{ref:"columnHeader"+t,apiOptions:r.props.apiOptions,content:e,widgetEnabled:false,onChange:_.partial(r.onHeaderChange,t)}))}else{return l.createElement("th",{key:t},l.createElement(b,{content:e,linterContext:r.props.linterContext}))}}))),l.createElement("tbody",null,_(t).times(function(t){return l.createElement("tr",{key:t},_(n).times(function(e){return l.createElement("td",{key:e},l.createElement(a,u({ref:N(T(t,e)),type:"text",value:r.props.answers[t][e],disabled:r.props.apiOptions.readOnly,onFocus:_.partial(r._handleFocus,T(t,e)),onBlur:_.partial(r._handleBlur,T(t,e)),onChange:_.partial(r.onValueChange,t,e),style:i},s)))}))})))}}]);return o}(l.Component);d(A,"propTypes",{answers:v.arrayOf(v.arrayOf(v.string)),editableHeaders:v.bool,Editor:v.func,headers:v.arrayOf(v.string),keypadElement:w,trackInteraction:v.func.isRequired,linterContext:E});d(A,"defaultProps",function(){var e=4;var t=1;var r=_(e).times(function(){return O.stringArrayOfSize(t)});return{apiOptions:P.defaults,headers:[""],editableHeaders:false,rows:e,columns:t,answers:r,linterContext:C}}());_.extend(A,{validate:function e(t,r){var n=function e(t){return _.filter(t,function(e){return _.some(e,_.identity)})};var o=n(r.answers);var i=n(t);var a=_.some(i,function(e){return _.some(e,function(e){return e===""})});if(a||!i.length){return{type:"invalid",message:null}}if(i.length!==o.length){return{type:"points",earned:0,total:1,message:null}}var s=k.number.createValidatorFunctional;var l=null;var u=_.every(o,function(a){var e;for(e=0;e<i.length;e++){var t=i[e];var r=_.every(t,function(e,t){var r=a[t];var n=s(r,{simplify:true});var o=n(e);if(o.message){l=o.message}return o.correct});if(r){i.splice(e,1);return true}}return false});return{type:"points",earned:u?1:0,total:1,message:l}}});var D=function e(t){var r=t.answers.length;var n=t.answers[0].length;var o=_(r).times(function(){return O.stringArrayOfSize(n)});return _.extend({},t,{answers:o})};e.exports={name:"table",displayName:"Table of values",accessible:true,widget:A,transform:D,hidden:true,isLintable:true}},fQFx:function(e,t,r){"use strict";r("5DmW");r("NBAS");var o=l(r("q1tI"));var a=r("mR6N");var i=r("6OHE");var u=r("La43");var s=n(r("EIXS"));function n(e){return e&&e.__esModule?e:{default:e}}function l(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function f(e,t,r){if(t)p(e.prototype,t);if(r)p(e,r);return e}function h(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return d(e)}function d(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function v(e){v=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return v(e)}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)m(e,t)}function m(e,t){m=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return m(e,t)}var y=function(e){g(t,e);function t(){c(this,t);return h(this,v(t).apply(this,arguments))}f(t,[{key:"componentDidUpdate",value:function e(t){if(this.props.focusNode!==t.focusNode||this.props.focusOffset!==t.focusOffset||this.props.offsetParent!==t.offsetParent){this._tooltip&&this._tooltip.remeasure()}}},{key:"_getFocusRect",value:function e(){var t=this.props,r=t.focusNode,n=t.focusOffset,o=t.offsetParent;var a=document.createRange();a.setStart(r,n);a.setEnd(r,n);var i=a.getClientRects()[0];if(!i){console.warn("[Highlighting] Known bug: Could not determine the focus "+'position, so did not show an "Add Highlight" tooltip. '+"https://app.asana.com/0/329800276300868/413878480039713 "+"(see also /r/asana-links)");return null}var s=o.getBoundingClientRect();var l=(0,u.getRelativeRect)(i,s);return l}},{key:"render",value:function e(){var r=this;var t=this._getFocusRect();if(!t){return null}var n=o.createElement("div",{className:(0,a.css)(b.tooltipLabel)},this.props.label);return o.createElement(s.default,{content:n,color:i.colors.kaBlue,inverted:true,onClick:this.props.onClick,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,toggleOnHover:false,showOnMount:true,ref:function e(t){return r._tooltip=t}},o.createElement("div",{style:{position:"absolute",left:t.left,top:t.top,height:t.height}}))}}]);return t}(o.PureComponent);var b=a.StyleSheet.create({tooltipLabel:{userSelect:"none"}});e.exports=y},fYWP:function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("zKZe");r("5DmW");r("NBAS");r("FZtP");var p=o(r("q1tI"));var f=n(r("wa3X"));var h=r("qRKg");function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function d(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){y(t,e,r[e])})}return t}function v(){v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};return v.apply(this,arguments)}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)a(e.prototype,t);if(r)a(e,r);return e}function l(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return c(e)}function u(e){u=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return u(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)m(e,t)}function m(e,t){m=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return m(e,t)}function y(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var b=r("TSYQ");var O=r("17x9");var _=r("F/us");var i18n=r("HEOz");var w=r("j8wP").Options;var P=r("+jAD");var k=r("/4Qb"),x=k.iconOk,E=k.iconRemove;var C=r("APgo");var S=r("Atlv");var T=r("e46u");var M=r("UcaO"),j=M.gray76,I=M.phoneMargin,N=M.negativePhoneMargin,A=M.tableBackgroundAccent,D=M.kaGreen;var R=r("mR6N"),F=R.StyleSheet,L=R.css;var B=r("zahm"),U=B.linterContextProps,q=B.linterContextDefault;var H={ungraded:"ungraded",correct:"correct",incorrect:"incorrect",invalid:"invalid"};var z=T.ANSWER_BAR_STATES;var W=function e(t,r){switch(t){case z.HIDDEN:return r?z.ACTIVE:t;case z.ACTIVE:return!r?z.INACTIVE:t;case z.INACTIVE:return r?z.ACTIVE:t;case z.INCORRECT:return r?z.ACTIVE:z.INACTIVE;default:return t}};var G=i18n._("We couldn't grade your answer.");var V=i18n._("It looks like you left something blank or ")+i18n._("entered in an invalid answer.");var Y=function(e){g(a,e);function a(){var e;var o;i(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}o=l(this,(e=u(a)).call.apply(e,[this].concat(r)));y(c(o),"state",{status:H.ungraded,showHint:false,message:"",answerBarState:z.HIDDEN});y(c(o),"change",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return P.change.apply(c(o),t)});y(c(o),"_onInteractWithWidget",function(e){o.setState({status:H.ungraded,message:""});if(o.refs.renderer){o.change("widgets",o.props.widgets);var t=o.refs.renderer.emptyWidgets();var r=t.length===0;var n=o.state.answerBarState;o.setState({answerBarState:W(n,r)})}});y(c(o),"_checkAnswer",function(){o.refs.renderer.showRationalesForCurrentlySelectedChoices();var e=o.refs.renderer.score();var t;var r;if(e.type==="points"){t=e.total===e.earned?H.correct:H.incorrect;r=e.message||""}else{t=H.invalid;r=e.message?"".concat(G," ").concat(e.message):"".concat(G," ").concat(V)}o.setState({status:t,message:r,answerBarState:t==="correct"?z.CORRECT:z.INCORRECT});o.props.trackInteraction({status:t})});y(c(o),"getInputPaths",function(){return o.refs.renderer.getInputPaths()});y(c(o),"setInputValue",function(e,t,r){return o.refs.renderer.setInputValue(e,t,r)});y(c(o),"getAcceptableFormatsForInputPath",function(e){return o.refs.renderer.getAcceptableFormatsForInputPath(e)});y(c(o),"focus",function(){return o.refs.renderer.focus()});y(c(o),"focusInputPath",function(e){o.refs.renderer.focusPath(e)});y(c(o),"blurInputPath",function(e){o.refs.renderer.blurPath(e)});return o}s(a,[{key:"shouldComponentUpdate",value:function e(t,r){return t!==this.props||r!==this.state}},{key:"render",value:function e(){var n=this,t;var r=_.extend({},w.defaults,this.props.apiOptions,{onFocusChange:function e(t,r){if(r){n.props.onBlur(r)}if(t){n.props.onFocus(t)}}});var o=null;var a=null;if(this.state.status===H.correct){a=p.createElement(C,v({},x,{style:{color:"#526f03"}}));o=i18n._("Correct")}else if(this.state.status===H.incorrect){a=p.createElement(C,v({},E,{style:{color:"#ff5454"}}));o=i18n._("Incorrect")}var i=this.props.inGradedGroupSet?L(K.gradedGroupInSet):L(K.gradedGroup);var s=b((t={},y(t,i,r.isMobile),y(t,"perseus-graded-group",true),y(t,"answer-correct",r.isMobile?false:this.state.status===H.correct),y(t,"answer-incorrect",r.isMobile?false:this.state.status===H.incorrect),t));var l=this.state.answerBarState;var u=l===z.CORRECT;var c=r.readOnly||r.isMobile&&u;return p.createElement("div",{className:s},!!this.props.title&&p.createElement("div",{className:L(K.title)},this.props.title),p.createElement(S,v({},this.props,{ref:"renderer",apiOptions:d({},r,{readOnly:c}),onInteractWithWidget:this._onInteractWithWidget,linterContext:this.props.linterContext})),!r.isMobile&&a&&p.createElement("div",{className:"group-icon"},a),!r.isMobile&&o&&p.createElement("div",{className:L(h.srOnly),role:"alert"},o),!r.isMobile&&p.createElement("p",null,this.state.message),!r.isMobile&&p.createElement(f.default,{kind:"secondary",disabled:this.props.apiOptions.readOnly,onClick:this._checkAnswer},i18n._("Check")),!r.isMobile&&u&&this.props.onNextQuestion&&p.createElement(f.default,{kind:"secondary",disabled:this.props.apiOptions.readOnly,onClick:this.props.onNextQuestion,style:{marginLeft:5}},i18n._("Next question")),this.props.hint&&this.props.hint.content&&(this.state.showHint?p.createElement("div",null,p.createElement("button",{tabIndex:"0",className:L(K.explanationTitle),onClick:function e(){return n.setState({showHint:false})},onKeyPress:function e(t){t.preventDefault();n.setState({showHint:false})}},i18n._("Hide explanation")),p.createElement(S,v({},this.props.hint,{ref:"hints-renderer",apiOptions:r,linterContext:this.props.linterContext}))):p.createElement("button",{tabIndex:"0",onClick:function e(){return n.setState({showHint:true})},onKeyPress:function e(t){t.preventDefault();n.setState({showHint:true})},className:L(K.showHintLink)},i18n._("Explain"))),r.isMobile&&l!==z.HIDDEN&&p.createElement(T,{apiOptions:r,answerBarState:l,onCheckAnswer:this._checkAnswer,onNextQuestion:this.props.onNextQuestion}))}}]);return a}(p.Component);y(Y,"propTypes",d({},P.propTypes,{apiOptions:w.propTypes,content:O.string,hasHint:O.bool,hint:O.object,images:O.object,inGradedGroupSet:O.bool,onBlur:O.func,onFocus:O.func,onNextQuestion:O.func,title:O.string,trackInteraction:O.func.isRequired,widgets:O.object,linterContext:U}));y(Y,"defaultProps",{title:"",content:"",widgets:{},images:{},hint:null,hasHint:false,linterContext:q});var X=function e(t,r){return _.extend({},t,r(t))};e.exports={name:"graded-group",displayName:"Graded group (articles only)",widget:Y,traverseChildWidgets:X,hidden:false,tracking:"all",isLintable:true};var K=F.create({gradedGroupInSet:{marginLeft:0,paddingLeft:0},gradedGroup:{borderTop:"1px solid ".concat(j),borderBottom:"1px solid ".concat(j),backgroundColor:A,marginLeft:N,marginRight:N,paddingBottom:I,paddingLeft:I,paddingRight:I,paddingTop:10,width:"auto"},showHintLink:{backgroundColor:"unset",fontSize:14,padding:0,border:"none",marginTop:20,color:D,cursor:"pointer",display:"block",clear:"both"},explanationTitle:{backgroundColor:"unset",marginTop:20,color:D,marginBottom:10,cursor:"pointer",fontSize:14,padding:0,border:"none",display:"block",clear:"both"},title:{fontSize:12,color:j,textTransform:"uppercase",marginBottom:11,letterSpacing:.8}})},"h/OD":function(e,t,r){"use strict";r("5DmW");r("NBAS");var n=o(r("q1tI"));function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}function l(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return u(e)}function u(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function c(e){c=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return c(e)}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)f(e,t)}function f(e,t){f=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return f(e,t)}var h=function(e){p(t,e);function t(){a(this,t);return l(this,c(t).apply(this,arguments))}s(t,[{key:"componentDidMount",value:function e(){this._sendWordsUpdate()}},{key:"componentDidUpdate",value:function e(){this._sendWordsUpdate()}},{key:"_sendWordsUpdate",value:function e(){this.props.onWordsUpdate(this._getWordRanges())}},{key:"_getWordRanges",value:function e(){var t=this._container;if(!t){throw new Error("invariant violation: `this._container` is not defined, but "+"this method is only called after mount/update")}var r=t.ownerDocument.createTreeWalker(t,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,function(){return NodeFilter.FILTER_ACCEPT},false);var n=[];var o=null;while(r.nextNode()){var a=r.currentNode;if(a.nodeType===Node.ELEMENT_NODE){var i=a;if(getComputedStyle(i).display!=="inline"){o=null}}else if(a.nodeType===Node.TEXT_NODE){var s=a.nodeValue;var l=/\S+/g;var u=void 0;var c=null;while((u=l.exec(s))!==null){var p=u.index;var f=u.index+u[0].length;var h=void 0;if(p===0&&o){h=o;h.setEnd(a,f)}else{h=a.ownerDocument.createRange();h.setStart(a,p);h.setEnd(a,f);n.push(h)}if(f===s.length){c=h}}o=c}}return n}},{key:"render",value:function e(){var r=this;return n.createElement("div",{ref:function e(t){return r._container=t}},this.props.children)}}]);return t}(n.PureComponent);e.exports=h},"h/tm":function(e,t,r){"use strict";r("ma9I");r("2B1R");r("+2oP");r("pDQq");r("zKZe");r("NBAS");var u=n(r("q1tI"));function n(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function i(){i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};return i.apply(this,arguments)}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function l(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);return e}function c(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return p(e)}function p(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function h(e){h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return h(e)}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)a(e,t)}function a(e,t){a=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return a(e,t)}function d(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var v=r("17x9");var g=r("i8i4");var _=r("F/us");var m=r("e2gc");var y=r("Atlv");var b=r("uBl0");var O=r("j8wP").ClassNames;var w=r("zahm"),P=w.linterContextProps,k=w.linterContextDefault;var x=function(e){f(t,e);function t(){s(this,t);return c(this,h(t).apply(this,arguments))}l(t,[{key:"render",value:function e(){return u.createElement("div",{className:"card-wrap "+O.INTERACTIVE,style:{width:this.props.width}},u.createElement("div",{className:"card placeholder",style:{height:this.props.height}}))}}]);return t}(u.Component);d(x,"propTypes",{width:v.number.isRequired,height:v.number.isRequired});var E=function(e){f(t,e);function t(){s(this,t);return c(this,h(t).apply(this,arguments))}l(t,[{key:"render",value:function e(){return u.createElement("div",{className:"card-wrap "+O.INTERACTIVE},u.createElement("div",{className:"card drag-hint"}))}}]);return t}(u.Component);var C=v.shape({left:v.number,top:v.number});var S=function(e){f(a,e);function a(){var e;var r;s(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++){n[o]=arguments[o]}r=c(this,(e=h(a)).call.apply(e,[this].concat(n)));d(p(r),"state",{dragging:false});d(p(r),"bindMouseMoveUp",function(){r.mouseMoveUpBound=true;m(document).on("mousemove",r.onMouseMove);m(document).on("mouseup",r.onMouseUp)});d(p(r),"unbindMouseMoveUp",function(){r.mouseMoveUpBound=false;m(document).off("mousemove",r.onMouseMove);m(document).off("mouseup",r.onMouseUp)});d(p(r),"onMouseDown",function(e){e.preventDefault();var t=b.extractPointerLocation(e);if(t){r.setState({dragging:true});r.bindMouseMoveUp();r.props.onMouseDown&&r.props.onMouseDown(t,p(r))}});d(p(r),"onMouseMove",function(e){if(!r.state.dragging){return}e.preventDefault();var t=b.extractPointerLocation(e);if(t){r.props.onMouseMove&&r.props.onMouseMove(t)}});d(p(r),"onMouseUp",function(e){e.preventDefault();var t=b.extractPointerLocation(e);if(t){r.setState({dragging:false});r.unbindMouseMoveUp();r.props.onMouseUp&&r.props.onMouseUp(t)}});return r}l(a,[{key:"render",value:function e(){var t={};if(this.props.floating){t={position:"absolute",left:this.props.startOffset.left,top:this.props.startOffset.top}}if(this.props.width){t.width=this.props.width}var r=["card"];if(this.props.stack){r.push("stack")}if(this.props.floating&&!this.props.animating){r.push("dragging");t.left+=this.props.mouse.left-this.props.startMouse.left;t.top+=this.props.mouse.top-this.props.startMouse.top}var n=_.pick(this.props,"content");var o=this.props.animating?m.noop:this.onMouseDown;return u.createElement("div",{className:"card-wrap "+O.INTERACTIVE,style:t,onMouseDown:o,onTouchStart:o,onTouchEnd:this.onMouseUp,onTouchCancel:this.onMouseUp},u.createElement("div",{className:r.join(" ")},u.createElement(y,i({},n,{linterContext:this.props.linterContext}))))}},{key:"shouldComponentUpdate",value:function e(t,r){return this.props.floating||t.floating||this.props.content!==t.content||this.props.fakeRef!==t.fakeRef}},{key:"componentDidMount",value:function e(){this.mouseMoveUpBound=false;document.addEventListener("touchmove",this.onMouseMove,b.supportsPassiveEvents()?{passive:false}:false)}},{key:"componentDidUpdate",value:function e(t,r){if(this.props.animating&&!t.animating){var n=15*Math.sqrt(Math.sqrt(Math.pow(this.props.animateTo.left-this.props.startOffset.left,2)+Math.pow(this.props.animateTo.top-this.props.startOffset.top,2)));m(g.findDOMNode(this)).animate(this.props.animateTo,Math.max(n,1),this.props.onAnimationEnd)}}},{key:"componentWillUnmount",value:function e(){if(this.mouseMoveUpBound){console.warn("Removing an element with bound event handlers.");this.unbindMouseMoveUp();b.resetTouchHandlers()}document.removeEventListener("touchmove",this.onMouseMove)}}]);return a}(u.Component);d(S,"propTypes",{floating:v.bool.isRequired,animating:v.bool,width:v.number,stack:v.bool,onMouseDown:v.func,onMouseMove:v.func,onMouseUp:v.func,startMouse:C,startOffset:C,animateTo:C,onAnimationEnd:v.func,linterContext:P});d(S,"defaultProps",{stack:false,animating:false,linterContext:k});var T="normal",M="auto",j="horizontal",I="vertical";var N=function(e){f(o,e);function o(){var e;var f;s(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}f=c(this,(e=h(o)).call.apply(e,[this].concat(r)));d(p(f),"state",{current:[],dragging:false,placeholderIndex:null});d(p(f),"onClick",function(e,t,r,n){var o=m(g.findDOMNode(n));var a=f.state.current.slice();var i;var s=null;if(e==="current"){a.splice(t,1);i=f.state.current[t];s=t}else if(e==="bank"){i=f.props.options[t]}f.setState({current:a,dragging:true,placeholderIndex:s,dragKey:i.key,dragContent:i.content,dragWidth:o.width(),dragHeight:o.height(),grabPos:r,mousePos:r,offsetPos:o.position()})});d(p(f),"onRelease",function(e){var t=f.refs.dragging;if(t==null){return}var n=f.isCardInBank(t);var o=f.state.placeholderIndex;var r=function e(){var t=f.state.current.slice();if(!n){var r={content:f.state.dragContent,key:_.uniqueId("perseus_draggable_card_"),width:f.state.dragWidth};t.splice(o,0,r)}f.props.onChange({current:t});f.setState({current:t,dragging:false,placeholderIndex:null,animating:false});f.props.trackInteraction()};var a=m(g.findDOMNode(t)).position();var i=null;if(n){_.each(f.props.options,function(e,t){if(e.content===this.state.dragContent){var r=g.findDOMNode(this.refs["bank"+t]);i=m(r).position()}},p(f))}else if(f.refs.placeholder!=null){i=m(g.findDOMNode(f.refs.placeholder)).position()}if(i==null){r()}else{f.setState({offsetPos:a,animateTo:i,onAnimationEnd:r,animating:true,dragging:false})}});d(p(f),"onMouseMove",function(e){var t=f.refs.dragging;if(t==null){return}var r;if(f.isCardInBank(t)){r=null}else{r=f.findCorrectIndex(t,f.state.current)}f.setState({mousePos:e,placeholderIndex:r})});d(p(f),"findCorrectIndex",function(e,t){var r=f.props.layout===j;var n=m(g.findDOMNode(f.refs.dragList));var o=n.offset().left;var a=n.offset().top;var i=m(g.findDOMNode(e)).offset().left-o;var s=m(g.findDOMNode(e)).offset().top-a;var l=0;var u=0;var c=0;if(r){_.each(t,function(e,t){var r=g.findDOMNode(this.refs["sortable"+t]);var n=m(r).outerWidth(true);if(i>u+n/2){l+=1}u+=n},p(f))}else{_.each(t,function(e,t){var r=g.findDOMNode(this.refs["sortable"+t]);var n=m(r).outerHeight(true);if(s>c+n/2){l+=1}c+=n},p(f))}return l});d(p(f),"isCardInBank",function(e){if(e==null){return false}var t=f.props.layout===j,r=m(g.findDOMNode(e)),n=m(g.findDOMNode(f.refs.bank)),o=r.offset(),a=n.offset(),i=r.outerHeight(true),s=n.outerHeight(true),l=n.outerWidth(true),u=g.findDOMNode(f.refs.dragList),c=m(u).width(),p=r.outerWidth(true);if(t){return o.top+i/2<a.top+s}else{return o.left+p/2<a.left+l}});d(p(f),"getUserInput",function(){return{current:_.map(f.props.current,function(e){return e.content})}});d(p(f),"simpleValidate",function(e){return o.validate(f.getUserInput(),e)});return f}l(o,[{key:"UNSAFE_componentWillReceiveProps",value:function e(t){if(!_.isEqual(this.props.current,t.current)){this.setState({current:t.current})}}},{key:"render",value:function e(){var r=this;var t=this.state.dragging&&u.createElement(S,{ref:"dragging",floating:true,content:this.state.dragContent,startOffset:this.state.offsetPos,startMouse:this.state.grabPos,mouse:this.state.mousePos,width:this.state.dragWidth,onMouseUp:this.onRelease,onMouseMove:this.onMouseMove,key:this.state.dragKey||"draggingCard",linterContext:this.props.linterContext});var n=this.state.animating&&u.createElement(S,{floating:true,animating:true,content:this.state.dragContent,startOffset:this.state.offsetPos,width:this.state.dragWidth,animateTo:this.state.animateTo,onAnimationEnd:this.state.onAnimationEnd,key:this.state.dragKey||"draggingCard",linterContext:this.props.linterContext});var o=_.map(this.state.current,function(e,t){return u.createElement(S,{key:"sortableCard".concat(t),ref:"sortable"+t,fakeRef:"sortable"+t,floating:false,content:e.content,width:e.width,linterContext:this.props.linterContext,onMouseDown:this.state.animating?m.noop:this.onClick.bind(null,"current",t)})},this);if(this.state.placeholderIndex!=null){var a=u.createElement(x,{ref:"placeholder",width:this.state.dragWidth,height:this.state.dragHeight,key:"placeholder"});o.splice(this.state.placeholderIndex,0,a)}var i=o.length>0;o.push(t,n);var s=u.createElement("div",{className:"perseus-clearfix draggable-box"},!i&&u.createElement(E,null),u.createElement("div",{ref:"dragList"},o));var l=u.createElement("div",{ref:"bank",className:"bank perseus-clearfix"},_.map(this.props.options,function(e,t){return u.createElement(S,{ref:"bank"+t,floating:false,content:e.content,stack:true,key:t,linterContext:r.props.linterContext,onMouseDown:r.state.animating?m.noop:r.onClick.bind(null,"bank",t),onMouseMove:r.onMouseMove,onMouseUp:r.onRelease})},this));return u.createElement("div",{className:"draggy-boxy-thing orderer "+"height-"+this.props.height+" "+"layout-"+this.props.layout+" "+"above-scratchpad blank-background "+"perseus-clearfix "+O.INTERACTIVE,ref:"orderer"},l,s)}}]);return o}(u.Component);d(N,"propTypes",{correctOptions:v.array,current:v.array,height:v.oneOf([T,M]),layout:v.oneOf([j,I]),options:v.array,trackInteraction:v.func.isRequired,linterContext:P});d(N,"defaultProps",{current:[],options:[],correctOptions:[],height:T,layout:j,linterContext:k});_.extend(N,{validate:function e(t,r){if(t.current.length===0){return{type:"invalid",message:null}}var n=_.isEqual(t.current,_.pluck(r.correctOptions,"content"));return{type:"points",earned:n?1:0,total:1,message:null}}});e.exports={name:"orderer",displayName:"Orderer",widget:N,isLintable:true}},h1Z3:function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("4mDm");r("2B1R");r("5DmW");r("NBAS");r("07d7");r("FZtP");r("3bBZ");var l=n(r("q1tI"));function n(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function o(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){d(t,e,r[e])})}return t}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)a(e.prototype,t);if(r)a(e,r);return e}function u(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return p(e)}function c(e){c=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return c(e)}function p(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return h(e,t)}function d(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var v=r("mR6N"),g=v.StyleSheet,m=v.css;var y=r("17x9");var b=r("TSYQ");var O=r("+jAD");var w=r("fUCW");var _=r("F/us");var P=r("j8wP").ClassNames;var k=r("j8wP").Options;var x=r("/4Qb"),E=x.iconCircle,C=x.iconCircleThin;var S=r("APgo");var T=r("Atlv");var M=r("uBl0");var j=r("TBZ3");var I=r("MG0i");var N=r("zahm"),A=N.linterContextProps,D=N.linterContextDefault;var R=function(e){f(a,e);function a(){var e;var n;i(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++){r[o]=arguments[o]}n=u(this,(e=c(a)).call.apply(e,[this].concat(r)));d(p(n),"state",{uniqueId:_.uniqueId("perseus_radio_")});d(p(n),"change",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return O.change.apply(p(n),t)});d(p(n),"getUserInput",function(){return a.getUserInputFromProps(n.props)});d(p(n),"onChange",function(e,t){var r=_.clone(n.props.values);r[e]=t;n.change("values",r);n.props.trackInteraction()});d(p(n),"simpleValidate",function(e){return a.validate(n.getUserInput(),e)});return n}s(a,[{key:"render",value:function e(){var o=this;var a=this;var i=this.props.apiOptions.isMobile;var t=this.props.items.map(function(e,t){return[e,t]});if(this.props.randomizeItems){t=M.shuffle(t,this.props.problemNum)}var r=l.createElement("table",{className:"categorizer-table "+m(L.mobileTable)},l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",null," "),this.props.categories.map(function(e,t){return l.createElement("th",{className:m(L.header),key:t},l.createElement(T,{content:e,linterContext:o.props.linterContext}))}))),l.createElement("tbody",null,t.map(function(e){var t=e[0];var r=e[1];var n=a.state.uniqueId+"_"+r;return l.createElement("tr",{key:r},l.createElement("td",null,l.createElement(T,{content:t,linterContext:o.props.linterContext})),_.range(a.props.categories.length).map(function(e){var t=a.props.values[r]===e;return l.createElement("td",{className:"category "+m(L.cell,L.responsiveCell),key:e},l.createElement("div",{className:P.INTERACTIVE,onClick:o.onChange.bind(o,r,e)},i&&l.createElement("input",{type:"radio",name:n,className:m(I.responsiveInput,I.responsiveRadioInput),checked:t,onChange:o.onChange.bind(o,r,e),onClick:function e(t){return t.stopPropagation()}}),!i&&l.createElement("span",{className:m(L.responsiveSpan,L.radioSpan,t&&L.checkedRadioSpan,o.props.static&&t&&L.staticCheckedRadioSpan)},t?l.createElement(S,E):l.createElement(S,C))))}))})));var n=b({"categorizer-container":true,"static-mode":this.props.static});var s=this.props.apiOptions.isMobile?[L.fullBleedContainer]:[];return l.createElement("div",{className:n+" "+m.apply(void 0,s)},r)}}]);return a}(l.Component);d(R,"propTypes",o({},O.propTypes,{apiOptions:k.propTypes,categories:y.arrayOf(y.string),items:y.arrayOf(y.string),trackInteraction:y.func.isRequired,values:y.arrayOf(y.number),linterContext:A}));d(R,"defaultProps",{items:[],categories:[],values:[],linterContext:D});_.extend(R,{validate:function e(r,t){var n=true;var o=true;_.each(t.values,function(e,t){if(r.values[t]==null){n=false}if(r.values[t]!==e){o=false}});if(!n){return{type:"invalid",message:i18n._("Make sure you select something for every row.")}}return{type:"points",earned:o?1:0,total:1,message:null}},getUserInputFromProps:function e(t){return w.getUserInputFromProps(t)}});var F=16;var L=g.create({mobileTable:d({},j.smOrSmaller,{minWidth:"auto"}),fullBleedContainer:d({},j.mdOrSmaller,{marginLeft:-F,marginRight:-F,overflowX:"auto"}),header:{textAlign:"center",verticalAlign:"bottom"},cell:{textAlign:"center",padding:0,color:"#ccc",verticalAlign:"middle"},radioSpan:{fontSize:30,paddingRight:3,":hover":{color:"#999"}},checkedRadioSpan:{color:"#333"},staticCheckedRadioSpan:{color:"#888"}});e.exports={name:"categorizer",displayName:"Categorizer",widget:R,transform:function e(t){return _.pick(t,"items","categories","randomizeItems")},staticTransform:function e(t){return _.pick(t,"items","categories","values","randomizeItems")},isLintable:true}},iUos:function(e,t,r){"use strict";r("ma9I");r("2B1R");r("5DmW");r("NBAS");var n=o(r("q1tI"));function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)a(e.prototype,t);if(r)a(e,r);return e}function l(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return c(e)}function u(e){u=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return u(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)f(e,t)}function f(e,t){f=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return f(e,t)}function h(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var d=r("mR6N"),v=d.StyleSheet,g=d.css;var m=r("La43"),y=m.getClientRectsForTextInRange,b=m.getRelativePosition,O=m.getRelativeRect;var w=function(e){p(a,e);function a(){var e;var t;i(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++){n[o]=arguments[o]}t=l(this,(e=u(a)).call.apply(e,[this].concat(n)));h(c(t),"state",{cachedHighlightRects:t._computeRects(t.props),tooltipIsHovered:false});return t}s(a,[{key:"UNSAFE_componentWillReceiveProps",value:function e(t){if(this.props.highlight!==t.highlight||this.props.offsetParent!==t.offsetParent){this.setState({cachedHighlightRects:this._computeRects(t)})}}},{key:"_computeRects",value:function e(t){var r=t.highlight,n=t.offsetParent;var o=y(r.domRange);var a=n.getBoundingClientRect();var i=o.map(function(e){return O(e,a)});return i}},{key:"_rectIsHovered",value:function e(t,r){var n=b(r,t);return 0<=n.left&&n.left<t.width&&0<=n.top&&n.top<t.height}},{key:"isHovered",value:function e(t){var r=this;if(!t){return false}var n=this.props.offsetParent;var o=this.state.cachedHighlightRects;var a=n.getBoundingClientRect();var i=b(t,a);return o.some(function(e){return r._rectIsHovered(e,i)})}},{key:"render",value:function e(){var r=this;var t=this.state.cachedHighlightRects;return n.createElement("div",null,t.map(function(e,t){return n.createElement("div",{key:t,className:g(P.highlightRect),style:{position:"absolute",width:e.width,height:e.height,top:e.top,left:e.left,zIndex:r.props.zIndexes.belowContent}})}))}}]);return a}(n.PureComponent);var P=v.create({highlightRect:{background:"#fffabe"}});e.exports=w},ipxt:function(e,t,r){"use strict";r("ma9I");r("4mDm");r("2B1R");r("5DmW");r("NBAS");r("07d7");r("B6y2");r("5s+n");r("Rm1S");r("FZtP");r("3bBZ");var n=o(r("q1tI"));function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)i(e.prototype,t);if(r)i(e,r);return e}function l(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return E(e)}function u(e){u=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return u(e)}function E(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)p(e,t)}function p(e,t){p=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return p(e,t)}function f(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var h=r("17x9");var C=r("i8i4");var _=r("F/us");var S=r("e2gc");var d=r("j8wP").ClassNames;var v=r("uBl0").deepEq;var T=r("XwLL");var M=r("yfnS");var j=r("NT9k");var i18n=r("HEOz");var g=r("bHYm");var I=r("T2HF");var N="bar",A="line",D="pic",R="histogram",F="dotplot";var m={type:h.oneOf([N,A,D,R,F]),labels:h.arrayOf(h.string),categories:h.arrayOf(h.oneOfType([h.number,h.string])),scaleY:h.number,maxY:h.number,snapsPerLine:h.number,picSize:h.number,pixBoxHeight:h.number,picUrl:h.string,plotDimensions:h.arrayOf(h.number),labelInterval:h.number,starting:h.arrayOf(h.number),static:h.bool};var y=function(e){c(o,e);function o(){var e;var x;a(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}x=l(this,(e=u(o)).call.apply(e,[this].concat(r)));f(E(x),"state",{values:x.props.starting||[1],categoryHeights:{}});f(E(x),"DOT_PLOT_POINT_SIZE",function(){return x.props.apiOptions.isMobile?6:4});f(E(x),"DOT_PLOT_POINT_PADDING",function(){return 8});f(E(x),"DOT_TICK_POINT_SIZE",function(){return 2});f(E(x),"_isMounted",false);f(E(x),"setupGraphie",function(e){var t=E(x);t.shouldSetupGraphie=false;var r=C.findDOMNode(t.refs.graphieDiv);S(r).empty();var n=j.createGraphie(r);t.graphie=n;t.graphie.pics=[];t.graphie.dotTicks=[];var o=t.props.type===N,a=t.props.type===A,i=t.props.type===D,s=t.props.type===R,l=t.props.type===F;var u=i||l;var c={};var p=c;var f=x.props.apiOptions.isMobile;p.graph={lines:[],bars:[],points:[],dividers:[]};p.scaleY=t.props.scaleY;p.dimX=t.props.categories.length;var h=f?[288,336]:t.props.plotDimensions;if(a){p.dimX+=f?-.2:1}else if(s){p.barPad=0;p.barWidth=1}else if(o){p.barPad=f?.08:.15;p.barWidth=1-2*p.barPad;p.dimX+=(f?-2:2)*p.barPad}else if(u){p.picBoxHeight=t.props.picBoxHeight;p.picBoxWidthPx=h[0]/t.props.categories.length;var d=h[0]-p.dimX*p.picBoxWidthPx;p.picPad=d/(2*p.dimX+2);var v=p.picBoxWidthPx+2*p.picPad;p.picPad=p.picPad/v;p.picBoxWidth=p.picBoxWidthPx/v;p.dimX+=2*p.picPad}if(l){p.picBoxHeight=x.DOT_PLOT_POINT_SIZE()*2+x.DOT_PLOT_POINT_PADDING()}p.dimY=Math.ceil(t.props.maxY/p.scaleY)*p.scaleY;var g=25;if((o||a)&&f){g=t.props.labels[1].length!==0?17:11}if(l){g/=2}if(f&&u&&t.props.labels[1].length===0){g=0}var m=25;var y=25*3;if(f&&(o||u)){var b=Math.max.apply(Math,[0].concat(Object.values(t.state.categoryHeights)));if(b){var O=25;if(u){O+=10}y=O+b}}if(f){p.scale=[(h[0]-g*4)/p.dimX,(h[1]-(m+y))/p.dimY]}else{p.scale=_.map([p.dimX,p.dimY],function(e,t){return h[t]/e})}if(u){p.scale[1]=p.picBoxHeight/p.scaleY}g/=p.scale[0];m/=p.scale[1];y/=p.scale[1];n.init({range:[[-3*g,p.dimX+g],[-y,p.dimY+m]],scale:p.scale,isMobile:x.props.apiOptions.isMobile});n.addMouseLayer({allowScratchpad:true,setDrawingAreaAvailable:x.props.apiOptions.setDrawingAreaAvailable});if(!u){var w=f?p.scaleY:0;var P=function e(t){n.label([0,t],T.roundToApprox(t,2),"left",true);n.style({stroke:f?"#e9ebec":"#000",strokeWidth:1,opacity:f?1:.3},function(){n.line([0,t],[p.dimX,t])})};for(var k=w;k<=p.dimY;k+=p.scaleY){P(k)}}if((o||a)&&f){t.graphie.dragPrompt=n.label([p.dimX/2,p.dimY/2],i18n._("Drag handles to make graph"),"center",false).css("font-weight","bold").css("color",M.KA_GREEN).css("display","none")}t.setupCategories(c);if(u&&f){t.graphie.dotPrompt=n.label([p.dimX/2,p.dimY/2],i18n._("Tap to add points"),"center",false).css("font-weight","bold").css("color",M.KA_GREEN).css("display","none")}if(u){t.drawPicHeights(t.state.values,e.values)}n.style({stroke:"#000",strokeWidth:2,opacity:1},function(){if(u){if(l){n.style({stroke:f?M.GRAY_G:"#000",strokeWidth:f?1:2},function(){return n.line([f?0:.5,0],[p.dimX-(f?0:.5),0])})}else{n.line([0,0],[p.dimX,0]);if(t.props.labels[1].length!==0||!f){n.style({stroke:f?M.GRAY_G:"#000",strokeWidth:f?1:2},function(){return n.line([0,0],[0,p.dimY])})}}}else{n.style({stroke:f?M.GRAY_G:"#000",strokeWidth:f?1:2},function(){return n.line([f?-g*3:0,0],[p.dimX+(f?g:0),0])});if(!((o||a)&&f)){n.style({stroke:f?M.GRAY_G:"#000",strokeWidth:f?1:2},function(){return n.line([0,0],[0,p.dimY])})}}});n.label([p.dimX/2,f?-y:-35/p.scale[1]],t.props.labels[0],f?"above":"below",false).css("font-weight","bold").css("color",f&&M.GRAY_F);n.label([(f?-35:-60)/p.scale[0],p.dimY/2],t.props.labels[1],"center",false).css("font-weight","bold").css("color",f&&M.GRAY_F).addClass("rotate");if(x.props.apiOptions.isMobile){x.horizHairline=new I(x.graphie,[0,0],[0,0],{normalStyle:{strokeWidth:1}});x.horizHairline.attr({stroke:M.INTERACTIVE});x.horizHairline.hide();x.hairlineRange=[[0,p.dimX],[0,p.dimY]]}});f(E(x),"showHairlines",function(e){if(x.props.apiOptions.isMobile&&x.props.markings!=="none"){x.horizHairline.moveTo([x.hairlineRange[0][0],e[1]],[x.hairlineRange[0][1],e[1]]);x.horizHairline.show()}});f(E(x),"hideHairlines",function(){if(x.props.apiOptions.isMobile){x.horizHairline.hide()}});f(E(x),"labelCategory",function(n,o){var a=x.props.apiOptions.isMobile;var i=x.graphie;o=o+"";var s=false;var e=o.match(/^\$(.*)\$$/);if(e){o=e[1];s=true}var l=5;var t=45;var u=t*(Math.PI/180);var c="translateX(-50%) translateX(".concat(l,"px) ")+"translateY(-50%) rotate(-".concat(t,"deg)");var p=a&&!e;return new Promise(function(r){i.style({color:a?M.GRAY_G:"inherit",transform:p?c:"none",transformOrigin:"100%"},function(){var e=i.label([n,a?-.5:0],o,"below",s);var t=14+(p?Math.round(e.height()*Math.cos(u)+(e.width()+l)*Math.sin(u)):e.height());r({category:o,height:t})})})});f(E(x),"setupCategories",function(i){var s=E(x);var l=i;var u=s.graphie;var c=x.props.apiOptions.isMobile;var p=[];if(s.props.type===R){_.times(s.props.categories.length-1,function(e){s.setupBar({index:e,startHeight:s.state.values[e],config:i,isHistogram:true})});_.each(s.props.categories,function(e,t){var r=.5+t*l.barWidth;p.push(s.labelCategory(r,e));var n=6/l.scale[1];u.style({stroke:"#000",strokeWidth:c?1:2,opacity:1},function(){u.line([r,-n],[r,0])})})}else{_.each(s.props.categories,function(e,t){var r=s.state.values[t];var n;if(s.props.type===N){n=s.setupBar({index:t,startHeight:r,config:i,isHistogram:false})}else if(s.props.type===A){n=s.setupLine(t,r,i)}else if(s.props.type===D){n=s.setupPic(t,i)}else if(s.props.type===F){n=s.setupDotplot(t,i)}var o=0;var a=-6/l.scale[1];if(s.props.type===F&&!c){o=-a}if(s.props.type===F){if(t%s.props.labelInterval===0||t===s.props.categories.length-1){p.push(s.labelCategory(n,e));o*=1.5;a*=1.5}}else{p.push(s.labelCategory(n,e))}u.style({stroke:c?M.GRAY_G:"#000",strokeWidth:c?1:2,opacity:1},function(){u.line([n,o],[n,a])})})}Promise.all(p).then(function(e){if(s._isMounted){var n={};e.forEach(function(e){var t=e.category,r=e.height;return n[t]=r});s.setState({categoryHeights:n})}})});f(E(x),"_clampValue",function(e,t,r){return Math.max(Math.min(e,r),t)});f(E(x),"_maybeShowDragPrompt",function(){if(x.graphie.dragPrompt!=null){x.graphie.dragPrompt[0].style.display="inline"}});f(E(x),"_maybeHideDragPrompt",function(){if(x.graphie.dragPrompt!=null){x.graphie.dragPrompt[0].style.display="none"}});f(E(x),"setupBar",function(e){var l=x.props.apiOptions.isMobile;var o=e.index;var t=e.startHeight;var u=e.config;var c=e.isHistogram;var p=E(x);var f=p.graphie;var r=u.barWidth/2;var n;if(c){n=.5+o*u.barWidth+r}else{n=(l?r:.5+u.barPad)+o}var a=function e(t,r){var n=f.scalePoint(0);u.graph.bars[t].scale(1,Math.max(l?.2:.01,r/u.scaleY),n[0],n[1]);if(c){var o=u.graph.dividers[t-1],a=u.graph.dividers[t];if(o){var i=Math.min(p.state.values[t-1],r);o.scale(1,Math.max(.01,i/u.scaleY),n[0],n[1])}if(a){var s=Math.min(p.state.values[t+1],r);a.scale(1,Math.max(.01,s/u.scaleY),n[0],n[1])}}};f.style({stroke:"none",fill:l?M.BLUE_C:M.LIGHT_BLUE,opacity:1},function(){u.graph.bars[o]=f.path([[n-r,0],[n-r,u.scaleY],[n+r,u.scaleY],[n+r,0],[n-r,0]])});if(c){if(o>0){f.style({stroke:"#000",strokeWidth:1,opacity:.3},function(){u.graph.dividers.push(f.path([[n-r,0],[n-r,u.scaleY]]))})}}if(l){var i=u.scaleY/p.props.snapsPerLine;u.graph.lines[o]=g.addMaybeMobileMovablePoint(E(x),{coord:[n,t],constraints:[function(e,t,r){return[n,x._clampValue(Math.round(e[1]/i)*i,0,u.dimY)]}],onMoveStart:function e(){u.graph.bars[o].attr({fill:M.INTERACTIVE})},onMove:function e(){var t=u.graph.lines[o].coord()[1];var r=_.clone(p.state.values);r[o]=t;p.setState({values:r});p.changeAndTrack({values:r});p._maybeHideDragPrompt();a(o,t)},onMoveEnd:function e(){u.graph.bars[o].attr({fill:M.BLUE_C})}});u.graph.lines[o].state.visibleShape.wrapper.style.zIndex="1";p._maybeShowDragPrompt()}else{u.graph.lines[o]=f.addMovableLineSegment({coordA:[n-r,t],coordZ:[n+r,t],snapY:u.scaleY/p.props.snapsPerLine,constraints:{constrainX:true},normalStyle:{stroke:M.INTERACTIVE,"stroke-width":x.props.static?0:4}});u.graph.lines[o].onMove=function(e,t){var r=this.coordA[1];if(r<0||r>u.dimY){r=Math.min(Math.max(r,0),u.dimY);this.coordA[1]=this.coordZ[1]=r;this.transform()}var n=_.clone(p.state.values);n[o]=r;p.setState({values:n});p.changeAndTrack({values:n});a(o,r)}}a(o,t);return n});f(E(x),"setupLine",function(n,e,o){var t=x.props.apiOptions.isMobile;var a=E(x);var i=o;var r=a.graphie;var s=n+(t?.4:1);if(t){var l=o.scaleY/a.props.snapsPerLine;i.graph.points[n]=g.addMaybeMobileMovablePoint(E(x),{coord:[s,e],constraints:[function(e,t,r){return[s,x._clampValue(Math.round(e[1]/l)*l,0,o.dimY)]}],onMove:function e(){var t=i.graph.points[n].coord()[1];var r=_.clone(a.state.values);r[n]=t;a.setState({values:r});a.changeAndTrack({values:r});a._maybeHideDragPrompt()}});a._maybeShowDragPrompt();if(n>0){i.graph.lines[n]=g.addMovableLine(r,{points:[i.graph.points[n-1],i.graph.points[n]],constraints:g.MovablePoint.constraints.fixed(),normalStyle:{stroke:M.BLUE_C,"stroke-width":2},highlightStyle:{stroke:M.BLUE_C,"stroke-width":2}})}}else{i.graph.points[n]=r.addMovablePoint({coord:[s,e],constraints:{constrainX:true},normalStyle:{fill:M.INTERACTIVE,stroke:M.INTERACTIVE},snapY:i.scaleY/a.props.snapsPerLine});i.graph.points[n].onMove=function(e,t){t=Math.min(Math.max(t,0),i.dimY);var r=_.clone(a.state.values);r[n]=t;a.setState({values:r});a.changeAndTrack({values:r});return[e,t]};if(n>0){i.graph.lines[n]=r.addMovableLineSegment({pointA:i.graph.points[n-1],pointZ:i.graph.points[n],constraints:{fixed:true},normalStyle:{stroke:"#9ab8ed","stroke-width":2}})}}return s});f(E(x),"setupDotplot",function(e,t){var r=x.graphie;var n=x.props.apiOptions.isMobile;return x.setupTiledPlot(e,n?.5:1,t,function(e,t){return r.ellipse([e,t],[x.DOT_PLOT_POINT_SIZE()/r.scale[0],x.DOT_PLOT_POINT_SIZE()/r.scale[1]],{fill:M.INTERACTIVE,stroke:M.INTERACTIVE})})});f(E(x),"setupPic",function(e,t){var o=x.graphie;return x.setupTiledPlot(e,0,t,function(e,t){var r=o.scalePoint([e,t]);var n=x.props.picSize;return o.raphael.image(x.props.picUrl,r[0]-n/2,r[1]-n/2,n,n)})});f(E(x),"setupTiledPlot",function(i,s,e,l){var u=E(x);var c=e;var p=u.graphie;var f=p.pics;var h=p.dotTicks;var d=i+.5+c.picPad;p.mouselayer.canvas.style.touchAction="none";f[i]=[];h[i]=[];var t=Math.round(c.dimY/c.scaleY)+1;_(t).times(function(e){e-=1;var t=(e+.5)*c.scaleY;var r=d-c.picBoxWidth/2;var n=t+.5*c.scaleY;var o=p.scalePoint([r,n+s]);var a=p.mouselayer.rect(o[0],o[1],c.picBoxWidthPx,c.picBoxHeight);S(a[0]).css({fill:"#000",opacity:0,cursor:"pointer"}).on("vmousedown",function(e){e.preventDefault();u.whichPicClicked=i;u.setPicHeight(i,n);S(document).on("vmouseup.plotTile",function(e){S(document).unbind(".plotTile")});S(document).on("vmousemove.plotTile",function(e){e.preventDefault();var t=p.getMouseCoord(e)[1];var r=Math.floor(t-s);var n=Math.max(-1,Math.floor(r/c.scaleY));var o=(n+.5)*c.scaleY;var a=o+.5*c.scaleY;u.setPicHeight(u.whichPicClicked,a)})});if(e<0){return}f[i][e]=l(d,t+s);h[i][e]=p.ellipse([d,t+s],[u.DOT_TICK_POINT_SIZE()/p.scale[0],u.DOT_TICK_POINT_SIZE()/p.scale[1]],{fill:"#dee1e3",stroke:"#dee1e3"})});return d});f(E(x),"setPicHeight",function(e,t){var r=_.clone(x.state.values);r[e]=t;x.drawPicHeights(r,x.state.values);x.setState({values:r});x.changeAndTrack({values:r})});f(E(x),"changeAndTrack",function(e){x.props.onChange(e);x.props.trackInteraction()});f(E(x),"drawPicHeights",function(s,l){var u=E(x);var c=u.graphie;var e=c.pics;var p=x.props.apiOptions.isMobile;if(p){var t=s.every(function(e){return e===0});c.dotPrompt[0].style.display=t?"inline":"none"}_.each(e,function(e,i){_.each(e,function(e,t){var r=(t+1)*u.props.scaleY;var n=r<=s[i];if(u.props.type===F){var o=r<=l[i];var a=n&&!o;if(a){e.animate({"stroke-width":8},75,function(){return e.animate({"stroke-width":2},75)})}}S(e[0]).css({display:n?"inline":"none"});c.dotTicks[i][t][0].style.display=n||!p?"none":"inline"})})});f(E(x),"getUserInput",function(){return x.state.values});f(E(x),"simpleValidate",function(e){return o.validate(x.getUserInput(),e)});return x}s(o,[{key:"render",value:function e(){var t=75;var r={marginBottom:this.props.labels[0]?t:0};return n.createElement("div",{className:"perseus-widget-plotter graphie "+d.INTERACTIVE,ref:"graphieDiv",style:r})}},{key:"componentDidUpdate",value:function e(t,r){this.shouldSetupGraphie=this.shouldSetupGraphie||!_.isEqual(this.state.categoryHeights,r.categoryHeights);if(this.shouldSetupGraphie){this.setupGraphie(r)}}},{key:"componentDidMount",value:function e(){this._isMounted=true;this.setupGraphie(this.state)}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){var r=["type","labels","categories","scaleY","maxY","snapsPerLine","picUrl","labelInterval","static"];this.shouldSetupGraphie=_.any(r,function(e){return!_.isEqual(this.props[e],t[e])},this);if(!_.isEqual(this.props.starting,t.starting)&&!_.isEqual(this.state.values,t.starting)){this.shouldSetupGraphie=true;this.setState({values:t.starting})}}},{key:"componentWillUnmount",value:function e(){this._isMounted=false}}]);return o}(n.Component);f(y,"propTypes",{onChange:h.func.isRequired,trackInteraction:h.func.isRequired});f(y,"defaultProps",{type:N,labels:["",""],categories:[""],scaleY:1,maxY:10,snapsPerLine:2,picSize:40,picBoxHeight:48,picUrl:"",plotDimensions:[380,300],labelInterval:1});_.extend(y,{validate:function e(t,r){if(v(t,r.starting)){return{type:"invalid",message:null}}else{return{type:"points",earned:v(t,r.correct)?1:0,total:1,message:null}}}});var b=_.identity;e.exports={name:"plotter",displayName:"Plotter",widget:y,staticTransform:b}},"j+Ew":function(e,t,r){"use strict";r("ma9I");r("5DmW");r("NBAS");var s=n(r("q1tI"));function n(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function l(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);return e}function u(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return p(e)}function c(e){c=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return c(e)}function p(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)a(e,t)}function a(e,t){a=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return a(e,t)}function h(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var d=r("17x9");var v=r("mR6N"),g=v.StyleSheet,m=v.css;var _=r("F/us");var y=r("Atlv");var b=r("oBkO");var O=r("j8wP").Options;var w=r("uBl0").shuffle;var P=r("uBl0").seededRNG;var k=r("zahm"),x=k.linterContextProps,E=k.linterContextDefault;var C="perseus-widget-matcher";var S=function(e){f(a,e);function a(){var e;var r;i(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++){n[o]=arguments[o]}r=u(this,(e=c(a)).call.apply(e,[this].concat(n)));h(p(r),"state",{leftHeight:0,rightHeight:0});h(p(r),"changeAndTrack",function(e){r.props.onChange(e);r.props.trackInteraction()});h(p(r),"onMeasureLeft",function(e){var t=_.max(e.heights);r.setState({leftHeight:t})});h(p(r),"onMeasureRight",function(e){var t=_.max(e.heights);r.setState({rightHeight:t})});h(p(r),"getUserInput",function(){return{left:r.refs.left.getOptions(),right:r.refs.right.getOptions()}});h(p(r),"simpleValidate",function(e){return a.validate(r.getUserInput(),e)});return r}l(a,[{key:"render",value:function e(){var t=P(this.props.problemNum);var r;if(!this.props.orderMatters){r=this.props.left}else{r=w(this.props.left,t,true)}var n=w(this.props.right,t,true);var o=_.any(this.props.labels);var a={height:_.max([this.state.leftHeight,this.state.rightHeight])};var i=this.props.apiOptions.isMobile?8:5;return s.createElement("table",{className:m(j.widget)+" "+C},s.createElement("tbody",null,o&&s.createElement("tr",{className:m(j.row)},s.createElement("th",{className:m(j.column,j.columnLabel)},s.createElement(y,{content:this.props.labels[0]||"...",linterContext:this.props.linterContext})),s.createElement("th",{className:m(j.column,j.columnRight,j.columnLabel)},s.createElement(y,{content:this.props.labels[1]||"...",linterContext:this.props.linterContext}))),s.createElement("tr",{className:m(j.row)},s.createElement("td",{className:m(j.column)},s.createElement(b,{options:r,layout:"vertical",padding:this.props.padding,disabled:!this.props.orderMatters,constraints:a,onMeasure:this.onMeasureLeft,onChange:this.changeAndTrack,margin:i,linterContext:this.props.linterContext,ref:"left"})),s.createElement("td",{className:m(j.column,j.columnRight)},s.createElement(b,{options:n,layout:"vertical",padding:this.props.padding,constraints:a,onMeasure:this.onMeasureRight,onChange:this.changeAndTrack,margin:i,linterContext:this.props.linterContext,ref:"right"})))))}}]);return a}(s.Component);h(S,"propTypes",{apiOptions:O.propTypes,labels:d.array,left:d.array,onChange:d.func,orderMatters:d.bool,padding:d.bool,problemNum:d.number,right:d.array,trackInteraction:d.func.isRequired,linterContext:x});h(S,"defaultProps",{left:[],right:[],labels:["",""],orderMatters:false,padding:true,problemNum:0,onChange:function e(){},linterContext:E});_.extend(S,{validate:function e(t,r){var n=_.isEqual(t.left,r.left)&&_.isEqual(t.right,r.right);return{type:"points",earned:n?1:0,total:1,message:null}}});var T=5;var M="1px solid #444";var j=g.create({widget:{paddingTop:T,maxWidth:"100%",minWidth:"auto"},row:{border:0},column:{padding:0,border:0},columnRight:{borderLeft:M},columnLabel:{fontWeight:"inherit",borderBottom:M,padding:"0 ".concat(T,"px ").concat(T,"px ").concat(T,"px"),textAlign:"center"}});e.exports={name:"matcher",displayName:"Two column matcher",widget:S,isLintable:true}},jDkz:function(e,t,r){"use strict";r("ma9I");r("5DmW");r("NBAS");var o=n(r("q1tI"));function n(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)a(e.prototype,t);if(r)a(e,r);return e}function l(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return c(e)}function u(e){u=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return u(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)f(e,t)}function f(e,t){f=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return f(e,t)}function h(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var d=r("17x9");var _=r("F/us");var v=r("oBkO");var g=r("j8wP").Options;var m=r("uBl0").shuffle;var y=r("zahm"),b=y.linterContextProps,O=y.linterContextDefault;var w="horizontal";var P="vertical";var k=function(e){p(a,e);function a(){var e;var t;i(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++){n[o]=arguments[o]}t=l(this,(e=u(a)).call.apply(e,[this].concat(n)));h(c(t),"state",{changed:false});h(c(t),"handleChange",function(e){if(!t._isMounted){return}t.setState({changed:true},function(){setTimeout(function(){t.props.onChange(e);t.props.trackInteraction()},0)})});h(c(t),"getUserInput",function(){return{options:t.refs.sortable.getOptions()}});h(c(t),"simpleValidate",function(e){if(!t.state.changed){return{type:"invalid",message:null}}return a.validate(t.getUserInput(),e)});return t}s(a,[{key:"componentDidMount",value:function e(){this._isMounted=true}},{key:"componentWillUnmount",value:function e(){this._isMounted=false}},{key:"render",value:function e(){var t=m(this.props.correct,this.props.problemNum,true);var r=this.props.apiOptions;var n=r.isMobile?8:5;return o.createElement("div",{className:"perseus-widget-sorter perseus-clearfix"},o.createElement(v,{options:t,layout:this.props.layout,margin:n,padding:this.props.padding,onChange:this.handleChange,linterContext:this.props.linterContext,ref:"sortable"}))}}]);return a}(o.Component);h(k,"propTypes",{apiOptions:g.propTypes,correct:d.array,layout:d.oneOf([w,P]),onChange:d.func,padding:d.bool,problemNum:d.number,trackInteraction:d.func.isRequired,linterContext:b});h(k,"defaultProps",{correct:[],layout:w,padding:true,problemNum:0,onChange:function e(){},linterContext:O});_.extend(k,{validate:function e(t,r){var n=_.isEqual(t.options,r.correct);return{type:"points",earned:n?1:0,total:1,message:null}}});e.exports={name:"sorter",displayName:"Sorter",widget:k,isLintable:true}},jH0K:function(e,t,r){"use strict";r("ma9I");r("2B1R");r("5DmW");r("NBAS");var a=n(r("q1tI"));function n(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);return e}function l(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return d(e)}function u(e){u=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return u(e)}function d(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)p(e,t)}function p(e,t){p=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return p(e,t)}function f(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var h=r("17x9");var v=r("i8i4");var _=r("F/us");var g=r("e2gc");var m=r("uBl0");var y=r("NT9k");var b=r("UcaO"),O=b.interactiveSizes;var w=r("yPu2");var P={url:null};var k={fontStyle:"italic",fontWeight:"bold",fontSize:"32px",width:"100%",height:"100%",textAlign:"center",backgroundColor:"white",position:"absolute",zIndex:1,transition:"opacity .25s ease-in-out","-moz-transition":"opacity .25s ease-in-out","-webkit-transition":"opacity .25s ease-in-out"};var x={position:"relative",top:"25%"};function E(e,t){return Math.floor((e[1]-e[0])/t)}var C=function(e){c(o,e);function o(){var e;var h;i(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}h=l(this,(e=u(o)).call.apply(e,[this].concat(r)));f(d(h),"reset",function(){h._setupGraphie(false)});f(d(h),"graphie",function(){return h._graphie});f(d(h),"pointsFromNormalized",function(e,i){var s=d(h);return _.map(e,function(e){return _.map(e,function(e,t){var r=s.props.range[t];if(i){return r[0]+(r[1]-r[0])*e}else{var n=s.props.step[t];var o=E(r,n);var a=Math.round(e*o);return r[0]+n*a}})})});f(d(h),"_setupGraphie",function(e){if(h._hasSetupGraphieThisUpdate){return}var t=v.findDOMNode(h.refs.graphieDiv);g(t).empty();var r=h.props.labels.map(function(e){return m.unescapeMathMode(e)});var n=h.props.range;var o=h._graphie=y.createGraphie(t);var a=h._getGridConfig();o.snap=h.props.snapStep;if(h.props.markings==="graph"){o.graphInit({range:n,scale:_.pluck(a,"scale"),axisArrows:"<->",labelFormat:function e(t){return"\\small{"+t+"}"},gridStep:h.props.gridStep,tickStep:_.pluck(a,"tickStep"),labelStep:1,unityLabels:_.pluck(a,"unityLabel"),isMobile:h.props.isMobile});o.label([0,n[1][1]],r[1],h.props.isMobile?"below right":"above");o.label([n[0][1],0],r[0],h.props.isMobile?"above left":"right")}else if(h.props.markings==="grid"){o.graphInit({range:n,scale:_.pluck(a,"scale"),gridStep:h.props.gridStep,axes:false,ticks:false,labels:false,isMobile:h.props.isMobile})}else if(h.props.markings==="none"){o.init({range:n,scale:_.pluck(a,"scale"),isMobile:h.props.isMobile})}var i=.5;var s=0;var l;if(h.props.instructions){l=g("<div/>");_.each(k,function(e,t){l.css(t,e)});l.css("opacity",i);var u=g("<span/>",{text:h.props.instructions});_.each(x,function(e,t){u.css(t,e)});l.append(u);g(t).append(l)}else{l=undefined}var c=l||h.props.onMouseDown?_.bind(function(e){if(l){l.remove();l=null}this.props.onMouseDown(e)},d(h)):null;var p=l?function(){l&&l.css("opacity",s)}:null;var f=l?function(){l&&l.css("opacity",i)}:null;o.addMouseLayer({onClick:h.props.onClick,onMouseDown:c,onMouseOver:p,onMouseOut:f,onMouseUp:h.props.onMouseUp,onMouseMove:h.props.onMouseMove,allowScratchpad:true,setDrawingAreaAvailable:h.props.setDrawingAreaAvailable});h._updateProtractor();h._updateRuler();h._hasSetupGraphieThisUpdate=true;if(!e&&h.props.onGraphieUpdated){h.props.onGraphieUpdated(o)}});f(d(h),"_getGridConfig",function(){var r=d(h);return _.map(r.props.step,function(e,t){return m.gridDimensionConfig(e,r.props.range[t],r.props.box[t],r.props.gridStep[t])})});f(d(h),"_updateProtractor",function(){if(h.protractor){h.protractor.remove()}if(h.props.showProtractor){var e=h.pointsFromNormalized([[.5,.05]])[0];h.protractor=h._graphie.protractor(e)}});f(d(h),"_updateRuler",function(){if(h.ruler){h.ruler.remove()}if(h.props.showRuler){var e=h.pointsFromNormalized([[.5,.25]])[0];var t=h._graphie.range[0][1]-h._graphie.range[0][0];h.ruler=h._graphie.ruler({center:e,label:h.props.rulerLabel,pixelsPerUnit:h._graphie.scale[0],ticksPerUnit:h.props.rulerTicks,units:Math.round(.8*t)})}});f(d(h),"toJSON",function(){return _.pick(h.props,"range","step","markings","labels","backgroundImage","showProtractor","showRuler","rulerLabel","rulerTicks","gridStep","snapStep")});return h}s(o,[{key:"render",value:function e(){var t;var r=this.props.backgroundImage;if(r.url){var n=this.props.box[0]/O.defaultBoxSize;t=a.createElement(w,{src:r.url,width:r.width,height:r.height,scale:n,responsive:false})}else{t=null}return a.createElement("div",{className:"graphie-container above-scratchpad",style:{width:this.props.box[0],height:this.props.box[1]},onMouseOut:this.onMouseOut,onMouseOver:this.onMouseOver,onClick:this.onClick},t,a.createElement("div",{className:"graphie",ref:"graphieDiv"}))}},{key:"componentDidMount",value:function e(){this._setupGraphie(true)}},{key:"componentDidUpdate",value:function e(){this._hasSetupGraphieThisUpdate=false;if(this._shouldSetupGraphie){this._setupGraphie(false);this._shouldSetupGraphie=false}}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){var r=["labels","range","step","markings","showProtractor","showRuler","rulerLabel","rulerTicks","gridStep","snapStep"];var n=this;_.each(r,function(e){if(!_.isEqual(n.props[e],t[e])){n._shouldSetupGraphie=true}})}}]);return o}(a.Component);f(C,"propTypes",{box:h.array.isRequired,labels:h.arrayOf(h.string),range:h.arrayOf(h.arrayOf(h.number)),step:h.arrayOf(h.number),gridStep:h.arrayOf(h.number),snapStep:h.arrayOf(h.number),markings:h.string,backgroundImage:h.shape({url:h.string}),showProtractor:h.bool,showRuler:h.bool,rulerLabel:h.string,rulerTicks:h.number,onGraphieUpdated:h.func,instructions:h.string,onClick:h.func,setDrawingAreaAvailable:h.func,isMobile:h.bool});f(C,"defaultProps",{labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],gridStep:[1,1],snapStep:[.5,.5],markings:"graph",backgroundImage:P,showProtractor:false,showRuler:false,rulerLabel:"",rulerTicks:10,instructions:null,onGraphieUpdated:null,onClick:null,onMouseDown:null,isMobile:false});e.exports=C},"k1y+":function(e,t,r){"use strict";r("ma9I");r("2B1R");r("zKZe");r("5DmW");r("NBAS");r("07d7");r("JfAA");var m=n(r("q1tI"));function n(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function y(){y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};return y.apply(this,arguments)}function a(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function i(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);return e}function s(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return u(e)}function l(e){l=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return l(e)}function u(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function c(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)p(e,t)}function p(e,t){p=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return p(e,t)}function f(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var b=r("TSYQ");var h=r("17x9");var v=r("i8i4");var _=r("F/us");var O=r("M++g");var w=r("Atlv");var P=r("G6Ta");var k=r("7xiW");var x=r("eMwK");var d=r("j8wP").Options;var g=r("7BBF");var E=r("reBI").propTypes.keypadElementPropType;var C=r("p8fL").assert;var S=r("uBl0").stringArrayOfSize;var T=r("zahm"),M=T.linterContextProps,j=T.linterContextDefault;var I={INPUT_MARGIN:4,INPUT_HEIGHT:38,INPUT_WIDTH:82};var N={INPUT_MARGIN:3,INPUT_HEIGHT:30,INPUT_WIDTH:40};var A={INPUT_MARGIN:4,INPUT_HEIGHT:36,INPUT_WIDTH:64};var D=function e(t,r){return[""+t,""+r]};var R=function e(){return D(0,0)};var F=function e(t){C(_.isArray(t)&&t.length===2);return+t[0]};var L=function e(t){C(_.isArray(t)&&t.length===2);return+t[1]};var B=function e(t){var r=F(t);var n=L(t);return"answer"+r+","+n};var U=function e(t){var n=[1,1];_(t).each(function(e,t){var r=0;_(e).each(function(e,t){if(e!=null&&e.toString().length){r=t+1}});n[1]=Math.max(n[1],r);if(r>0){n[0]=Math.max(n[0],t+1)}});return n};var q=function(e){c(o,e);function o(){var e;var d;a(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}d=s(this,(e=l(o)).call.apply(e,[this].concat(r)));f(u(d),"state",{enterTheMatrix:0});f(u(d),"getInputPaths",function(){var n=[];var e=d.props.matrixBoardSize[0];var t=d.props.matrixBoardSize[1];_(e).times(function(r){_(t).times(function(e){var t=D(r,e);n.push(t)})});return n});f(u(d),"getGrammarTypeForPath",function(e){return"number"});f(u(d),"_handleFocus",function(e,t){d.props.onFocus(D(e,t))});f(u(d),"_handleBlur",function(e,t){d.props.onBlur(D(e,t))});f(u(d),"focus",function(){d.focusInputPath(R());return true});f(u(d),"focusInputPath",function(e){var t=B(e);d.refs[t].focus()});f(u(d),"blurInputPath",function(e){if(e.length===0){e=R()}var t=B(e);d.refs[t].blur()});f(u(d),"getDOMNodeForPath",function(e){var t=B(e);return v.findDOMNode(d.refs[t])});f(u(d),"setInputValue",function(e,t,r){var n=F(e);var o=L(e);d.onValueChange(n,o,t,r)});f(u(d),"handleKeyDown",function(e,t,r){var n=d.props.matrixBoardSize[0];var o=d.props.matrixBoardSize[1];var a=null;var i=d.refs[B(D(e,t))];var s=i.getStringValue();var l=i.getSelectionStart();var u=i.getSelectionEnd();var c=null;if(r.key==="ArrowUp"&&e>0){c=D(e-1,t)}else if(r.key==="ArrowDown"&&e+1<n){c=D(e+1,t)}else if(r.key==="ArrowLeft"&&t>0){if(l===0&&u===0){c=D(e,t-1)}}else if(r.key==="ArrowRight"&&t+1<o){if(l===s.length){c=D(e,t+1)}}else if(r.key==="Enter"){a=d.state.enterTheMatrix+1}else if(r.key==="Escape"){a=0}if(c){r.preventDefault();var p=d.refs[B(c)];var f=p.getStringValue();var h=f.length*2;p.focus();if(r.key==="ArrowRight"){p.setSelectionRange(0,0)}else{p.setSelectionRange(h,h)}}if(a!=null){d.setState({enterTheMatrix:a})}});f(u(d),"onValueChange",function(e,t,r,n){var o=_.map(d.props.answers,_.clone);if(!o[e]){o[e]=[]}o[e][t]=r;d.props.onChange({answers:o},n);d.props.trackInteraction()});f(u(d),"getUserInput",function(){return{answers:d.props.answers}});f(u(d),"simpleValidate",function(e){return o.validate(d.getUserInput(),e)});return d}i(o,[{key:"componentDidMount",value:function e(){this.cursorPosition=[0,0]}},{key:"render",value:function e(){var s=this;var t;if(this.props.apiOptions.customKeypad){t=A}else if(this.props.apiOptions.staticRender){t=I}else{t=N}var r=t,l=r.INPUT_MARGIN,u=r.INPUT_HEIGHT,c=r.INPUT_WIDTH;var n=U(this.props.answers);var o=this.props.matrixBoardSize[0];var p=this.props.matrixBoardSize[1];var a=this.props.cursorPosition[0];var i=this.props.cursorPosition[1];var f=Math.max(a,n[0]-1);var h=Math.max(i,n[1]-1);var d=(f+1)*(u+2*l);var v=(h+1)*(c+2*l);var g=b({"perseus-matrix":true,"static-mode":this.props.static,"the-matrix":this.state.enterTheMatrix>=5});return m.createElement("div",{className:g},this.props.prefix&&m.createElement("div",{className:"matrix-prefix"},m.createElement(w,{content:this.props.prefix,linterContext:this.props.linterContext})),m.createElement("div",{className:"matrix-input"},m.createElement("div",{className:"matrix-bracket bracket-left",style:{height:d}}),m.createElement("div",{className:"matrix-bracket bracket-right",style:{height:d,left:v}}),_(o).times(function(a){var i=s.props.answers[a];return m.createElement("div",{className:"matrix-row",key:a},_(p).times(function(n){var e=a>f||n>h;var t={className:e?"outside":"inside",ref:B(D(a,n)),value:i?i[n]:null,style:{height:u,width:c,margin:l},disabled:s.props.apiOptions.readOnly,onFocus:function e(){s.cursorPosition=[a,n];s.props.onChange({cursorPosition:[a,n]},function(){return false});s._handleFocus(a,n)},onBlur:function e(){if(a===s.cursorPosition[0]&&n===s.cursorPosition[1]){s.props.onChange({cursorPosition:[0,0]},function(){return false})}s._handleBlur(a,n)},onKeyDown:function e(t){s.handleKeyDown(a,n,t)},onChange:function e(t,r){s.onValueChange(a,n,t,r)}};var r;if(s.props.apiOptions.customKeypad){var o={margin:l,minWidth:c,minHeight:u,boxSizing:"border-box",backgroundColor:e?"#f3f3f3":"#fff"};r=m.createElement(x,y({},t,{style:o,scrollable:true,keypadElement:s.props.keypadElement}))}else if(s.props.apiOptions.staticRender){r=m.createElement(k,t)}else if(s.props.numericInput){r=m.createElement(O,t)}else{r=m.createElement(P,t)}return m.createElement("span",{key:n,className:"matrix-input-field"},r)}))})),this.props.suffix&&m.createElement("div",{className:"matrix-suffix"},m.createElement(w,{content:this.props.suffix,linterContext:this.props.linterContext})))}}]);return o}(m.Component);f(q,"propTypes",{answers:h.arrayOf(h.arrayOf(h.oneOfType([h.string,h.number]))),apiOptions:d.propTypes,cursorPosition:h.arrayOf(h.number),keypadElement:E,matrixBoardSize:h.arrayOf(h.number).isRequired,prefix:h.string,suffix:h.string,trackInteraction:h.func.isRequired,linterContext:M});f(q,"defaultProps",{matrixBoardSize:[3,3],answers:[[]],prefix:"",suffix:"",cursorPosition:[0,0],apiOptions:d.defaults,linterContext:j});_.extend(q,{validate:function e(t,r){var o=r.answers;var a=t.answers;var n=U(o);var i=U(a);var s=n[0]!==i[0]||n[1]!==i[1];var l=g.number.createValidatorFunctional;var u=null;var c=false;var p=false;_(i[0]).times(function(n){_(i[1]).times(function(e){if(a[n][e]==null||a[n][e].toString().length===0){c=true}if(!s){var t=l(o[n][e],{simplify:true});var r=t(a[n][e]);if(r.message){u=r.message}if(!r.correct){p=true}}})});if(c){return{type:"invalid",message:i18n._("Make sure you fill in all cells in the matrix.")}}if(s){return{type:"points",earned:0,total:1,message:null}}return{type:"points",earned:p?0:1,total:1,message:u}}});var H=function e(t){var r=_(t.matrixBoardSize[0]).times(function(){return S(t.matrixBoardSize[1])});t=_.pick(t,"matrixBoardSize","prefix","suffix");return _.extend(t,{answers:r})};var z=function e(t){var r=_.pick(t,"matrixBoardSize","prefix","suffix");r.answers=_.map(t.answers,function(e){return _.map(e,function(e){return e!=null?String(e):""})});return r};e.exports={name:"matrix",displayName:"Matrix",widget:q,transform:H,staticTransform:z,isLintable:true}},o0j1:function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("5DmW");r("NBAS");r("FZtP");var a=n(r("q1tI"));function n(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function s(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){d(t,e,r[e])})}return t}function l(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function i(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);return e}function u(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return p(e)}function c(e){c=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return c(e)}function p(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)h(e,t)}function h(e,t){h=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return h(e,t)}function d(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var v=r("mR6N"),g=v.StyleSheet,m=v.css;var y=r("473Y");var b=r("h/OD");var O=r("VMUI"),w=O.addHighlight,P=O.buildHighlight,k=O.deserializeHighlight,x=O.serializeHighlight;var E=function(e){f(o,e);function o(){var e;var i;l(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}i=u(this,(e=c(o)).call.apply(e,[this].concat(r)));d(p(i),"state",{wordRanges:[]});d(p(i),"_handleAddHighlight",function(e){var t=w(i._getDOMHighlights(),e);var r={};for(var n=0,o=Object.keys(t);n<o.length;n++){var a=o[n];r[a]=x(t[a])}i.props.onSerializedHighlightsUpdate(r)});d(p(i),"_handleRemoveHighlight",function(e){var t=i.props.serializedHighlights;var r=s({},t);delete r[e];i.props.onSerializedHighlightsUpdate(r)});d(p(i),"_handleWordsUpdate",function(e){i.setState({wordRanges:e})});return i}i(o,[{key:"_buildHighlight",value:function e(t){return P(this._getDOMHighlights(),this.state.wordRanges,t)}},{key:"_getDOMHighlights",value:function e(){var t=this.props.serializedHighlights;var r=this.state.wordRanges;var n={};for(var o=0,a=Object.keys(t);o<a.length;o++){var i=a[o];n[i]=k(t[i],r)}return n}},{key:"render",value:function e(){var r=this;var t=this._getDOMHighlights();var n=function e(t){return r._buildHighlight(t)};return a.createElement("div",{className:m(C.container),ref:function e(t){return r._container=t}},a.createElement("div",null,this.props.enabled&&this._container&&this._content&&a.createElement(y,{buildHighlight:n,contentNode:this._content,editable:this.props.editable,highlights:t,offsetParent:this._container,zIndexes:{belowContent:0},onAddHighlight:this._handleAddHighlight,onRemoveHighlight:this._handleRemoveHighlight})),a.createElement("div",{className:m(C.content),ref:function e(t){return r._content=t}},a.createElement(b,{onWordsUpdate:this._handleWordsUpdate},this.props.children)))}}]);return o}(a.PureComponent);var C=g.create({container:{position:"relative",zIndex:0},content:{position:"relative",zIndex:1}});e.exports=E},oBkO:function(e,t,r){"use strict";r("ma9I");r("yXV3");r("2B1R");r("pDQq");r("5DmW");r("NBAS");var l=n(r("q1tI"));function n(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)o(e.prototype,t);if(r)o(e,r);return e}function u(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return c(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return p(e)}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)a(e,t)}function a(e,t){a=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return a(e,t)}function h(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var d=r("17x9");var v=r("fhzG");var g=r("i8i4");var m=r("mR6N"),y=m.StyleSheet,b=m.css;var _=r("F/us");var O=r("e2gc");var w=r("uBl0");var P=r("Atlv");var k=r("j8wP").ClassNames;var x=r("Boyy");var E=r("zahm"),C=E.linterContextProps,S=E.linterContextDefault;var T="horizontal";var M="vertical";var j="static";var I="dragging";var N="animating";var A="disabled";var D=function e(t,r){var n=t.offsetParent();return{top:r.top+n.scrollTop(),left:r.left+n.scrollLeft()}};var R=function(e){f(t,e);function t(){i(this,t);return u(this,p(t).apply(this,arguments))}s(t,[{key:"render",value:function e(){var t=this.props.layout;var r=b(B.card,B.placeholder,t===T&&B.horizontalCard);var n={width:this.props.width,height:this.props.height};if(this.props.margin!=null){n.margin=this.props.margin}return l.createElement("li",{className:r,style:n})}}]);return t}(l.Component);h(R,"propTypes",{layout:d.oneOf([T,M]),width:d.number.isRequired,height:d.number.isRequired});var F=function(e){f(a,e);function a(){var e;var o;i(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}o=u(this,(e=p(a)).call.apply(e,[this].concat(r)));h(c(o),"animationFrameRequest",null);h(c(o),"state",{startPosition:{left:0,top:0},startMouse:{left:0,top:0},mouse:{left:0,top:0}});h(c(o),"getCurrentPosition",function(){return{left:o.state.startPosition.left+o.state.mouse.left-o.state.startMouse.left,top:o.state.startPosition.top+o.state.mouse.top-o.state.startMouse.top}});h(c(o),"bindMouseMoveUp",function(){o.isMouseMoveUpBound=true;O(document).on("mousemove",o.onMouseMove);O(document).on("mouseup",o.onMouseUp)});h(c(o),"unbindMouseMoveUp",function(){o.isMouseMoveUpBound=false;O(document).off("mousemove",o.onMouseMove);O(document).off("mouseup",o.onMouseUp)});h(c(o),"onMouseDown",function(e){if(o.props.type!==j){return}if(!(e.button===0||e.touches!=null&&e.touches.length===1)){return}e.preventDefault();var n=w.extractPointerLocation(e);o.animationFrameRequest=requestAnimationFrame(function(){var e=O(g.findDOMNode(c(o)));var t=e.position();var r=D(e,t);if(n){o.setState({startPosition:r,startMouse:n,mouse:n,dragging:true},function(){this.bindMouseMoveUp();this.props.onMouseDown()})}})});h(c(o),"onMouseMove",function(e){var t=o.props.type!==I||!o.state.dragging;if(t){return}e.preventDefault();var r=w.extractPointerLocation(e);if(r){o.animationFrameRequest=requestAnimationFrame(function(){o.setState({mouse:r},o.props.onMouseMove)})}});h(c(o),"onMouseUp",function(e){var t=o.props.type!==I||!o.state.dragging;if(t){return}e.preventDefault();var r=w.extractPointerLocation(e);if(r){o.setState({dragging:false});o.unbindMouseMoveUp();o.props.onMouseUp()}});return o}s(a,[{key:"componentDidMount",value:function e(){this.mouseMoveUpBound=false;document.addEventListener("touchmove",this.onMouseMove,w.supportsPassiveEvents()?{passive:false}:false)}},{key:"componentWillUnmount",value:function e(){if(this.isMouseMoveUpBound){this.unbindMouseMoveUp()}if(this.animationFrameRequest){cancelAnimationFrame(this.animationFrameRequest)}document.removeEventListener("touchmove",this.onMouseMove)}},{key:"render",value:function e(){var t=this.props,r=t.includePadding,n=t.layout,o=t.type;var a=b(B.card,B.draggable,n===T&&B.horizontalCard,n===M&&B.verticalCard,o===I&&B.dragging,o===N&&B.animating,o===A&&B.disabled,!r&&B.unpaddedCard)+" "+k.INTERACTIVE+" perseus-sortable-draggable";if(!r){a+=" perseus-sortable-draggable-unpadded"}var i={position:"static"};if(this.props.type===I||this.props.type===N){_.extend(i,{position:"absolute"},this.getCurrentPosition())}if(this.props.width){i.width=this.props.width+1}if(this.props.height){i.height=this.props.height}if(this.props.margin!=null){i.margin=this.props.margin}return l.createElement("li",{className:a,style:i,onMouseDown:this.onMouseDown,onTouchStart:this.onMouseDown,onTouchMove:this.onMouseMove,onTouchEnd:this.onMouseUp,onTouchCancel:this.onMouseUp},l.createElement(P,{content:this.props.content,linterContext:x.pushContextStack(this.props.linterContext,"draggable"),onRender:this.props.onRender}))}},{key:"componentDidUpdate",value:function e(t){if(this.props.type===t.type){return}if(this.props.type===N){var r=this.getCurrentPosition();var n=15*Math.sqrt(Math.sqrt(Math.pow(this.props.endPosition.left-r.left,2)+Math.pow(this.props.endPosition.top-r.top,2)));O(g.findDOMNode(this)).animate(this.props.endPosition,{duration:Math.max(n,1),complete:this.props.onAnimationEnd})}else if(this.props.type===j){O(g.findDOMNode(this)).finish()}}}]);return a}(l.Component);h(F,"propTypes",{content:d.string.isRequired,endPosition:d.object.isRequired,includePadding:d.bool,layout:d.oneOf([T,M]),onAnimationEnd:d.func.isRequired,onMouseDown:d.func.isRequired,onMouseMove:d.func.isRequired,onMouseUp:d.func.isRequired,onRender:d.func.isRequired,type:d.oneOf([j,I,N,A]),linterContext:C});h(F,"defaultProps",{includePadding:true,type:j,linterContext:S});var L=v({displayName:"Sortable",propTypes:{constraints:d.object,disabled:d.bool,layout:d.oneOf([T,M]),margin:d.number,onChange:d.func,onMeasure:d.func,options:d.array.isRequired,padding:d.bool,linterContext:C},getDefaultProps:function e(){return{layout:T,padding:true,disabled:false,constraints:{},onMeasure:function e(){},margin:5,onChange:function e(){},linterContext:S}},getInitialState:function e(){return{items:this.itemsFromProps(this.props)}},UNSAFE_componentWillReceiveProps:function e(t){var r=this.props;if(!_.isEqual(t.options,r.options)){this.setState({items:this.itemsFromProps(t)})}else if(t.layout!==r.layout||t.padding!==r.padding||t.disabled!==r.disabled||!_.isEqual(t.constraints,r.constraints)){this.setState({items:this.clearItemMeasurements(this.state.items)})}},componentDidUpdate:function e(){var t=this;if(this.state.items.length&&!this.state.items[0].width){setTimeout(function(){t.measureItems()},0)}},itemsFromProps:function e(t){var r=t.disabled?A:j;return _.map(t.options,function(e,t){return{option:e,key:t,type:r,endPosition:{},width:0,height:0}})},clearItemMeasurements:function e(t){return _.map(t,function(e){return _.extend(e,{width:0,height:0})})},measureItems:function e(){var t=this;var r=_.clone(this.state.items);var n=_.map(r,function(e){return O(g.findDOMNode(this.refs[e.key]))},this);var o=_.invoke(n,"outerWidth");var a=_.invoke(n,"outerHeight");var i=this.props.constraints;var s=this.props.layout;var l;if(i.width){l=_.max(o.concat(i.width))}else if(s===M){l=_.max(o)}var u;if(i.height){u=_.max(a.concat(i.height))}else if(s===T){u=_.max(a)}r=_.map(r,function(e,t){e.width=l||o[t];e.height=u||a[t];return e});this.setState({items:r},function(){t.props.onMeasure({widths:o,heights:a})})},remeasureItems:_.debounce(function(){this.setState({items:this.clearItemMeasurements(this.state.items)})},20),render:function e(){var i=[];var s=this.props.layout;var t=b(B.sortable)+" perseus-sortable";_.each(this.state.items,function(e,t,r){var n=t===r.length-1;var o=e.type===j||e.type===A;var a;if(this.props.layout===T){a="0 "+this.props.margin+"px 0 0"}else if(this.props.layout===M){a="0 0 "+this.props.margin+"px 0"}i.push(l.createElement(F,{content:e.option,key:e.key,type:e.type,ref:e.key,width:e.width,height:e.height,layout:s,includePadding:this.props.padding,margin:n&&o?0:a,endPosition:e.endPosition,linterContext:x.pushContextStack(this.props.linterContext,"sortable"),onRender:this.remeasureItems,onMouseDown:this.onMouseDown.bind(this,e.key),onMouseMove:this.onMouseMove.bind(this,e.key),onMouseUp:this.onMouseUp.bind(this,e.key),onTouchMove:this.onMouseMove.bind(this,e.key),onTouchEnd:this.onMouseUp.bind(this,e.key),onTouchCancel:this.onMouseUp.bind(this,e.key),onAnimationEnd:this.onAnimationEnd.bind(this,e.key)}));if(e.type===I||e.type===N){i.push(l.createElement(R,{key:"placeholder_"+e.key,ref:"placeholder_"+e.key,width:e.width,height:e.height,layout:s,margin:n?0:a}))}},this);return l.createElement("ul",{className:t},i)},onMouseDown:function e(t){var r=_.map(this.state.items,function(e){if(e.key===t){e.type=I}return e});this.setState({items:r})},onMouseMove:function e(t){var r=O(g.findDOMNode(this.refs[t]));var n=O(g.findDOMNode(this));var o=_.clone(this.state.items);var a=_.findWhere(this.state.items,{key:t});var i=this.props.margin;var s=_.indexOf(o,a);var l=0;o.splice(s,1);if(this.props.layout===T){var u=r.offset().left-n.offset().left;var c=0;var p;_.each(o,function(e){p=e.width;if(u>c+p/2){l+=1}c+=p+i})}else{var f=r.offset().top-n.offset().top;var h=0;var d;_.each(o,function(e){d=e.height;if(f>h+d/2){l+=1}h+=d+i})}if(l!==s){o.splice(l,0,a);this.setState({items:o})}},onMouseUp:function e(o){var t=this;this.animationFrameRequest=requestAnimationFrame(function(){var e=_.map(t.state.items,function(e){if(e.key===o){e.type=N;var t=O(g.findDOMNode(this.refs["placeholder_"+o]));var r=t.position();var n=D(t,r);e.endPosition=n}return e},t);t.setState({items:e});t.props.onChange({})})},onAnimationEnd:function e(t){var r=_.map(this.state.items,function(e){if(e.key===t){e.type=j}return e});this.setState({items:r})},getOptions:function e(){return _.pluck(this.state.items,"option")}});var B=y.create({sortable:{boxSizing:"border-box",float:"left",padding:0,margin:0},card:{boxSizing:"border-box",background:"#fff",border:"1px solid #ddd",borderRadius:4,cursor:"pointer",minWidth:25,minHeight:44,padding:10,listStyleType:"none",userSelect:"none",touchAction:"none"},placeholder:{background:"#ddd",border:"1px solid #ccc"},draggable:{textAlign:"center"},horizontalCard:{float:"left",cursor:"ew-resize"},verticalCard:{maxWidth:"100%",cursor:"ns-resize"},unpaddedCard:{padding:0},dragging:{background:"#ffedcd",opacity:"0.8"},disabled:{backgroundColor:"inherit",border:"1px solid transparent",cursor:"default"}});e.exports=L},oaDE:function(e,t,r){"use strict";r("ma9I");r("5DmW");r("NBAS");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var p=r("mR6N");var f=o(r("q1tI"));var h=r("6OHE");var d=n(r("6wxr"));var v=r("/4Qb");function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)a(e.prototype,t);if(r)a(e,r);return e}function l(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return c(e)}function u(e){u=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return u(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function g(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)m(e,t)}function m(e,t){m=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return m(e,t)}function y(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var b=function(e){g(a,e);function a(){var e;var t;i(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++){n[o]=arguments[o]}t=l(this,(e=u(a)).call.apply(e,[this].concat(n)));y(c(t),"state",{isFocused:false});return t}s(a,[{key:"handleFocus",value:function e(){this.setState({isFocused:true})}},{key:"handleBlur",value:function e(){this.setState({isFocused:false})}},{key:"renderIcon",value:function e(){var r=this;var t=this.props,n=t.selected,o=t.showCorrectness,a=t.showSelected,i=t.showPulsate;var s=this.state.isFocused;var l=a||s;var u;var c;if(o){u=f.createElement(d.default,{icon:o==="correct"?v.iconCheck:v.iconMinus,size:24,color:h.colors.white});if(o==="correct"){c=[M.markerCorrect,l&&M.markerCorrectSelected]}else{c=[M.markerIncorrect,l&&M.markerIncorrectSelected]}}else if(n&&n.length>0){c=[M.markerFilled,l&&M.markerFilledSelected]}else{c=[l?M.markerUnfilledSelected:i&&M.markerUnfilledPulsate]}return f.createElement("div",{className:p.css.apply(void 0,[M.markerIcon].concat(c)),ref:function e(t){return r._icon=t}},u)}},{key:"render",value:function e(){var r=this;var t=this.props,n=t.label,o=t.x,a=t.y,i=t.showCorrectness;var s=i==="correct";return f.createElement("button",{"aria-label":n,className:(0,p.css)(M.unstyledButton,M.marker,s&&M.disabled),style:{left:"".concat(o,"%"),top:"".concat(a,"%")},tabIndex:s?-1:0,onFocus:function e(){return r.handleFocus()},onBlur:function e(){return r.handleBlur()},onClick:function e(t){return r.props.onClick(t)},onKeyDown:function e(t){return r.props.onKeyDown(t)}},this.renderIcon())}}]);return a}(f.Component);t.default=b;y(b,"defaultProps",{selected:[]});var O="#1865f2";var w="#2552b0";var P=w;var k="#00a60e";var x="#167b1f";var E="#909195";var C="#6c6e73";var S="rgba(33, 36, 44, 0.32)";var T="rgba(33, 36, 44, 0.16)";var M=p.StyleSheet.create({unstyledButton:{padding:0,overflow:"visible",color:"inherit",font:"inherit",lineHeight:"normal",background:"none",border:"none"},marker:{position:"absolute",width:30,height:30,marginLeft:-15,marginTop:-15},disabled:{pointerEvents:"none"},markerIcon:{display:"flex",position:"relative",boxSizing:"content-box",width:16,height:16,marginLeft:5,cursor:"pointer",backgroundColor:O,border:"solid 2px #ffffff",borderRadius:16,boxShadow:"0 2px 6px 0 ".concat(S)},markerUnfilledPulsate:{animationName:{"0%":{transform:"scale(1)"},"100%":{transform:"scale(1.5)"}},animationDirection:"alternate",animationDuration:"0.8s",animationIterationCount:"infinite",animationTimingFunction:"ease-in",transformOrigin:"50% 50%"},markerUnfilledSelected:{"::before":{content:"''",display:"inline-block",position:"absolute",width:20,height:20,marginLeft:-4,marginTop:-4,border:"solid 2px ".concat(w),borderRadius:20},":active":{backgroundColor:P,boxShadow:"none","::before":{display:"none"}}},markerFilled:{width:8,height:8,marginLeft:9,borderRadius:8,boxShadow:"0 1px 1px 0 ".concat(T)},markerFilledSelected:{"::before":{content:"''",display:"inline-block",position:"absolute",width:12,height:12,marginLeft:-4,marginTop:-4,border:"solid 2px ".concat(w),borderRadius:12},":active":{backgroundColor:P,boxShadow:"none","::before":{display:"none"}}},markerCorrect:{width:24,height:24,marginLeft:1,marginTop:1,justifyContent:"center",alignItems:"center",background:k,boxShadow:"0 1px 1px 0 ".concat(T)},markerCorrectSelected:{"::before":{content:"''",display:"inline-block",position:"absolute",width:28,height:28,border:"solid 2px ".concat(w),borderRadius:28},":active":{backgroundColor:x,boxShadow:"none","::before":{display:"none"}}},markerIncorrect:{width:24,height:24,marginLeft:1,marginTop:1,justifyContent:"center",alignItems:"center",background:E,boxShadow:"0 1px 1px 0 ".concat(T)},markerIncorrectSelected:{"::before":{content:"''",display:"inline-block",position:"absolute",width:28,height:28,border:"solid 2px ".concat(w),borderRadius:28},":active":{backgroundColor:C,boxShadow:"none","::before":{display:"none"}}}})},qRYE:function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("yq1k");r("2B1R");r("+2oP");r("zKZe");r("5DmW");r("NBAS");r("FZtP");var s=n(r("q1tI"));function n(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function o(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){v(t,e,r[e])})}return t}function a(){a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};return a.apply(this,arguments)}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function u(e,t,r){if(t)l(e.prototype,t);if(r)l(e,r);return e}function c(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return h(e)}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return p(e)}function h(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function f(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)d(e,t)}function d(e,t){d=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return d(e,t)}function v(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var g=r("17x9");var m=r("i8i4");var _=r("F/us");var y=r("+jAD");var b=r("M++g");var O=r("7xiW");var w=r("eMwK");var P=r("j8wP").Options;var k=r("reBI").propTypes.keypadElementPropType;var x=r("Giaf");var E=x.MovablePoint;var C=x.Line;var S=r("eAf/").number;var T=r("XwLL");var M=r("yfnS");var i18n=r("HEOz");var j=function e(t,r,n){return Math.min(Math.max(t,r),n)};var I=r("p8fL").assert;var N="–";var A=30;var D={ge:"le",gt:"lt",le:"ge",lt:"gt"};var R={ge:"gt",gt:"ge",le:"lt",lt:"le"};function F(e,t){if(t===1){return""+e}else{return"\\dfrac{".concat(e,"}{").concat(t,"}")}}function L(e,t){if(e<0){return"-"+L(-e,t)}var r=Math.floor(e/t);if(r===0){return F(e,t)}else if(e-r*t===0){return""+r}else{return r+F(e-r*t,t)}}function B(e,t,r){var n=Math.floor(r/t);return F(e*n,r)}var U=function e(t,r,n,o,a){o=o||n;if(r==="decimal"||r==="decimal ticks"){return t.label([n,-.53],Math.round(o*100)/100,"center")}else if(r==="improper"){var i=T.toFraction(o);return t.label([n,-.17],F(i[0],i[1]),"below")}else if(r==="mixed"){var s=T.toFraction(o);return t.label([n,-.17],L(s[0],s[1]),"below")}else if(r==="non-reduced"){var l=T.toFraction(o);return t.label([n,-.17],B(l[0],l[1],a),"below")}};var q=x.createSimpleClass(function(e,t){if(!_.isFinite(t.tickStep)||t.tickStep<=0){return[]}var r=[];var n=t.range;var o=t.labelRange;var a=o[0]==null?n[0]:o[0];var i=o[1]==null?n[1]:o[1];var s;if(t.labelStyle==="non-reduced"){var l=[a,i];for(var u=0;u<=t.numDivisions;u++){var c=n[0]+u*t.tickStep;l.push(c)}var p=function e(t){return S.toFraction(t)[1]};var f=_.map(l,p);s=_.reduce(f,function(e,t){return T.getLCM(e,t)})}else{s=undefined}for(var h=0;h<=t.numDivisions;h++){var d=n[0]+h*t.tickStep;r.push(e.line([d,-.2],[d,.2]));var v=t.labelTicks;if(v||t.labelStyle==="decimal ticks"){r.push(U(e,t.labelStyle,d,d,s))}}r.push(e.style(t.isMobile?{color:M.BLUE_D}:{},function(){return U(e,t.labelStyle,a,a,s)}));r.push(e.style(t.isMobile?{color:M.BLUE_D}:{},function(){return U(e,t.labelStyle,i,i,s)}));e.style({stroke:t.isMobile?M.BLUE_D:M.DYNAMIC,strokeWidth:3.5},function(){r.push(e.line([a,-.2],[a,.2]));r.push(e.line([i,-.2],[i,.2]))});return r});var H=function(e){f(o,e);function o(){var e;var f;i(this,o);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}f=c(this,(e=p(o)).call.apply(e,[this].concat(r)));v(h(f),"state",{numDivisionsEmpty:false});v(h(f),"change",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return y.change.apply(h(f),t)});v(h(f),"isValid",function(){var e=f.props.range;var t=f.props.numLinePosition;var r=f.props.divisionRange;t=t==null?e[0]:t;return e[0]<e[1]&&S.sign(t-e[0])>=0&&S.sign(t-e[1])<=0&&r[0]<r[1]&&0<f.props.numDivisions&&0<f.props.snapDivisions});v(h(f),"onNumDivisionsChange",function(e,t){var r=f.props.divisionRange.slice();var n=f.props.range[1]-f.props.range[0];e=Math.round(e);e=e<0?e*-1:e;if(e){var o=_.extend({},f.props,{tickStep:n/e});var a=f.snapNumLinePosition(o,f.props.numLinePosition);f.setState({numDivisionsEmpty:false},function(){f.props.onChange({divisionRange:r,numDivisions:e,numLinePosition:a},t)})}else{f.setState({numDivisionsEmpty:true},t)}});v(h(f),"_handleTickCtrlFocus",function(){f.props.onFocus(["tick-ctrl"])});v(h(f),"_handleTickCtrlBlur",function(){f.props.onBlur(["tick-ctrl"])});v(h(f),"focus",function(){if(f.props.isTickCtrl){f.refs["tick-ctrl"].focus();return true}});v(h(f),"focusInputPath",function(e){if(e.length===1){f.refs[e[0]].focus()}});v(h(f),"blurInputPath",function(e){if(e.length===1){f.refs[e[0]].blur()}});v(h(f),"getInputPaths",function(){if(f.props.isTickCtrl){return[["tick-ctrl"]]}else{return[]}});v(h(f),"getDOMNodeForPath",function(e){if(e.length===1){return m.findDOMNode(f.refs[e[0]])}});v(h(f),"getGrammarTypeForPath",function(e){if(e.length===1&&e[0]==="tick-ctrl"){return"number"}});v(h(f),"setInputValue",function(e,t,r){if(e.length===1&&e[0]==="tick-ctrl"){f.onNumDivisionsChange(t,r)}});v(h(f),"_renderGraphie",function(){var e=f.props.range;var t=e[1]-e[0];var r=_.pick(f.props,["range","isTickCtrl"]);var n=_.extend({},f.props,{tickStep:t/f.props.numDivisions});return s.createElement(x,{ref:"graphie",key:f.props.labelStyle,box:[f.props.apiOptions.isMobile?288:460,80],options:r,onMouseDown:function e(t){f.refs.graphie.movables.numberLinePoint.grab(t)},setup:f._setupGraphie,setDrawingAreaAvailable:f.props.apiOptions.setDrawingAreaAvailable,isMobile:f.props.apiOptions.isMobile},s.createElement(q,a({},_.pick(n,["range","numDivisions","labelTicks","labelStyle","labelRange","tickStep"]),{isMobile:f.props.apiOptions.isMobile})),f._renderInequality(n),f._renderNumberLinePoint(n))});v(h(f),"snapNumLinePosition",function(e,t){var r=e.range[0];var n=e.range[1];var o=e.tickStep/e.snapDivisions;var a=j(t,r,n);a=r+S.roundTo(a-r,o);I(_.isFinite(a));return a});v(h(f),"_renderNumberLinePoint",function(n){var e=_(["lt","gt"]).contains(n.rel);var t;if(e){t=M._BACKGROUND}else if(n.static){t=M.DYNAMIC}else{t=M.INTERACTIVE}var r={fill:t,stroke:n.static?M.DYNAMIC:M.INTERACTIVE,"stroke-width":e?3:1};var o={fill:e?M._BACKGROUND:M.INTERACTING,"stroke-width":e?3:1};var a=n.isInequality?{stroke:M.INTERACTIVE,"fill-opacity":e?0:1}:{};return s.createElement(E,{ref:"numberLinePoint",pointSize:6,coord:[n.numLinePosition,0],constraints:[function(e,t){return[e[0],t[1]]},function(e,t){var r=f.snapNumLinePosition(n,e[0]);return[r,e[1]]}],normalStyle:r,highlightStyle:o,onMove:function e(t){f.change({numLinePosition:t[0]});f.props.trackInteraction()},isMobile:f.props.apiOptions.isMobile,mobileStyleOverride:a,showTooltips:f.props.showTooltips,xOnlyTooltip:true})});v(h(f),"handleReverse",function(){var e=D[f.props.rel];f.props.onChange({rel:e})});v(h(f),"handleToggleStrict",function(){var e=R[f.props.rel];f.props.onChange({rel:e})});v(h(f),"_getInequalityEndpoint",function(e){var t=_(["ge","gt"]).contains(e.rel);var r=400;var n=e.range;var o=(n[1]-n[0])/r;var a=A*o;var i=n[0]-a;var s=n[1]+a;var l=t?[s,0]:[i,0];return l});v(h(f),"_renderInequality",function(e){if(e.isInequality){var t=f._getInequalityEndpoint(e);var r={arrows:"->",stroke:f.props.apiOptions.isMobile?M.INTERACTIVE:M.DYNAMIC,strokeWidth:3.5};var n=["ge","gt"].includes(e.rel);return s.createElement(C,{start:[(n?.4:-.4)+e.numLinePosition,0],end:t,style:r})}else{return null}});v(h(f),"_setupGraphie",function(e,t){if(!f.isValid()){return}var r=f.props.apiOptions.isMobile?288-A*2:400;var n=t.range;var o=(n[1]-n[0])/r;var a=A*o;var i=n[0]-a;var s=n[1]+a;var l=f.props.labelStyle==="improper"||f.props.labelStyle==="mixed"||f.props.labelStyle==="non-reduced";var u=l?-1.5:-1;var c=1;e.init({range:[[i,s],[u,c]],scale:[1/o,40],isMobile:f.props.apiOptions.isMobile});var p=(n[0]+n[1])/2;e.line([p,0],[s,0],{arrows:"->"});e.line([p,0],[i,0],{arrows:"->"})});v(h(f),"getUserInput",function(){return{numLinePosition:f.props.numLinePosition,rel:f.props.isInequality?f.props.rel:"eq",numDivisions:f.props.numDivisions,divisionRange:f.props.divisionRange}});v(h(f),"simpleValidate",function(e){return o.validate(f.getUserInput(),e)});return f}u(o,[{key:"render",value:function e(){var r=this.props.divisionRange;var t=r[0]+N+r[1];var n=this.props.numDivisions<r[0]||this.props.numDivisions>r[1];var o=s.createElement("div",null,s.createElement("input",{type:"button",className:"simple-button",value:i18n._("Switch direction"),onClick:this.handleReverse}),s.createElement("input",{type:"button",className:"simple-button",value:_(["le","ge"]).contains(this.props.rel)?i18n._("Make circle open"):i18n._("Make circle filled"),onClick:this.handleToggleStrict}));var a;if(this.props.isTickCtrl){var i;if(this.props.apiOptions.customKeypad){i=w}else if(this.props.apiOptions.staticRender){i=O}else{i=b}a=s.createElement("label",null,i18n._("Number of divisions:")," ",s.createElement(i,{ref:"tick-ctrl",value:this.state.numDivisionsEmpty?null:this.props.numDivisions||r[0],checkValidity:function e(t){return t>=r[0]&&t<=r[1]},onChange:this.onNumDivisionsChange,onFocus:this._handleTickCtrlFocus,onBlur:this._handleTickCtrlBlur,useArrowKeys:true,keypadElement:this.props.keypadElement}))}return s.createElement("div",{className:"perseus-widget "+"perseus-widget-interactive-number-line"},a,!this.isValid()?s.createElement("div",{className:"perseus-error"},i18n.doNotTranslate("Invalid number line configuration.")):this.props.isTickCtrl&&n?s.createElement("div",{className:"perseus-error"},i18n.$_("Please make sure the number of divisions is "+"in the range %(divRangeString)s.",{divRangeString:t})):this._renderGraphie(),!this.props.static&&this.props.isInequality&&o)}}]);return o}(s.Component);v(H,"propTypes",o({},y.propTypes,{range:g.arrayOf(g.number).isRequired,labelRange:g.arrayOf(g.number).isRequired,labelStyle:g.string.isRequired,labelTicks:g.bool.isRequired,divisionRange:g.arrayOf(g.number).isRequired,numDivisions:g.number.isRequired,snapDivisions:g.number.isRequired,isTickCtrl:g.bool.isRequired,isInequality:g.bool.isRequired,numLinePosition:g.number.isRequired,rel:g.oneOf(["lt","gt","le","ge"]),onFocus:g.func.isRequired,onBlur:g.func.isRequired,onChange:g.func.isRequired,apiOptions:P.propTypes,keypadElement:k,static:g.bool,showTooltips:g.bool,trackInteraction:g.func.isRequired}));v(H,"defaultProps",{range:[0,10],labelStyle:"decimal",labelRange:[null,null],divisionRange:[1,12],labelTicks:true,isTickCtrl:false,isInequality:false,numLinePosition:0,snapDivisions:2,showTooltips:false,rel:"ge",apiOptions:P.defaults});_.extend(H,{validate:function e(t,r){var n=r.range;var o=t.divisionRange;var a=r.initialX!=null?r.initialX:n[0];var i=r.isInequality?"ge":"eq";var s=r.correctRel||"eq";var l=S.equal(t.numLinePosition,r.correctX||0);var u=t.numDivisions>o[1]||t.numDivisions<o[0];if(t.isTickCrtl&&u){return{type:"invalid",message:"Number of divisions is outside the allowed range."}}else if(l&&s===t.rel){return{type:"points",earned:1,total:1,message:null}}else if(t.numLinePosition===a&&t.rel===i){return{type:"invalid",message:null}}else{return{type:"points",earned:0,total:1,message:null}}}});var z=function e(t){var r=_.pick(t,["range","labelRange","labelStyle","labelTicks","divisionRange","snapDivisions","isTickCtrl","isInequality","showTooltips"]);var n=t.initialX!=null?t.initialX:t.range[0];var o=t.range[1]-t.range[0];var a;if(t.numDivisions!=null){a=t.numDivisions}else if(t.tickStep!=null){a=o/t.tickStep}else{a=undefined}_.extend(r,{numLinePosition:n,numDivisions:a,snapDivisions:r.snapDivisions||undefined});return r};var W=function e(t){var r=_.pick(t,["range","labelRange","labelStyle","labelTicks","divisionRange","snapDivisions","isInequality"]);var n=t.correctX!=null?t.correctX:t.range[0];var o=t.range[1]-t.range[0];var a;if(t.numDivisions!=null){a=t.numDivisions}else if(t.tickStep!=null){a=o/t.tickStep}else{a=undefined}_.extend(r,{numLinePosition:n,numDivisions:a,rel:t.isInequality?t.correctRel:null,snapDivisions:r.snapDivisions||undefined});return r};e.exports={name:"number-line",displayName:"Number line",widget:H,transform:z,staticTransform:W}},qoj5:function(e,t,r){"use strict";r("ma9I");r("5DmW");r("NBAS");var n=o(r("q1tI"));function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function s(e,t,r){if(t)a(e.prototype,t);if(r)a(e,r);return e}function l(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return c(e)}function u(e){u=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return u(e)}function c(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)f(e,t)}function f(e,t){f=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return f(e,t)}function h(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var d=r("aeDP");var v=function(e){p(a,e);function a(){var e;var t;i(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++){n[o]=arguments[o]}t=l(this,(e=u(a)).call.apply(e,[this].concat(n)));h(c(t),"state",{didMount:false});return t}s(a,[{key:"componentDidMount",value:function e(){this.setState({didMount:true})}},{key:"render",value:function e(){if(this.state.didMount){return n.createElement(d,this.props)}else{return n.createElement("div",null)}}}]);return a}(n.Component);e.exports=v},vUnj:function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("5DmW");r("NBAS");r("FZtP");var c=o(r("q1tI"));var n;function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function a(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){v(t,e,r[e])})}return t}function i(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function l(e,t,r){if(t)s(e.prototype,t);if(r)s(e,r);return e}function u(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return f(e)}function p(e){p=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return p(e)}function f(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function h(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)d(e,t)}function d(e,t){d=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return d(e,t)}function v(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var g=r("mR6N"),m=g.StyleSheet,y=g.css;var b=r("17x9");var _=r("F/us");var O=r("+jAD");var w=r("j8wP");var P=r("Atlv");var k=r("TBZ3");var x=r("UcaO");var E=r("zahm"),C=E.linterContextProps,S=E.linterContextDefault;var T={showPrompt:"Explain",hidePrompt:"Hide explanation",explanation:"explanation goes here\n\nmore explanation",widgets:{},linterContext:S};var M=function(e){h(a,e);function a(){var e;var n;i(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++){r[o]=arguments[o]}n=u(this,(e=p(a)).call.apply(e,[this].concat(r)));v(f(n),"state",{expanded:false});v(f(n),"change",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return O.change.apply(f(n),t)});v(f(n),"_onClick",function(){n.setState({expanded:!n.state.expanded});n.props.trackInteraction()});v(f(n),"getUserInput",function(){return{}});v(f(n),"simpleValidate",function(e){return a.validate(n.getUserInput(),e)});return n}l(a,[{key:"render",value:function e(){var t=this.props.apiOptions.baseElements.Link;var r=this.props.apiOptions,n=r.isArticle,o=r.isMobile;var a=this.state.expanded?this.props.hidePrompt:this.props.showPrompt;var i;var s="javascript:void(0)";var l=this._onClick;if(o){i=c.createElement("div",{className:y(R.linkContainer)},c.createElement("a",{className:y(R.mobileExplanationLink),href:s,onClick:l},a),this.state.expanded&&c.createElement("svg",{className:y(R.disclosureArrow)},c.createElement("polygon",{style:{fill:D},points:"0,".concat(A," ")+"".concat(N,",").concat(A," ")+"".concat(N/2,",0")})))}else{if(n){i=c.createElement("div",{className:y(R.linkContainer,R.articleLink)},c.createElement(t,{className:y(R.explanationLink),style:R.explanationLink,href:s,onClick:l},"[".concat(a,"]")))}else{i=c.createElement("div",{className:y(R.linkContainer,R.exerciseLink)},c.createElement(t,{className:y(R.explanationLink),href:s,onClick:l},"[".concat(a,"]")))}}var u=o?R.contentExpandedMobile:R.contentExpanded;return c.createElement("div",{className:y(R.container)},i,c.createElement("div",{className:y(R.content,o&&R.contentMobile,this.state.expanded&&u),style:{height:this.state.expanded?"auto":0,overflow:this.state.expanded?"visible":"hidden"},ref:"content"},c.createElement(P,{apiOptions:this.props.apiOptions,content:this.props.explanation,widgets:this.props.widgets,linterContext:this.props.linterContext})))}}]);return a}(c.Component);v(M,"propTypes",a({},O.propTypes,{apiOptions:w.Options.propTypes,explanation:b.string,hidePrompt:b.string,showPrompt:b.string,trackInteraction:b.func.isRequired,widgets:b.object,linterContext:C}));v(M,"defaultProps",T);var j=23;var I=10;var N=30;var A=14;var D=x.gray95;var R=m.create({container:{display:"inline",position:"relative"},linkContainer:{display:"inline-block"},explanationLink:{fontStyle:"italic",color:"#007d96"},articleLink:{fontSize:20,lineHeight:"30px"},exerciseLink:{fontSize:14,lineHeight:"19.6px"},mobileExplanationLink:(n={color:x.kaGreen,borderBottom:"dashed 1px ".concat(x.kaGreen),textDecoration:"none"},v(n,k.xl,{fontSize:22,lineHeight:1.4}),v(n,k.lgOrSmaller,{fontSize:20,lineHeight:1.5}),v(n,k.smOrSmaller,{fontSize:18,lineHeight:1.2}),n),content:{position:"relative",transition:"margin-top 0.1s"},contentExpanded:{borderLeft:"5px solid #ccc",marginLeft:-j,paddingLeft:j,paddingBottom:I,marginBottom:A,marginTop:A},contentExpandedMobile:{boxSizing:"content-box",paddingTop:32,paddingBottom:32,marginTop:A},contentMobile:{background:D,marginLeft:x.negativePhoneMargin,marginRight:x.negativePhoneMargin,paddingLeft:x.phoneMargin,paddingRight:x.phoneMargin},disclosureArrow:{bottom:-(A+5),height:A,left:"50%",marginLeft:-(N/2),position:"absolute",width:N}});_.extend(M,{validate:function e(t,r){return{type:"points",earned:0,total:0,message:null}}});e.exports={name:"explanation",displayName:"Explanation",accessible:true,defaultAlignment:"inline",widget:M,transform:_.identity,isLintable:true}},w4kA:function(e,t,r){"use strict";r("5DmW");var n=o(r("q1tI"));function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}var a=r("17x9");var i=r("fhzG");var s=r("i8i4");var l=r("F/us");var u=r("e2gc");var c=r("j8wP").Options;var p=r("NT9k");var f=r("yPu2");var h={url:null,top:0,left:0};var d=i({displayName:"Measurer",propTypes:{apiOptions:c.propTypes,box:a.arrayOf(a.number),image:a.shape({url:a.string,top:a.number,left:a.number}),showProtractor:a.bool,protractorX:a.number,protractorY:a.number,showRuler:a.bool,rulerLabel:a.string,rulerTicks:a.number,rulerPixels:a.number,rulerLength:a.number},getDefaultProps:function e(){return{box:[480,480],image:{},showProtractor:true,protractorX:7.5,protractorY:.5,showRuler:false,rulerLabel:"",rulerTicks:10,rulerPixels:40,rulerLength:10}},getInitialState:function e(){return{}},render:function e(){var t=l.extend({},h,this.props.image);return n.createElement("div",{className:"perseus-widget perseus-widget-measurer "+"graphie-container above-scratchpad",style:{width:this.props.box[0],height:this.props.box[1]}},t.url&&n.createElement("div",{style:{position:"relative",top:t.top,left:t.left}},n.createElement(f,{src:t.url})),n.createElement("div",{className:"graphie",ref:"graphieDiv"}))},componentDidMount:function e(){this.setupGraphie()},componentDidUpdate:function e(t){var r=l.any(["box","showProtractor","showRuler","rulerLabel","rulerTicks","rulerPixels","rulerLength"],function(e){return t[e]!==this.props[e]},this);if(r){this.setupGraphie()}},setupGraphie:function e(){var t=s.findDOMNode(this.refs.graphieDiv);u(t).empty();var r=this.graphie=p.createGraphie(t);var n=[40,40];var o=[[0,this.props.box[0]/n[0]],[0,this.props.box[1]/n[1]]];r.init({range:o,scale:n});r.addMouseLayer({allowScratchpad:true,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable});if(this.protractor){this.protractor.remove()}if(this.props.showProtractor){this.protractor=r.protractor([this.props.protractorX,this.props.protractorY])}if(this.ruler){this.ruler.remove()}if(this.props.showRuler){this.ruler=r.ruler({center:[(o[0][0]+o[0][1])/2,(o[1][0]+o[1][1])/2],label:this.props.rulerLabel,pixelsPerUnit:this.props.rulerPixels,ticksPerUnit:this.props.rulerTicks,units:this.props.rulerLength})}},getUserInput:function e(){return{}},simpleValidate:function e(t){return d.validate(this.getUserInput(),t)},focus:u.noop});l.extend(d,{validate:function e(t,r){return{type:"points",earned:1,total:1,message:null}}});var v={1:function _(e){var t=l(e).chain().omit("imageUrl","imageTop","imageLeft").extend({image:{url:e.imageUrl,top:e.imageTop,left:e.imageLeft}}).value();return t}};e.exports={name:"measurer",displayName:"Measurer",widget:d,version:{major:1,minor:0},propUpgrades:v}},y1hP:function(e,t,r){"use strict";r("pNMO");r("ma9I");r("TeQF");r("5DmW");r("FZtP");var h=o(r("q1tI"));var n;function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function a(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){i(t,e,r[e])})}return t}function i(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var d=r("TSYQ");var s=r("mR6N"),l=s.StyleSheet,v=s.css;var u=r("17x9");var c=r("fhzG");var _=r("F/us");var p=r("e2gc");var f=r("j8wP").Options;var g=r("UcaO"),m=g.baseUnitPx;var y=r("+jAD");var b=r("TBZ3");var O=r("Atlv");var w=r("yPu2");var P=r("zahm"),k=P.linterContextProps,x=P.linterContextDefault;var E=400;var C=[0,10];var S={url:null,width:0,height:0};var T=["block","float-left","float-right","full-width"];var M=["block","full-width"];var j="block";var I=c({displayName:"ImageWidget",propTypes:a({},y.propTypes,{alignment:u.oneOf(T),alt:u.string,apiOptions:f.propTypes,backgroundImage:u.shape({url:u.string,width:u.number,height:u.number}),box:u.arrayOf(u.number),caption:u.string,labels:u.arrayOf(u.shape({content:u.string,coordinates:u.arrayOf(u.number),alignment:u.string})),range:u.arrayOf(u.arrayOf(u.number)),title:u.string,trackInteraction:u.func.isRequired,linterContext:k}),statics:{styles:l.create({caption:(n={display:"inline-block",marginTop:m,maxWidth:640},i(n,b.lgOrSmaller,{maxWidth:540}),i(n,b.smOrSmaller,{maxWidth:450}),n)})},getDefaultProps:function e(){return{alignment:j,title:"",range:[C,C],box:[E,E],backgroundImage:S,labels:[],alt:"",caption:"",linterContext:x}},change:function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}return y.change.apply(this,r)},getUserInput:function e(){return null},simpleValidate:function e(t){return I.validate(this.getUserInput(),t)},focus:p.noop,render:function e(){var t;var r;var n=this.props.apiOptions;var o=this.props.backgroundImage;if(o.url){t=h.createElement(w,{src:o.url,alt:this.props.alt,overrideAriaHidden:true,width:o.width,height:o.height,preloader:n.imagePreloader,extraGraphie:{box:this.props.box,range:this.props.range,labels:this.props.labels},trackInteraction:this.props.trackInteraction,zoomToFullSizeOnMobile:n.isMobile,constrainHeight:n.isMobile,allowFullBleed:n.isMobile})}if(this.props.alt){r=h.createElement("span",{className:"perseus-sr-only"},h.createElement(O,{content:this.props.alt,apiOptions:n,linterContext:this.props.linterContext}))}if(n.isMobile){var a;if(this.props.title||this.props.caption){var i=this.props.title;if(i){if(this.props.caption&&!/[.?!"']\s*$/.test(i)){i+="."}i="**".concat(i,"** ")}var s=d({"perseus-image-caption":true,"has-title":!!i});var l=this.props.alignment;var u=l==="block"||l==="full-width";var c=u?null:"0 !important";a=h.createElement("div",{className:s},h.createElement("div",{className:v(I.styles.caption),style:{minWidth:c}},h.createElement(O,{content:i+this.props.caption,apiOptions:n,linterContext:this.props.linterContext})))}return h.createElement("div",{className:"perseus-image-widget"},t,r,a)}else{var p;var f;if(this.props.title){p=h.createElement("div",{className:"perseus-image-title"},h.createElement(O,{content:this.props.title,apiOptions:n,linterContext:this.props.linterContext}))}if(this.props.caption){f=h.createElement("div",{className:"perseus-image-caption"},h.createElement(O,{content:this.props.caption,apiOptions:n,linterContext:this.props.linterContext}))}return h.createElement("div",{className:"perseus-image-widget"},p,t,r,f)}}});_.extend(I,{validate:function e(t,r){return{type:"points",earned:0,total:0,message:null}}});e.exports={name:"image",accessible:function e(t){var r=t.backgroundImage;return!(r&&r.url&&!t.alt)},defaultAlignment:j,supportedAlignments:M,displayName:"Image",widget:I,isLintable:true}},zyiX:function(e,t,r){"use strict";r("pNMO");r("4Brf");r("ma9I");r("TeQF");r("yXV3");r("4mDm");r("T63A");r("5DmW");r("NBAS");r("07d7");r("inlA");r("FZtP");r("3bBZ");var i=o(r("q1tI"));var s=n(r("Q8Wn"));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function a(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){O(t,e,r[e])})}return t}function l(e,t){return p(e)||c(e,t)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function c(e,t){var r=[];var n=true;var o=false;var a=undefined;try{for(var i=e[Symbol.iterator](),s;!(n=(s=i.next()).done);n=true){r.push(s.value);if(t&&r.length===t)break}}catch(e){o=true;a=e}finally{try{if(!n&&i["return"]!=null)i["return"]()}finally{if(o)throw a}}return r}function p(e){if(Array.isArray(e))return e}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function d(e,t,r){if(t)h(e.prototype,t);if(r)h(e,r);return e}function v(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return m(e)}function g(e){g=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return g(e)}function m(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function y(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)b(e,t)}function b(e,t){b=Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return b(e,t)}function O(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}var w=r("17x9");var _=r("F/us");var P=r("e2gc");var k=r("+jAD");var x=r("fUCW");var E=r("uBl0").updateQueryString;var C=function(e){y(a,e);function a(){var e;var n;f(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++){r[o]=arguments[o]}n=v(this,(e=g(a)).call.apply(e,[this].concat(r)));O(m(n),"getUserInput",function(){return x.getUserInput.call(m(n))});O(m(n),"handleMessageEvent",function(e){var t={};try{t=JSON.parse(e.originalEvent.data)}catch(e){return}if(_.isUndefined(t.testsPassed)){return}var r=t.testsPassed?"correct":"incorrect";n.change({status:r,message:t.message})});O(m(n),"change",function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return k.change.apply(m(n),t)});O(m(n),"simpleValidate",function(e){return a.validate(n.getUserInput(),e)});return n}d(a,[{key:"componentDidMount",value:function e(){P(window).on("message",this.handleMessageEvent)}},{key:"componentWillUnmount",value:function e(){P(window).off("message",this.handleMessageEvent)}},{key:"render",value:function e(){var o={width:String(this.props.width),height:String(this.props.height)};Object.entries(o).forEach(function(e){var t=l(e,2),r=t[0],n=t[1];if(!n.endsWith("%")&&!n.endsWith("px")){o[r]=n+"px"}});var t=this.props.url;if(t&&t.length&&t.indexOf("http")!==0){t="https://www.khanacademy.org/computer-programming/program/"+t+"/embedded?buttons=no&embed=yes&editor=no&author=no";t=E(t,"width",this.props.width);t=E(t,"height",this.props.height);t=E(t,"origin",s.default.origin)}if(this.props.settings){var r={};_.each(this.props.settings,function(e){if(e.name&&e.value){r[e.name]=e.value}});t=E(t,"settings",JSON.stringify(r))}var n="allow-same-origin allow-scripts";n+=" allow-top-navigation";return i.createElement("iframe",{sandbox:n,style:o,src:t,allowFullScreen:this.props.allowFullScreen})}}]);return a}(i.Component);O(C,"propTypes",a({},k.propTypes,{width:w.oneOfType([w.string,w.number]),height:w.oneOfType([w.string,w.number]),url:w.string,settings:w.array,status:w.oneOf(["incomplete","incorrect","correct"]),message:w.string,allowFullScreen:w.bool,allowTopNavigation:w.bool}));O(C,"defaultProps",{status:"incomplete",message:null,allowFullScreen:false,allowTopNavigation:false});_.extend(C,{validate:function e(t,r){if(t.status==="correct"){return{type:"points",earned:1,total:1,message:t.message||null}}else if(t.status==="incorrect"){return{type:"points",earned:0,total:1,message:t.message||null}}else{return{type:"invalid",message:"Keep going, you're not there yet!"}}}});e.exports={name:"iframe",displayName:"Iframe",widget:C,hidden:true}}}]);
//# sourceMappingURL=../../sourcemaps/en/6645f34147d50b2fd95b57b3333bb9f7.7c31a3930d85ba90a815.js.map