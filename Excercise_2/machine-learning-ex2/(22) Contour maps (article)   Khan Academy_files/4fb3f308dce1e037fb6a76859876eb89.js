(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["4fb3f308dce1e037fb6a76859876eb89"],{wlAN:function(e,t,n){"use strict";n("ma9I");n("zKZe");n("5DmW");n("NBAS");n("07d7");n("5s+n");Object.defineProperty(t,"__esModule",{value:true});t.default=t.TeacherContentUpsellPopupPresentational=void 0;var i=k(n("q1tI"));var r=n("bOus");var o=n("mR6N");var s=n("JimW");var l=n("Vxy9");var a=b(n("wa3X"));var u=b(n("Pwnf"));var c=b(n("gE8/"));var d=b(n("ZpD3"));var p=b(n("x0Jh"));var f=b(n("Dg7G"));var h=b(n("ttkX"));var v=b(n("6OHE"));var y=n("Y8R6");var m=b(n("Xj6v"));var g=b(n("4Du/"));function b(e){return e&&e.__esModule?e:{default:e}}function k(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function C(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function S(e,t,n){if(t)w(e.prototype,t);if(n)w(e,n);return e}function T(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return O(e)}function E(e){E=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return E(e)}function O(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function P(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)x(e,t)}function x(e,t){x=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return x(e,t)}function A(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function M(){M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};return M.apply(this,arguments)}var i18n=n("HEOz");var R=function e(t){return i.createElement(a.default,M({light:true},t))};var j=1e3;var B=function(e){P(a,e);function a(){var e;var o;C(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++){n[r]=arguments[r]}o=T(this,(e=E(a)).call.apply(e,[this].concat(n)));A(O(o),"state",{dismissed:false,offsetY:null,onMeasureHeight:null,response:null,stage:"unmeasured"});A(O(o),"handleRef",function(e){var t=o.state.onMeasureHeight;if(e){var n=e.getBoundingClientRect(),r=n.top;var a=window.innerHeight-r;t&&t(a);o.setState({onMeasureHeight:null})}});A(O(o),"handleTeacherResponseClick",function(){var e=o.props.onTeacherResponseClick;e&&e();o.setState({response:"teacher"})});A(O(o),"handleStudentResponseClick",function(){var e=o.props.onStudentResponseClick;e&&e();o.setState({response:"student"})});A(O(o),"handleDismissClick",function(){var e=o.props.onDismissClick;e&&e();o.disappear()});A(O(o),"appear",function(){var e=o.props.onAppear;e&&e();o.measureHeight().then(function(e){if(o._mounted){o.setState({offsetY:e,stage:"appeared"})}})});A(O(o),"disappear",function(){var e=o.state.stage;if(e==="appeared"){o.measureHeight().then(function(e){if(o._mounted){o.setState({offsetY:e,stage:"disappearing"})}})}});return o}S(a,[{key:"componentDidMount",value:function e(){this._mounted=true;var t=this.props.delayAppearanceMs;window.setTimeout(this.appear,t)}},{key:"componentWillUnmount",value:function e(){this._mounted=false}},{key:"measureHeight",value:function e(){var n=this;return new Promise(function(e,t){if(n._mounted){n.setState({onMeasureHeight:e})}})}},{key:"renderHeadingText",value:function e(){var t=this.props.classUpsell;var n=this.state.response;if(n==="teacher"){if(t.unitMasteryEnabled){return i18n._("Practice, 100% free")}else{return i18n._("Free learning resources")}}else if(n==="student"){return i18n._("Studying for a test?")}else{return i18n._("Are you a student or a teacher?")}}},{key:"renderBodyTextAndButtons",value:function e(){var t=this.state.response;if(t==="teacher"){return this.renderTeacherCTA()}else if(t==="student"){return this.renderStudentCTA()}else{return this.renderChoiceButtons()}}},{key:"renderChoiceButtons",value:function e(){return i.createElement(s.View,{style:z.buttonSet},i.createElement(R,{onClick:this.handleStudentResponseClick,style:z.choiceButton},i18n._("Student")),i.createElement(R,{onClick:this.handleTeacherResponseClick,style:z.choiceButton},i18n._("Teacher")))}},{key:"renderTeacherCTA",value:function e(){var t=this.props,n=t.onTeacherCTAClick,r=t.classUpsell.unitMasteryEnabled;return i.createElement(l.Body,{style:z.body},i.createElement(s.View,{style:z.bodyText},r?i18n._("Use Khan Academy’s personalized practice to help your students succeed."):i18n._("Use Khan Academy’s learning and practice content to help your students succeed.")),i.createElement(R,{width:"100%",onClick:n,style:z.ctaButton},i18n._("Unlock your teacher tools")))}},{key:"renderStudentCTA",value:function e(){var t=this.props,n=t.onStudentCTAClick,r=t.classUpsell,a=r.lessonCount,o=r.topicTitle;return i.createElement(l.Body,{style:z.body},i.createElement(s.View,{style:z.bodyText},i18n.$_("Prepare with these %(lessonCount)s lessons on %(topicTitle)s.",{lessonCount:a,topicTitle:o})),i.createElement(R,{width:"100%",onClick:n,style:z.ctaButton},i18n._("Prepare for your test")))}},{key:"renderInner",value:function e(){var t=this.state,n=t.response,r=t.stage;var a=i.createElement(s.View,{style:z.inner},i.createElement(l.HeadingSmall,{style:z.heading},this.renderHeadingText()),this.renderBodyTextAndButtons());if(r!=="disappearing"){return i.createElement(h.default,{anchor:"bottom-left",childrenKey:n||"",distance:0,duration:200,twoStepSwap:true},a)}else{return a}}},{key:"renderContents",value:function e(){return i.createElement(i.Fragment,null,this.renderInner(),i.createElement(s.View,{style:z.dismissIconContainer},i.createElement(f.default,{onClick:this.handleDismissClick,colors:{color:u.default.white,hoveredColor:u.default.white}},i.createElement(p.default,{iconSize:12,size:40}))))}},{key:"renderAnimationContainer",value:function e(t){var n=this.state.onMeasureHeight;return i.createElement("div",{role:"dialog","aria-live":"polite",className:(0,o.css)(z.outer),ref:n&&this.handleRef,style:t,"data-test-id":"hack-ignore-focusable-not-visible-test"},this.renderContents())}},{key:"renderSlideIn",value:function e(){var n=this;var t=this.state.offsetY;return i.createElement(r.Motion,{key:"slideIn",defaultStyle:{translateY:t},style:{translateY:(0,r.spring)(0,{stiffness:380,damping:20})}},function(e){var t=e.translateY;return n.renderAnimationContainer({transform:"translateY(".concat(t,"px)")})})}},{key:"renderFadeOut",value:function e(){var n=this;return i.createElement(r.Motion,{key:"fadeOut",defaultStyle:{opacity:1},style:{opacity:(0,r.spring)(0,{stiffness:600,damping:40})}},function(e){var t=e.opacity;return n.renderAnimationContainer({opacity:t})})}},{key:"render",value:function e(){var t=this.state,n=t.dismissed,r=t.stage;if(n){return null}if(r==="unmeasured"){return this.renderAnimationContainer({opacity:0,pointerEvents:"none"})}else if(r==="appeared"){return this.renderSlideIn()}else if(r==="disappearing"){return this.renderFadeOut()}else{return null}}}]);return a}(i.Component);t.TeacherContentUpsellPopupPresentational=B;A(B,"defaultProps",{delayAppearanceMs:j});var H=function(e){P(o,e);function o(){var e;var t;C(this,o);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++){r[a]=arguments[a]}t=T(this,(e=E(o)).call.apply(e,[this].concat(r)));A(O(t),"state",{showPopup:false});return t}S(o,[{key:"componentDidMount",value:function e(){if(m.default.shouldShowPopup(this.props.location.queryParams.forceContentUpsellPopup)){this.setState({showPopup:true});m.default.dismiss()}}},{key:"render",value:function e(){var t=this.props.classUpsell;var n=this.state.showPopup;if(!n){return null}return i.createElement(B,{classUpsell:t,onAppear:function e(){return d.default.markMinorConversions([{id:"teacher_content_upsell_appear"}])},onTeacherCTAClick:function e(){d.default.markMinorConversions([{id:"teacher_content_upsell_cta_click",extra:{teacher:true}}]);(0,y.redirect)("/signup?isteacher=1")},onStudentCTAClick:function e(){d.default.markMinorConversions([{id:"teacher_content_upsell_cta_click",extra:{student:true}}]);(0,y.redirect)(t.href)},onTeacherResponseClick:function e(){d.default.markMinorConversions([{id:"teacher_content_upsell_teacher_response_click"}])},onStudentResponseClick:function e(){d.default.markMinorConversions([{id:"teacher_content_upsell_student_response_click"}])},onDismissClick:function e(){return d.default.markMinorConversions([{id:"teacher_content_upsell_dismiss_click"}])}})}}]);return o}(i.Component);var D=15;var U="1px solid rgba(0, 0, 0, 0)";var I=288;var z=o.StyleSheet.create({outer:{position:"fixed",bottom:D,right:D,zIndex:v.default.constants.zindexModalBackdrop-1,minWidth:I,color:"white",boxSizing:"border-box",boxShadow:"0 2px 4px 0 rgba(0, 0, 0, 0.5)",background:u.default.blue,borderRadius:v.default.borderRadius,outline:U},inner:{width:"100%",height:"100%",position:"relative",boxSizing:"border-box",padding:c.default.large},heading:{maxWidth:224},body:{marginTop:c.default.xSmall},bodyText:{maxWidth:I},dismissIconContainer:{opacity:.8,position:"absolute",top:0,right:0,":hover":{opacity:.9},":focus":{opacity:.9}},buttonSet:{width:"100%",flexDirection:"row",marginTop:c.default.large},choiceButton:{minWidth:112,outline:U,":not(:last-child)":{marginRight:16}},ctaButton:{width:"100%",marginTop:c.default.large,":not(:last-child)":{marginRight:16}}});var Y=(0,g.default)(H);t.default=Y}}]);
//# sourceMappingURL=../../sourcemaps/en/4fb3f308dce1e037fb6a76859876eb89.01d0783de4072e6cc3be.js.map