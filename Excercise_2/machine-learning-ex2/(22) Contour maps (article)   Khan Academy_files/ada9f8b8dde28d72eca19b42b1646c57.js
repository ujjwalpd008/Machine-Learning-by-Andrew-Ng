(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ada9f8b8dde28d72eca19b42b1646c57"],{AE4M:function(e,t,n){"use strict";n("pNMO");n("ma9I");n("TeQF");n("yq1k");n("yXV3");n("+2oP");n("5DmW");n("U3f4");n("JTJg");n("UxlC");n("hByQ");n("FZtP");Object.defineProperty(t,"__esModule",{value:true});t.getPostContext=k;t.showMainDiscussionInput=t.userNotScratchpadAuthorViewingHelpRequests=t.userIsScratchpadAuthorViewingLoadingHelpRequests=t.userIsScratchpadAuthorViewingOpenHelpRequests=t.userIsScratchpadAuthorViewingQuestionsTab=t.userIsScratchpadAuthor=t.userRestrictedPosting=t.userHasEnoughPoints=t.userIsLoggedIn=t.getModifiedDiscussionContext=t.getRespondButtonSrString=t.getDirectLinkSrString=t.capabilities=t.makeView=t.makeUser=t.isModeratorProfile=t.shouldAutoExpandReplies=t.shouldAutoExpandAnswers=t.EnglishLink=t.PostAuthorName=t.isPostUnanswered=t.userHasJustLoggedIn=t.loggedInQueryName=t.getAnswerInputId=t.getAriaAvatarName=void 0;var s=m(n("q1tI"));var a=n("Vxy9");var l=r(n("SGU3"));var c=r(n("whzC"));var u=n("i4Cj");var o=n("SjSX");var i=r(n("QCGh"));var p=r(n("Q8Wn"));var d=r(n("TqM9"));var f=r(n("mXPZ"));function r(e){return e&&e.__esModule?e:{default:e}}function m(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function g(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var r=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}r.forEach(function(e){v(t,e,n[e])})}return t}function v(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var i18n=n("HEOz");var y=function e(t){return t?t.replace(/_/g," "):""};t.getAriaAvatarName=y;var h=function e(t){return"".concat(t,"-answer-input")};t.getAnswerInputId=h;var b="loggedInViaDiscussion";t.loggedInQueryName=b;var w=function e(t){return t.href.indexOf("".concat(b,"=true"))!==-1};t.userHasJustLoggedIn=w;var P=function e(t,n){var r=n[t];if(!r||r.deleted||r.appearsAsDeleted){return false}var o=r.answers;if(!o.length){return true}var a=o.some(function(e){var t=n[e];return!t.deleted&&!t.appearsAsDeleted});return!a};t.isPostUnanswered=P;var O=function e(t){var n=t.kaid,r=t.name;var o=s.createElement(a.LabelLarge,{style:d.default.authorNickname},r);return s.createElement("div",null,n?s.createElement(i.default,{href:"/profile/".concat(n,"/discussion"),"aria-label":u.avatarStrings.goToUserProfile(r)},o):o)};t.PostAuthorName=O;var E=function e(t){if(p.default.kaLocale==="en"){return null}var n=window.location,r=n.pathname,o=n.search,a=n.hash;var i=c.default.safeLinkTo("https://en.khanacademy.org".concat(r).concat(o).concat(a));return s.createElement(l.default,{href:i,style:t.style,skipClientNav:true},u.miscStrings.englishDiscussionUpsell)};t.EnglishLink=E;var C=function e(t,n){var r=t.answers;if(!n||!r){return false}return r.includes(n)};t.shouldAutoExpandAnswers=C;var S=function e(t,n){var r=t.replyExpandKeys;if(!n||!r){return false}return r.includes(n)};t.shouldAutoExpandReplies=S;function k(e){var t=e.profile,n=e.post,r=e.moderatorMode;var o=x(t);var a=A({moderatorMode:r});return{user:o,post:n,view:a}}var T=function e(t){return Boolean(t&&t.get("isModerator"))};t.isModeratorProfile=T;var x=function e(t){if(!t){return{status:"LOGGED_OUT"}}return{status:"LOGGED_IN",isModerator:T(t),isChild:t.get("isChildAccount")}};t.makeUser=x;var A=function e(t){var n=t.moderatorMode;if(n){return{where:"FLAG_QUEUE"}}return{where:"CONTENT"}};t.makeView=A;var j=function e(t){return t.status==="LOGGED_IN"&&t.isModerator};var M=function e(t){return!!t.flags&&t.flags.length>0};var I=function e(t){return!M(t)};var L=function e(t){return t.definitelyNotSpam};var F=function e(t){return!L(t)};var D=function e(t){return t.where==="FLAG_QUEUE"};var R={clearFlags:function e(t){var n=t.user,r=t.post;return j(n)&&M(r)},approve:function e(t){var n=t.user,r=t.post,o=t.view;return D(o)&&j(n)&&F(r)&&I(r)}};t.capabilities=R;var K=function e(t,n){var r=n.authorNickname,o=n.title,a=n.content;var i=r;var s=o?o:a;var l=s.slice(0,50);var c=s.length>50;if(c){return i18n._("Posted %(timeago)s. Direct link to %(username)s's post “%(openingText)s...”",{timeago:t,username:i,openingText:l})}else{return i18n._("Posted %(timeago)s. Direct link to %(username)s's post “%(openingText)s”",{timeago:t,username:i,openingText:l})}};t.getDirectLinkSrString=K;var B=function e(t,n){var r=t.authorNickname,o=t.title,a=t.content;var i=r;var s=o?o:a;var l=s.slice(0,50);var c=s.length>50;if(n==="reply"){if(c){return i18n._("Reply to %(username)s's post “%(openingText)s...”",{username:i,openingText:l})}else{return i18n._("Reply to %(username)s's post “%(openingText)s”",{username:i,openingText:l})}}else if(n==="comment"){if(c){return i18n._("Comment on %(username)s's post “%(openingText)s...”",{username:i,openingText:l})}else{return i18n._("Comment on %(username)s's post “%(openingText)s”",{username:i,openingText:l})}}else{if(c){return i18n._("Answer %(username)s's post “%(openingText)s...”",{username:i,openingText:l})}else{return i18n._("Answer %(username)s's post “%(openingText)s”",{username:i,openingText:l})}}};t.getRespondButtonSrString=B;var V=function e(t,n){if(!t||!t.get||!f.default.isLoggedIn){return{restrictPosting:n}}var r=5e3;var o=t.get("isModerator");var a=t.get("points");var i=!o&&a<r;return{restrictPosting:i||n,notEnoughPoints:i}};var N=function e(t,n){return g({},n,V(t,n.restrictPosting))};t.getModifiedDiscussionContext=N;var q=function e(){return f.default.isLoggedIn};t.userIsLoggedIn=q;var H=function e(t){return!t.notEnoughPoints};t.userHasEnoughPoints=H;var U=function e(t){return t.restrictPosting};t.userRestrictedPosting=U;var W=function e(t,n,r){return t==="scratchpad"&&n.authorKaid===(0,o.getKaid)(r)};t.userIsScratchpadAuthor=W;var Q=function e(t,n,r,o){return t==="questions"&&W(n,r,o)};t.userIsScratchpadAuthorViewingQuestionsTab=Q;var z=function e(t,n,r,o,a){return t==="projecthelp"&&W(n,r,o)&&a===true};t.userIsScratchpadAuthorViewingOpenHelpRequests=z;var J=function e(t,n,r,o,a){return t==="projecthelp"&&W(n,r,o)&&(a===null||a===undefined)};t.userIsScratchpadAuthorViewingLoadingHelpRequests=J;var Y=function e(t,n,r,o){return t==="projecthelp"&&n==="scratchpad"&&!W(n,r,o)};t.userNotScratchpadAuthorViewingHelpRequests=Y;var G=function e(t,n,r,o,a){return q()&&H(r)&&!U(r)&&!Q(t,n,r,o)&&!z(t,n,r,o,a)&&!J(t,n,r,o,a)&&!Y(t,n,r,o)};t.showMainDiscussionInput=G},"Az/T":function(e,t,n){"use strict";n("pNMO");n("ma9I");n("TeQF");n("2B1R");n("5DmW");n("NBAS");n("FZtP");Object.defineProperty(t,"__esModule",{value:true});t.default=t.DiscussionList=void 0;var v=p(n("q1tI"));var r=n("/MKj");var y=n("mR6N");var h=u(n("wa3X"));var b=n("yhei");var o=u(n("Pwnf"));var w=n("Vxy9");var a=u(n("gE8/"));var P=n("JimW");var i=n("Pk2J");var O=u(n("y6Wz"));var E=n("AE4M");var C=n("i4Cj");var c=u(n("TqM9"));var s=u(n("cfQQ"));var l=n("DDFQ");function u(e){return e&&e.__esModule?e:{default:e}}function p(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function d(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var r=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}r.forEach(function(e){j(t,e,n[e])})}return t}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function g(e,t,n){if(t)m(e.prototype,t);if(n)m(e,n);return e}function S(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return T(e)}function k(e){k=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return k(e)}function T(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function x(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)A(e,t)}function A(e,t){A=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return A(e,t)}function j(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var M=function(e){x(o,e);function o(){var e;var g;f(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++){n[r]=arguments[r]}g=S(this,(e=k(o)).call.apply(e,[this].concat(n)));j(T(g),"getPostsToShow",function(){var e=g.props,t=e.postKeys,n=e.newPostKey,r=e.tab,o=e.contentKind,a=e.profile;var i=a&&a.get("isModerator");var s=r==="clarifications"&&o==="Article"&&!i;return s?t.filter(function(e){return e===n}):t});j(T(g),"isCompactView",function(){return g.props.discussionContext.viewMode==="compact"});j(T(g),"isMaximized",function(){return g.props.discussionContext.view==="maximized"});j(T(g),"maybeRenderListHeader",function(e){var t=g.props,n=t.tab,r=t.contentKind;if(e.length||!(r==="Video"&&n==="clarifications")){return null}return v.createElement(w.LabelLarge,{style:c.default.clarificationsListHeader},C.miscStrings.clarificationListSuggested)});j(T(g),"renderContent",function(e){var t=g.props,n=t.fetchingPosts,r=t.newPostKey,o=t.resetNewPostKeyInfo,a=t.tab,i=t.topicSlug,s=t.discussionContext,l=t.clarificationsEnabled,c=t.onContentPage,u=t.setFocusOnTopLevelInput,p=t.profile,d=t.contentKind,f=t.hasUnansweredHelpRequests;if(!e.length){if(n){return v.createElement(b.CircularSpinner,{size:"medium",style:I.noPostsWrapper})}else{var m=c&&(0,E.showMainDiscussionInput)(a,d,s,p,f);return v.createElement(P.View,{style:I.noPostsWrapper},v.createElement(w.LabelLarge,null,C.miscStrings.noPosts),m&&v.createElement(h.default,{onClick:u,style:I.noPostsButton},C.miscStrings.joinTheConversation))}}return v.createElement("ul",null,e.map(function(e){return v.createElement("li",{key:e,className:(0,y.css)(I.post,!g.isCompactView()&&I.postExtraSpacing)},v.createElement(O.default,{tab:a,postKey:e,newPostKey:r,resetNewPostKeyInfo:o,topicSlug:i,restrictPosting:s.restrictPosting,clarificationsEnabled:l,isMaximized:g.isMaximized(),moderatorMode:s.moderatorMode,viewMode:s.viewMode,isProjectFeedback:s.showProjectFeedback}))}))});return g}g(o,[{key:"render",value:function e(){var t=this.props,n=t.fetchingPosts,r=t.contentKind,o=t.isComplete,a=t.cursor,i=t.onNextPage;var s=this.getPostsToShow();var l=this.isMaximized();return v.createElement(P.View,{style:[I.wrapper,l&&I.maximizedContainer]},v.createElement(P.View,{style:[!l&&c.default.listWrapper,!this.isCompactView()&&I.listWrapperExtraSpacing]},r==="Topic"&&v.createElement(E.EnglishLink,{style:I.englishLink}),this.maybeRenderListHeader(s),this.renderContent(s)),a&&!o&&v.createElement(h.default,{onClick:i,spinner:n},C.miscStrings.showMore))}}]);return o}(v.Component);t.DiscussionList=M;var I=y.StyleSheet.create({wrapper:{width:"100%"},maximizedContainer:{backgroundColor:o.default.white,maxWidth:"100%",padding:"0 20px"},listWrapper:{backgroundColor:o.default.white,paddingTop:a.default.medium},listWrapperExtraSpacing:{paddingTop:a.default.xLarge},post:d({},c.default.postWrapper),postExtraSpacing:{marginBottom:a.default.large},linkStyledButton:{color:o.default.offBlack64,border:"none",backgroundColor:"transparent",cursor:"pointer",padding:0,margin:0},englishLink:{marginBottom:20},noPostsWrapper:{textAlign:"center",margin:"0 auto",padding:"".concat(a.default.xLarge,"px 0 ").concat(a.default.medium,"px")},noPostsButton:{marginTop:a.default.medium}});var L=function e(t){var n=t.tabs[t.currentTab];return{fetchingPosts:t.fetchingPosts,tab:t.currentTab,newPostKey:t.newPostKey,cursor:n.cursor,isComplete:n.isComplete,postKeys:n.postKeys,contentKind:t.contentKind}};var F={resetNewPostKeyInfo:l.resetNewPostKeyInfoAction,onNextPage:l.getNextPageAction,setFocusOnTopLevelInput:l.setFocusOnTopLevelInputAction};var D=(0,i.compose)(s.default,(0,r.connect)(L,F))(M);t.default=D},DDFQ:function(e,t,n){"use strict";n("pNMO");n("ma9I");n("TeQF");n("fbCW");n("5DmW");n("FZtP");Object.defineProperty(t,"__esModule",{value:true});t.updatePosts=t.toggleReplyInputAction=t.postSuccess=t.addReply=t.fetchReplies=t.modifyNotificationsAction=t.stopEditingPostAction=t.stopAcceptingClarificationAction=t.editAcceptedClarificationAction=t.startEditingPostAction=t.startAcceptingClarificationAction=t.acceptClarificationAction=t.editPost=t.undeletePost=t.deleteAcceptedClarificationPost=t.deletePost=t.clearFlags=t.changeType=t.flagPost=t.downvotePost=t.upvotePost=t.postSuccessAction=t.resetFocusOnTopLevelInputAction=t.setFocusOnTopLevelInputAction=t.resetNewPostKeyInfoAction=t.resetExpandKeyAction=t.changeSortByAction=t.changeTabAction=t.getNextPageAction=t.initializeDiscussionListComponentAction=t.initializeContentAction=t.clearAndFetchPostsAction=void 0;var r=o(n("P7jp"));var f=o(n("tCRy"));function o(e){return e&&e.__esModule?e:{default:e}}function m(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var r=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}r.forEach(function(e){a(t,e,n[e])})}return t}function a(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var g=function e(t){return function(e){r.default.log("Failed to ".concat(t,"!"),e)}};var p=function e(t,n){var r=n(),o=r.currentTab;t({type:"updatePosts",tab:o,posts:[],cursor:"",isComplete:true,totalCount:0})};var s=function e(i,t){var n=t();var s=n.currentTab,l=n.contentKind,c=n.youtubeId,u=n.apiId;p(i,t);i({type:"fetchingPosts"});f.default.get(u).fetchPosts(n).then(function(e){var t=e.feedback,n=e.cursor,r=e.totalCount,o=e.isComplete;var a={type:"updatePosts",tab:s,posts:t,cursor:n,totalCount:r,isComplete:o};if(s==="clarifications"&&l==="Video"&&c){f.default.get(u).fetchAcceptedClarifications({youtubeId:c}).then(function(e){i(m({},a,{acceptedClarificationPosts:e}))}).catch(g("fetch accepted clarifications"))}else{i(a)}return e}).catch(g("fetch posts"))};var i=function e(){return s};t.clearAndFetchPostsAction=i;var l=function e(n,r,o,a,i){return function(e,t){e({type:"initializeContent",contentKind:n,contentId:r,youtubeId:o,expandFeedbackType:a,qaExpandKey:i});s(e,t)}};t.initializeContentAction=l;var c=function e(n,r,o,a,i){return function(e,t){e({type:"initializeDiscussionListComponent",tab:n,cursor:r,apiId:o});if(i){e(H(n,i,r,a))}else{s(e,t)}}};t.initializeDiscussionListComponentAction=c;var u=function e(){return function(t,e){var n=e();var r=n.currentTab,o=n.tabs,a=n.apiId;var i=o[r];if(!i.cursor){return}t({type:"fetchingPosts"});f.default.get(a).fetchPosts(m({},n,{cursor:i.cursor})).then(function(e){t({type:"appendPosts",tab:r,posts:e.feedback,cursor:e.cursor,totalCount:e.totalCount,isComplete:e.isComplete});return e}).catch(g("get next"))}};t.getNextPageAction=u;var d=function e(n){return function(e,t){e({type:"changeTab",tab:n});s(e,t)}};t.changeTabAction=d;var v=function e(n){return function(e,t){e({type:"changeSortBy",sort:n});s(e,t)}};t.changeSortByAction=v;var y=function e(){return{type:"resetExpandKey"}};t.resetExpandKeyAction=y;var h=function e(){return{type:"resetNewPostKey"}};t.resetNewPostKeyInfoAction=h;var b=function e(){return{type:"setFocusOnTopLevelInput"}};t.setFocusOnTopLevelInputAction=b;var w=function e(){return{type:"resetFocusOnTopLevelInput"}};t.resetFocusOnTopLevelInputAction=w;var P=function e(t,n){return{type:"postSuccess",post:t,tab:n}};t.postSuccessAction=P;var O=function e(o){return function(e,t){var n=t(),r=n.apiId;f.default.get(r).upvotePost({postKey:o.key,upVoted:o.upVoted}).catch(g("upvote post"));e({type:"upvotePost",postKey:o.key})}};t.upvotePost=O;var E=function e(o){return function(e,t){var n=t(),r=n.apiId;f.default.get(r).downvotePost({postKey:o.key,downVoted:o.downVoted}).catch(g("downvote post"));e({type:"downvotePost",postKey:o.key})}};t.downvotePost=E;var C=function e(o,a){return function(e,t){var n=t(),r=n.apiId;e({type:"flagPost",postKey:o.key,flag:a});f.default.get(r).flagPost({postKey:o.key,flag:a}).catch(g("flag post"))}};t.flagPost=C;var S=function e(o,a){return function(e,t){var n=t(),r=n.apiId;f.default.get(r).changeType({postKey:o.key,intoType:a}).catch(g("change type of post"));e({type:"changePostType",postKey:o.key,postType:a})}};t.changeType=S;var k=function e(o){return function(e,t){var n=t(),r=n.apiId;f.default.get(r).clearFlags({postKey:o.key}).catch(g("clear flags"));e({type:"clearFlags",postKey:o.key})}};t.clearFlags=k;var T=function e(o){return function(e,t){var n=t(),r=n.apiId;f.default.get(r).deletePost({postKey:o.key}).catch(g("delete post"));e({type:"deletePost",postKey:o.key})}};t.deletePost=T;var x=function e(o){return function(e,t){var n=t(),r=n.apiId;f.default.get(r).deleteAcceptedClarification({clarificationId:o.id}).catch(g("delete accepted clarification"));e({type:"deleteAcceptedClarificationPost",clarificationId:o.id})}};t.deleteAcceptedClarificationPost=x;var A=function e(o){return function(e,t){var n=t(),r=n.apiId;f.default.get(r).undeletePost({postKey:o.key}).catch(g("undelete post"));e({type:"undeletePost",postKey:o.key})}};t.undeletePost=A;var j=function e(n,t){return function(e,t){e({type:"editPost",postKey:n.key,content:n.content})}};t.editPost=j;var M=function e(t,s,l,c,u,p,d){return function(t,e){var n=e(),r=n.youtubeId,o=n.clarificationBeingAcceptedId,a=n.apiId;if(!r){throw new Error("Can't accept a clarification if we don't know the youtubeId.")}if(!o){throw new Error("Can't accept a clarification if we don't have a clarificationBeingAcceptedId.")}var i={avatarSrc:s,nickname:l,kaid:c,youtubeId:r,openTimestamp:p,closeTimestamp:d,text:u};f.default.get(a).acceptClarification(m({},i)).then(function(e){f.default.get(a).deletePost({postKey:o}).then(function(){t({type:"acceptClarification",originalClarificationId:o,clarification:e})}).catch(g("delete suggested version of accepted clarification"))}).catch(g("post new accepted clarification"))}};t.acceptClarificationAction=M;var I=function e(t){return function(e){e({type:"startAcceptingClarification",clarificationId:t})}};t.startAcceptingClarificationAction=I;var L=function e(t){return function(e){e({type:"startEditingPost",postKey:t})}};t.startEditingPostAction=L;var F=function e(l,c,u){return function(t,e){var n=e(),r=n.acceptedClarificationPosts,o=n.postBeingEditedKey,a=n.apiId;var i=r.find(function(e){return e.id===o});if(!i){throw new Error("The clarification you're trying to edit doesn't seem to exist!"+"\nThe posts's key is:\n".concat(o||"unknown"))}var s=m({},i,{openTimestamp:c,closeTimestamp:u,text:l,youtubeId:i.youtubeId});f.default.get(a).editAcceptedClarification(m({},s)).then(function(e){t({type:"editAcceptedClarification",clarification:e});t({type:"stopEditingPost"})}).catch(g("edit accepted clarification"))}};t.editAcceptedClarificationAction=F;var D=function e(){return function(e){e({type:"stopAcceptingClarification"})}};t.stopAcceptingClarificationAction=D;var R=function e(){return function(e){e({type:"stopEditingPost"})}};t.stopEditingPostAction=R;var K=function e(o,a){return function(t,e){var n=e(),r=n.apiId;f.default.get(r).modifyNotificationsFlag({postKey:o,enable:a}).then(function(e){t({type:"updatePost",post:e})}).catch(g("modify notification settings"))}};t.modifyNotificationsAction=K;var B=function e(o){return function(t,e){var n=e(),r=n.apiId;f.default.get(r).fetchReplies({postKey:o}).then(function(e){t({type:"updateReplies",parentKey:o,replies:e})}).catch(g("fetch replies"))}};t.fetchReplies=B;var V=function e(o,a,i){return function(t,e){var n=e(),r=n.apiId;f.default.get(r).addReply({postKey:o,text:a,topic_slug:i}).then(function(e){t({type:"addReply",post:e,parentKey:o})}).catch(g("add reply"))}};t.addReply=V;var N=function e(n,r){return function(e,t){e({type:"postSuccess",post:n,tab:r})}};t.postSuccess=N;var q=function e(n){return function(e,t){e({type:"toggleReplyInput",postKey:n})}};t.toggleReplyInputAction=q;var H=function e(n,r,o,a){return function(e,t){e({type:"updatePosts",tab:n,posts:r,cursor:o,isComplete:a,totalCount:r.length});e({type:"changeTab",tab:n})}};t.updatePosts=H},F4p2:function(e,t,n){"use strict";n("5DmW");var r=u(n("q1tI"));var o=n("mR6N");var a=n("Vxy9");var i=n("JimW");var s=n("i4Cj");var l=c(n("TqM9"));function c(e){return e&&e.__esModule?e:{default:e}}function u(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}var i18n=n("HEOz");var p=function e(){return r.createElement("table",{className:(0,o.css)(d.formattingOptionsTable)},r.createElement("thead",null,r.createElement("tr",{className:(0,o.css)(d.formattingOptionsRow,d.formattingOptionsHeaderRow)},r.createElement("th",{scope:"col"},r.createElement(i.View,{style:d.formattingOptionsRowContent},s.formattingOptionsStrings.rawTextHeading)),r.createElement("th",{scope:"col"},r.createElement(i.View,{style:d.formattingOptionsRowContent},s.formattingOptionsStrings.formattedTextHeading)))),r.createElement("tbody",null,r.createElement("tr",{className:(0,o.css)(d.formattingOptionsRow)},r.createElement("td",null,r.createElement(i.View,{style:d.formattingOptionsRowContent},"*",s.formattingOptionsStrings.bold,"*")),r.createElement("td",null,r.createElement(i.View,{style:d.formattingOptionsRowContent,"aria-labelledby":"bold","aria-describedby":"boldDescription"},r.createElement(a.LabelLarge,{id:"bold"},s.formattingOptionsStrings.bold),r.createElement("span",{className:"sr-only",id:"boldDescription"},s.formattingOptionsStrings.boldDescription)))),r.createElement("tr",{className:(0,o.css)(d.formattingOptionsRow)},r.createElement("td",null,r.createElement(i.View,{style:d.formattingOptionsRowContent},i18n.doNotTranslate("_"),s.formattingOptionsStrings.italics,i18n.doNotTranslate("_"))),r.createElement("td",null,r.createElement(i.View,{style:[d.formattingOptionsRowContent,d.italic],"aria-labelledby":"italics","aria-describedby":"italicsDescription"},r.createElement("span",{id:"italics"},s.formattingOptionsStrings.italics),r.createElement("span",{className:"sr-only",id:"italicsDescription"},s.formattingOptionsStrings.italicsDescription)))),r.createElement("tr",{className:(0,o.css)(d.formattingOptionsRow)},r.createElement("td",null,r.createElement(i.View,{style:d.formattingOptionsRowContent},"`",s.formattingOptionsStrings.code,"`")),r.createElement("td",null,r.createElement(i.View,{style:[d.formattingOptionsRowContent,d.code],"aria-labelledby":"code","aria-describedby":"codeDescription"},r.createElement("span",{id:"code"},s.formattingOptionsStrings.code),r.createElement("span",{className:"sr-only",id:"codeDescription"},s.formattingOptionsStrings.codeDescription)))),r.createElement("tr",{className:(0,o.css)(d.formattingOptionsRow)},r.createElement("td",null,r.createElement(i.View,{style:d.formattingOptionsRowContent},r.createElement(i.View,null,i18n.doNotTranslate("```if (x < 0) {")),r.createElement(i.View,null,"    ",i18n.doNotTranslate("return;")),r.createElement(i.View,null,i18n.doNotTranslate("&#125;```")))),r.createElement("td",null,r.createElement(i.View,{style:[d.formattingOptionsRowContent,d.code],"aria-describedby":"codeSnippetDescription"},r.createElement(i.View,null,i18n.doNotTranslate("if (x < 0) {")),r.createElement(i.View,null,"    ",i18n.doNotTranslate("return;")),r.createElement(i.View,null,i18n.doNotTranslate("&#125;")),r.createElement("span",{className:"sr-only",id:"codeSnippetDescription"},s.formattingOptionsStrings.codeDescription))))))};var d=o.StyleSheet.create({formattingOptionsTable:{width:"100%",marginTop:14},formattingOptionsRow:{borderTop:l.default.border,borderBottom:l.default.border},formattingOptionsHeaderRow:{backgroundColor:l.default.secondaryBackgroundColor,textAlign:"left",textTransform:"uppercase"},formattingOptionsRowContent:{padding:"14px 16px 16px 16px"},italic:{fontStyle:"italic"},code:{fontFamily:"Inconsolata"},codeSnippet:{height:231}});e.exports=p},HbaH:function(e,t,n){"use strict";n("ma9I");n("zKZe");n("5DmW");n("NBAS");n("SYor");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var O=m(n("q1tI"));var E=f(n("i8i4"));var r=n("/MKj");var C=n("mR6N");var S=n("Vxy9");var k=n("JimW");var T=n("JasB");var o=f(n("Pwnf"));var x=n("z8VS");var a=n("Pk2J");var i=f(n("whzC"));var A=f(n("mt3D"));var b=f(n("mEQP"));var s=f(n("6OHE"));var l=f(n("Q8Wn"));var c=f(n("cfQQ"));var w=f(n("P7jp"));var P=n("skGw");var j=f(n("QCGh"));var u=f(n("TqM9"));var M=n("i4Cj");var p=n("AE4M");var d=n("DDFQ");function f(e){return e&&e.__esModule?e:{default:e}}function m(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function y(){y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};return y.apply(this,arguments)}function g(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function h(e,t,n){if(t)v(e.prototype,t);if(n)v(e,n);return e}function I(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return F(e)}function L(e){L=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return L(e)}function F(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function D(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)R(e,t)}function R(e,t){R=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return R(e,t)}function K(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var B=s.default.domainColors("default").domain1;var V=function e(){var t=l.default.language==="es"||l.default.language==="pt-br"?l.default.language:"en-us";var n=i.default.safeLinkTo("https://khanacademy.zendesk.com/hc/".concat(t,"/community/topics"));return O.createElement("a",{href:n,className:(0,C.css)(q.helpLink)},M.footerStrings.helpCenter)};var N=function(e){D(t,e);function t(e){var h;g(this,t);h=I(this,L(t).call(this,e));K(F(h),"editingOrAcceptingClarification",function(){return h.props.editing||h.props.acceptingClarification||h.props.editingAcceptedClarification});K(F(h),"handleWindowKeyup",function(e){if(e.key==="Tab"&&h.textarea&&document.activeElement===h.textarea){h.setState({hideFocusOutline:false})}});K(F(h),"handleFocus",function(){h.setState({textareaExpanded:true})});K(F(h),"collapseTextarea",function(){if(!h._isMounted){return}h.setState({hideFocusOutline:true,textareaExpanded:false,formattingOptionsExpanded:false,previewExpanded:false});var e=h.props,t=e.onToggleFormattingOptionsExpanded,n=e.onTogglePreviewExpanded;if(t){t(false)}if(n){n(false)}});K(F(h),"handleDocumentInteraction",function(e){if(!h.container){return}var t=e.target;if(!h.container.contains(t)){h.collapseTextarea()}});K(F(h),"getSanitizedText",function(e){if(e&&e.length){var t=e.trim();if(t.length){return t}}return null});K(F(h),"handleTextChange",function(e){var t=true;var n=h.getSanitizedText(e.target.value);if(n){t=false}h.setState({postContent:n,submitButtonDisabled:t})});K(F(h),"updateUI",function(e){var t=h.props,n=t.onPostSuccess,r=t.tab,o=t.editing,a=t.onEditPost;var i=false;if(e.showLowQualityNotice){if(h._isMounted){h.setState({submitStatus:"failed",isLowQuality:true,feedbackEditTip:e.translatedFeedbackEditTip})}return}if(o){a(e,e.content)}else{if(h.textarea){h.textarea.value=""}}n(e,r);i=true;h.collapseTextarea();if(h._isMounted){h.setState({postContent:"",submitStatus:"ready",submitButtonDisabled:i,isLowQuality:false})}});K(F(h),"getBaseSubmitUrl",function(){var e=h.props,t=e.isAnswer,n=e.tab,r=e.feedbackKey,o=e.youtubeId;var a=h.props.contentKind?h.props.contentKind.toLowerCase():null;var i=h.props.contentId;if(a==="video"&&n==="clarifications"&&o){a="youtubevideo";i=o}if(!t&&i&&a&&n){return"/api/internal/discussions/".concat(a,"/").concat(i,"/").concat(n)}else if(t&&r){return"/api/internal/questions/".concat(r,"/answers")}else{throw new Error("We don't have enough information to submit this type of post.")}});K(F(h),"getPlaceholderText",function(){var e=h.props,t=e.isReply,n=e.isAnswer,r=e.tab;if(t){return M.postStrings.replyCommentPlaceholder}else if(!n&&r&&M.tabsStrings[r]){return M.tabsStrings[r].placeholder}else if(n&&r==="projecthelp"){return M.postStrings.answerPlaceholder}else{return M.postStrings.replyPlaceholder}});K(F(h),"getTextareaLabel",function(){var e=h.props,t=e.isReply,n=e.isAnswer,r=e.tab,o=e.acceptingClarification;if(t){return M.postStrings.comment}else if(n&&r==="projecthelp"){return M.postStrings.answer}else if(n){return M.postStrings.reply}else if(r&&M.tabsStrings[r]){return M.tabsStrings[r].textAreaLabel}else if(o){return M.miscStrings.acceptedClarificationLabel}else{return""}});K(F(h),"handleSubmit",function(){var e=h.props,t=e.feedbackKey,n=e.topicSlug,r=e.isAnswer,o=e.isReply,a=e.onAddReply,i=e.postKey,s=e.acceptingClarification,l=e.editingAcceptedClarification,c=e.onSubmitAcceptedClarification;var u=h.state,p=u.postContent,d=u.isFromAuthor,f=u.submitStatus,m=u.isLowQuality;if(!p||f==="submitting"){return}if((s||l)&&c&&p){c(p);return}if(!i&&o&&t&&p){h.setState({submitStatus:"submitting"});a(t,p,n);return}var g={text:p,shownLowQualityNotice:m,topic_slug:"",fromVideoAuthor:d};if(!r){g.topic_slug=n}var v=h.getBaseSubmitUrl();var y="POST";if(i){v+="/".concat(i);y="PUT"}v+="?casing=camel";h.setState({submitStatus:"submitting",feedbackEditTip:""});(0,P.khanFetch)(v,{method:y,body:JSON.stringify(g),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){if(h._isMounted){h.updateUI(e)}}).catch(function(e){w.default.log("Failed to submit post!",e);if(h._isMounted){h.setState({submitStatus:"failed"})}})});K(F(h),"renderTextarea",function(e){var t=h.props,n=t.isAnswer,r=t.isReply,o=t.editing;var a=h.state,i=a.hideFocusOutline,s=a.textareaExpanded,l=a.submitStatus,c=a.feedbackEditTip;var u=l==="submitting";var p=h.getPlaceholderText();var d=s&&c;var f=s&&!n&&!r&&!o;var m=[q.textareaContainer,!!d&&q.textareaContainerError,s&&(r||h.editingOrAcceptingClarification()?q.replyTextareaContainerExpanded:q.textareaContainerExpanded)];var g=[q.textareaField,(n||h.editingOrAcceptingClarification())&&q.textareaFieldForAnswer,f&&q.textareaFieldExpanded,i&&q.textareaNoFocusOutline,d&&q.textareaFieldError];var v=r?{rows:1}:null;return O.createElement(k.View,{style:m},O.createElement("textarea",y({id:e,className:(0,C.css)(g),placeholder:"".concat(p),"aria-label":p,onFocus:h.handleFocus,onBlur:function e(){return h.setState({hideFocusOutline:true})},onClick:function e(){return h.setState({hideFocusOutline:true})},onChange:h.handleTextChange,onKeyUp:h.handleTextChange,ref:function e(t){return h.textarea=t},disabled:u},v)))});K(F(h),"renderFooter",function(){var e=h.props,t=e.tab,n=e.isAnswer,r=e.isReply,o=e.editing,a=e.acceptingClarification,i=e.editingAcceptedClarification,s=e.onToggleFormattingOptionsExpanded,l=e.onTogglePreviewExpanded,c=e.onCancel;var u=h.state,p=u.formattingOptionsExpanded,d=u.previewExpanded,f=u.submitButtonDisabled,m=u.submitStatus,g=u.textareaExpanded;var v=a||i;var y=!!(g||n||o)&&!a;return O.createElement(b.default,{tab:t,content:h.state.postContent||"",isAnswer:n,isReply:r,editing:o,acceptingClarification:v,submitButtonDisabled:f&&!v,submitStatus:m,onSubmit:h.handleSubmit,onCancel:c,canShowFormattingOptions:y,formattingOptionsExpanded:p,onToggleFormattingOptionsExpanded:function e(t){if(s){s(t)}h.setState({formattingOptionsExpanded:t})},previewExpanded:d,onTogglePreviewExpanded:function e(t){if(l){l(t)}h.setState({previewExpanded:t})}})});h.state={hideFocusOutline:true,textareaExpanded:false,formattingOptionsExpanded:false,previewExpanded:false,postContent:e.initialPostContent,submitButtonDisabled:true,submitStatus:"ready",isLowQuality:false,feedbackEditTip:"",isFromAuthor:false};return h}h(t,[{key:"UNSAFE_componentWillMount",value:function e(){var t=this.props,n=t.isAnswer,r=t.isReply;if(!n&&!r&&(0,p.userHasJustLoggedIn)(window.location)){this.setState({hideFocusOutline:false})}}},{key:"componentDidMount",value:function e(){var t=this.props,n=t.isAnswer,r=t.isReply;this._isMounted=true;var o=this.textarea;if(o&&!n&&!r&&(0,p.userHasJustLoggedIn)(window.location)){o.focus({preventScroll:true})}if(o&&this.props.autoFocus){o.focus()}if(o){o.value=this.props.initialPostContent}document.addEventListener("keyup",this.handleWindowKeyup);document.addEventListener("mousedown",this.handleDocumentInteraction);document.addEventListener("touchstart",this.handleDocumentInteraction)}},{key:"UNSAFE_componentWillUpdate",value:function e(t,n){var r=this.textarea;if(r&&t.autoFocus&&this.state.hideFocusOutline){this.setState({hideFocusOutline:false})}if(t.newPostKey&&this.state.submitStatus==="submitting"){if(this.textarea){this.textarea.value=""}this.collapseTextarea();this.setState({submitStatus:"ready",submitButtonDisabled:true,isLowQuality:false});if(this.props.resetNewPostKeyInfo){this.props.resetNewPostKeyInfo()}}}},{key:"componentDidUpdate",value:function e(t,n){var r=this.textarea;if(r&&this.props.autoFocus&&!t.autoFocus){setTimeout(function(){return r&&r.focus()},0);this.props.resetFocusOnTopLevelInput()}}},{key:"componentWillUnmount",value:function e(){this._isMounted=false;document.removeEventListener("keyup",this.handleWindowKeyup);document.removeEventListener("mousedown",this.handleDocumentInteraction);document.removeEventListener("touchstart",this.handleDocumentInteraction)}},{key:"getIsModerator",value:function e(){var t=this.props.profile;return t&&t.get("isModerator")}},{key:"render",value:function e(){var r=this;var t=this.props,n=t.tab,o=t.isAnswer,a=t.isReply,i=t.showAvatar,s=t.clarificationsEnabled,l=t.contentKind;var c=this.state,u=c.textareaExpanded,p=c.feedbackEditTip,d=c.isFromAuthor;var f=this.getTextareaLabel();var m=n&&M.tabsStrings[n]||{};var g=!o&&m.tipLabel;var v=!o&&m.tipContents;var y=u&&p;var h=u||o||this.editingOrAcceptingClarification();var b=u&&!o&&!a&&!this.editingOrAcceptingClarification();var w=n!=="clarifications"&&s;var P=function e(t){var n=t.get("content-input");return O.createElement(k.View,{style:a?q.replyContainer:q.container,ref:function e(t){return r.container=E.default.findDOMNode(t)}},y&&O.createElement(k.View,{style:q.errorText},O.createElement(S.Body,null,p)),O.createElement(k.View,{style:[q.textAreaHeading,i&&q.textAreaHeadingMargin]},O.createElement("label",{htmlFor:n},O.createElement(S.Body,null,f)),O.createElement(T.Spring,null),o&&l!=="scratchpad"&&r.getIsModerator()?O.createElement(x.Checkbox,{label:M.postStrings.fromTheAuthor,style:q.postAsAuthorCheckbox,checked:d,onChange:function e(t){return r.setState({isFromAuthor:t})}}):null),O.createElement(k.View,{style:q.expandableContainer},i&&O.createElement(k.View,{style:q.avatarContainer},O.createElement(A.default,{showCurrentUserAvatar:true})),O.createElement(k.View,{style:q.textareaAndTipsContainer},r.renderTextarea(n),h&&r.renderFooter(),b&&O.createElement(k.View,null,O.createElement(k.View,{style:q.tip},O.createElement(k.View,{style:q.tipHeading},O.createElement(S.LabelLarge,null,g)),v),O.createElement(k.View,{style:q.helpLinksContainer},O.createElement(V,null),w&&O.createElement(j.default,{className:(0,C.css)(q.helpLink),onClick:r.props.onReportMistake},M.footerStrings.reportMistake))))))};return O.createElement(k.UniqueIDProvider,{mockOnFirstRender:true,scope:"discussion-input"},function(e){return O.createElement("form",null,P(e))})}}]);return t}(O.Component);K(N,"defaultProps",{initialPostContent:"",editing:false,showAvatar:true});var q=C.StyleSheet.create({container:{backgroundColor:s.default.colors.white},replyContainer:{backgroundColor:o.default.offWhite},errorText:{marginLeft:64,color:o.default.red},expandableContainer:{flexDirection:"row"},avatarContainer:{marginRight:u.default.avatarFormSpace},textareaAndTipsContainer:{width:"100%"},textAreaHeading:{flexDirection:"row"},textAreaHeadingMargin:{marginLeft:56},postAsAuthorCheckbox:{minWidth:148,marginTop:4},textareaContainer:{marginTop:4,marginBottom:0,borderRadius:4,flex:1,border:u.default.border,backgroundColor:o.default.white},textareaContainerExpanded:{borderBottomRightRadius:0,borderBottomLeftRadius:0},replyTextareaContainerExpanded:{paddingBottom:7},textareaContainerError:{borderColor:o.default.red,backgroundColor:u.default.errorBackgroundColor},textareaField:{boxSizing:"border-box",border:"none",resize:"vertical",width:"98%",fontSize:16,lineHeight:1.38,transition:"min-height ".concat(s.default.standardTransition),minHeight:34,overflow:"auto",padding:"8px 12px",margin:"1px 0px 1px 1px",":focus":{outline:"auto"},"::placeholder":{color:"solid 1px ".concat(o.default.offBlack16),fontSize:16,lineHeight:1.38}},textareaFieldForAnswer:{minHeight:62},textareaFieldError:{backgroundColor:u.default.errorBackgroundColor},textareaFieldExpanded:{minHeight:u.default.textareaMinHeight,overflow:"auto"},textareaNoFocusOutline:{":focus":{outline:"none"}},tip:{marginTop:24,marginBottom:16,padding:24,borderRadius:2,backgroundColor:u.default.secondaryBackgroundColor},tipHeading:{marginBottom:8},helpLinksContainer:{textAlign:"right"},helpLink:{color:B,textDecoration:"none",":hover":{textDecoration:"underline"}}});var H=function e(t){return{newPostKey:t.newPostKey,youtubeId:t.youtubeId}};var U={onAddReply:d.addReply,onEditPost:d.editPost,resetFocusOnTopLevelInput:d.resetFocusOnTopLevelInputAction};var W=(0,a.compose)(c.default,(0,r.connect)(H,U))(N);t.default=W},KPIR:function(e,t,n){"use strict";n("TeQF");n("2B1R");n("5DmW");n("NBAS");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var d=r(n("q1tI"));var f=n("mR6N");var m=n("i4Cj");var g=n("4Arr");function r(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function o(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function i(e,t,n){if(t)a(e.prototype,t);if(n)a(e,n);return e}function s(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return l(e)}function l(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function c(e){c=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return c(e)}function u(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)p(e,t)}function p(e,t){p=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return p(e,t)}function v(e){var t=document.implementation.createHTMLDocument();if(!t.body){return new HTMLCollection}t.body.innerHTML=e;return t.body.children||new HTMLCollection}function y(e,t){return Array.prototype.filter.call(e,t)}function h(e){var t=y(e,function(e){return e.classList.contains("overall-eval-info")});var n=t.length>0?t[0].textContent:"";if(n.length===0){return null}return d.createElement("div",{className:(0,f.css)(P.moreInfo)},d.createElement("strong",null,m.evalStrings.fromTheEvaluator),d.createElement("div",{dangerouslySetInnerHTML:{__html:(0,g.formatContent)(n,true)}}))}function b(e){e=e.cloneNode(true);var t=e.querySelector("div");var n="";if(t){n=t.textContent;t.innerHTML=""}return{primary:e.textContent,extra:n}}var w=function(e){u(t,e);function t(){o(this,t);return s(this,c(t).apply(this,arguments))}i(t,[{key:"render",value:function e(){var t=this.props.post;var n=t.content,r=t.question;var o=t.sumVotesIncremented>1;var a=v(n);var i=y(a,function(e){var t=e.tagName.toLowerCase()==="li";var n=e.classList.contains("pass");return t&&!n});var s=o?m.evalStrings.projectPassedEval:m.evalStrings.projectFailedEval;var l=null;if(o){var c=h(a);if(c){l=d.createElement("div",null,c)}}else{var u=i.map(function(e,t){var n=b(e),r=n.primary,o=n.extra;return d.createElement("li",{key:"objective-"+t},d.createElement("div",{className:(0,f.css)(P.failedObjectiveItem)},d.createElement("strong",null,r)),d.createElement("div",{className:(0,f.css)(P.objectiveMoreInfo),dangerouslySetInnerHTML:{__html:(0,g.formatContent)(o,true)}}))});l=d.createElement("div",null,h(a),d.createElement("div",{className:(0,f.css)(P.failedObjectives)},d.createElement("strong",null,m.evalStrings.needsMoreWork),d.createElement("ul",{className:(0,f.css)(P.styledList)},u)))}var p=r&&r.content||"";return d.createElement("div",null,d.createElement("div",null,p),d.createElement("div",{className:"eval-guideline"},d.createElement("div",{className:(0,f.css)(P.evalTitle)},s),l))}}]);return t}(d.Component);t.default=w;var P=f.StyleSheet.create({moreInfo:{marginTop:20},objectiveMoreInfo:{marginBottom:10},failedObjectiveItem:{marginTop:10},failedObjectives:{marginTop:20},styledList:{marginLeft:16,listStyle:"disc"},evalTitle:{fontSize:"larger"}})},RdRB:function(e,t,n){"use strict";n("+2oP");n("3KgV");n("5DmW");n("NBAS");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var m=c(n("q1tI"));var g=n("mR6N");var r=l(n("lTCR"));var v=n("JimW");var o=l(n("Pwnf"));var a=l(n("gE8/"));var y=n("Vxy9");var i=l(n("nKvR"));var h=l(n("wINb"));var s=l(n("uJWH"));var b=n("i4Cj");var w=n("AE4M");function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function u(){var t=p(["\n    query getUserHoverCardProfile($kaid: String!) {\n        user(kaid: $kaid) {\n            id\n            nickname\n            username\n            bio\n            avatar {\n                name\n                imageSrc\n            }\n            points\n            isActivityAccessible\n            isPhantom\n            isPublic\n        }\n    }\n"]);u=function e(){return t};return t}function p(e,t){if(!t){t=e.slice(0)}return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function P(e,t,n){if(t)f(e.prototype,t);if(n)f(e,n);return e}function O(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return E(e)}function E(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function C(e){C=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return C(e)}function S(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)k(e,t)}function k(e,t){k=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return k(e,t)}var T=function(e){S(t,e);function t(){d(this,t);return O(this,C(t).apply(this,arguments))}P(t,[{key:"shouldComponentUpdate",value:function e(t){return!t.loading}},{key:"render",value:function e(){var t=this.props,n=t.loading,r=t.data;if(n||!r||!r.user){return m.createElement("span",null,b.avatarStrings.findingProfileInformation)}var o=r.user,a=o.nickname,i=o.username,s=o.avatar,l=o.bio,c=o.points,u=o.isActivityAccessible,p=o.isPhantom,d=o.isPublic;var f=u===false&&d===false;return m.createElement(v.View,{style:j.tooltipContainer},m.createElement(v.View,{style:j.avatarContainer},s&&a&&m.createElement("img",{className:(0,g.css)(j.tooltipAvatar),src:(0,h.default)(s.imageSrc),alt:b.avatarStrings.getAvatarForUser(s&&(0,w.getAriaAvatarName)(s.name),a)})),m.createElement(v.View,{style:j.tooltipBody},m.createElement(v.View,{style:j.tooltipHeader},m.createElement(y.HeadingSmall,{style:[j.nameText,j.nickname]},p?b.avatarStrings.unclaimedPoints:a),m.createElement(y.LabelMedium,{style:[j.nameText,j.username]},i?"@"+i:null)),m.createElement(y.LabelMedium,{style:j.bio},l),i==="sal"?m.createElement(y.LabelMedium,{style:j.points},"+∞"):m.createElement(y.LabelMedium,{style:j.points},(c||c===0)&&!f?"+"+c.toLocaleString():b.avatarStrings.questionMark)))}}]);return t}(m.Component);var x=(0,r.default)(u());var A=64;var j=g.StyleSheet.create({tooltipContainer:{flexDirection:"row",width:350},avatarContainer:{marginRight:a.default.xLarge,marginTop:a.default.xxSmall},tooltipAvatar:{width:A,height:A},tooltipBody:{width:"100%"},tooltipHeader:{flexDirection:"row",alignItems:"flex-end",flexWrap:"wrap",marginTop:a.default.xxSmall,marginBottom:a.default.small},nameText:{marginTop:a.default.xxSmall,maxWidth:272,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},nickname:{marginRight:a.default.small},username:{color:o.default.offBlack50,":hover":{textDecoration:"none"}},bio:{marginBottom:a.default.medium},points:{color:o.default.darkBlue,textAlign:"right",fontWeight:700,fontSize:16,marginBottom:a.default.small}});var M=(0,i.default)({options:function e(t){var n=t.kaid;return{query:x,fetchPolicy:"cache-first",variables:{kaid:n}}}})(T);var I=function e(t){return m.createElement(s.default,null,m.createElement(M,t))};var L=I;t.default=L},TqM9:function(e,t,n){"use strict";n("pNMO");n("ma9I");n("TeQF");n("5DmW");n("FZtP");var r=s(n("Pwnf"));var o=n("6OHE");var a=i(n("uEGL"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function l(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var r=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}r.forEach(function(e){c(t,e,n[e])})}return t}function c(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var u=48;var p=13;var d=r.default.offBlack16;var f=(0,r.fade)(r.default.red,.025);var m=r.default.offWhite;var g="1px solid ".concat(d);var v=143;var y={backgroundColor:"transparent",border:"none",padding:0,textAlign:"left",display:"inline-block",cursor:"pointer",borderRadius:"none"};var h={backgroundColor:r.default.offBlack16,height:1,position:"relative",top:-1};var b=c({width:"100%",maxWidth:o.constants.contentWidth+o.constants.moduleHorizontalPadding*2,marginLeft:"auto",marginRight:"auto",backgroundColor:r.default.white},a.default.xsOrSmaller,{maxWidth:o.constants.contentWidth+o.constants.moduleHorizontalPaddingSmall*2});var w=l({},b,{paddingLeft:o.constants.moduleHorizontalPadding,paddingRight:o.constants.moduleHorizontalPadding});var P=l({},b,c({paddingTop:32},a.default.xsOrSmaller,{paddingLeft:8,paddingRight:8}));var O={marginBottom:16};var E={marginBottom:12};var C={outerRepliesContainer:{paddingLeft:16,paddingRight:16},nameAndDatetime:{flexDirection:"column",alignItems:"flex-start"},datetime:{marginLeft:0},flagText:{display:"none"},answersList:{marginLeft:16}};var S={flexDirection:"row",alignItems:"flex-start"};var k={width:"100%"};var T={flexDirection:"row",justifyContent:"space-between",marginBottom:8,marginLeft:24};var x=c({flexDirection:"row",alignItems:"flex-end"},a.default.xsOrSmaller,C.nameAndDatetime);var A={maxWidth:200,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:r.default.offBlack};var j=c({marginLeft:8,color:r.default.offBlack64},a.default.xsOrSmaller,{marginLeft:0});var M={position:"relative",marginLeft:24};var I={color:r.default.offBlack,padding:"8px 0",wordWrap:"break-word"};var L={flexDirection:"row",alignItems:"center",marginLeft:24,height:40};var F={flexDirection:"row",alignItems:"center"};var D=c({},a.default.mdOrLarger,{display:"none"});var R=c({marginLeft:8},a.default.smOrSmaller,{display:"none"});e.exports={compactStyles:C,avatarContainerDiameter:u,avatarFormSpace:p,borderColor:d,border:g,errorBackgroundColor:f,secondaryBackgroundColor:m,textareaMinHeight:v,notAButton:y,separator:h,discussionContainer:w,listWrapper:P,clarificationsListHeader:O,postWrapper:E,post:S,everythingButTheAvatar:k,postHeader:T,nameAndDatetime:x,authorNickname:A,datetime:j,contentContainer:M,content:I,postFooter:L,tools:F,actionPickerMobile:D,actionPickerDesktop:R}},XKyD:function(e,t,n){"use strict";n("5DmW");Object.defineProperty(t,"__esModule",{value:true});t.default=t.ConfirmDeletionModal=void 0;var o=d(n("q1tI"));var r=n("mR6N");var a=n("DzHr");var i=n("JimW");var s=n("Vxy9");var l=n("JasB");var c=p(n("wa3X"));var u=n("i4Cj");function p(e){return e&&e.__esModule?e:{default:e}}function d(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}var f=function e(t){var n=t.handleClose,r=t.handleSubmit;return o.createElement(a.OneColumnModal,{content:o.createElement(i.View,null,o.createElement(s.Body,null,u.confirmDeletionModalStrings.confirmDeletion)),footer:o.createElement(i.View,{style:m.footer},o.createElement(c.default,{onClick:n,kind:"tertiary"},u.confirmDeletionModalStrings.cancel),o.createElement(l.Strut,{size:16}),o.createElement(c.default,{onClick:r,color:"destructive"},u.confirmDeletionModalStrings.delete))})};t.ConfirmDeletionModal=f;var m=r.StyleSheet.create({footer:{flexDirection:"row"}});var g=f;t.default=g},fjY8:function(e,t,n){"use strict";n("2B1R");n("5DmW");n("NBAS");n("U3f4");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var i=a(n("q1tI"));var r=n("mR6N");var s=n("DzHr");var l=n("JimW");var c=n("Vxy9");var u=o(n("wa3X"));var p=n("JasB");var d=o(n("SGU3"));var f=n("i4Cj");function o(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function m(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function v(e,t,n){if(t)g(e.prototype,t);if(n)g(e,n);return e}function y(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return h(e)}function h(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function b(e){b=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return b(e)}function w(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)P(e,t)}function P(e,t){P=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return P(e,t)}var O=function(e){w(t,e);function t(){m(this,t);return y(this,b(t).apply(this,arguments))}v(t,[{key:"render",value:function e(){var t=this.props,n=t.flaggedBy,r=t.flags,o=t.onCancel,a=t.onClearAllFlags;return i.createElement(s.OneColumnModal,{content:i.createElement(l.View,null,i.createElement(c.Title,{style:E.title},f.clearFlagsModalStrings.flagsTitle),n.map(function(e,t){return i.createElement(c.Body,{key:e},i.createElement(d.default,{href:"/profile/".concat(e,"/discussion"),skipClientNav:true,target:"_blank"},e)," - ",r[t])})),footer:i.createElement(l.View,{style:E.footer},i.createElement(u.default,{onClick:o,kind:"tertiary"},f.clearFlagsModalStrings.cancel),i.createElement(p.Strut,{size:16}),i.createElement(u.default,{onClick:a},f.clearFlagsModalStrings.clearAllFlags))})}}]);return t}(i.Component);t.default=O;var E=r.StyleSheet.create({footer:{flexDirection:"row"},title:{marginBottom:24}})},gzgZ:function(e,t,n){"use strict";n("5DmW");n("NBAS");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var l=s(n("q1tI"));var r=n("mR6N");var o=i(n("Pwnf"));var c=n("Vxy9");var a=n("JimW");function i(e){return e&&e.__esModule?e:{default:e}}function s(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function d(e,t,n){if(t)p(e.prototype,t);if(n)p(e,n);return e}function f(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return m(e)}function m(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function g(e){g=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return g(e)}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)y(e,t)}function y(e,t){y=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return y(e,t)}var h=(0,a.addStyle)("button");var b=function(e){v(t,e);function t(){u(this,t);return f(this,g(t).apply(this,arguments))}d(t,[{key:"render",value:function e(){var t=this.props,n=t.disabled,r=t.icon,o=t.id,a=t.children,i=t.onClick,s=t.style;return l.createElement(h,{id:o,onClick:i,style:[w.linkStyledButton,w.toolButton,n&&w.disabled,s],disabled:n},r,l.createElement(c.LabelXSmall,{style:w.text},a))}}]);return t}(l.Component);t.default=b;var w=r.StyleSheet.create({linkStyledButton:{color:o.default.offBlack64,border:"none",backgroundColor:"transparent",cursor:"pointer",padding:0,margin:0,":focus":{outline:"auto"}},toolButton:{display:"flex",alignItems:"center"},text:{marginLeft:5},disabled:{cursor:"default",color:o.default.offBlack32}})},i4Cj:function(e,t,n){"use strict";var i18n=n("HEOz");var r={loginUpsellHeading:i18n._("Want to join the conversation?"),loginUpsellButtonContent:i18n._("Log in"),notEnoughPoints:i18n._("You need at least 5000 energy points to get started."),wantToAskQuestion:i18n._("Want to ask a question to the community about improving your project?"),helpRequestsLink:i18n._("Head over to the help requests tab!"),questionsTabForQuestions:i18n._("We'll keep this area for questions that the community has for you about your project."),cantPostHelpRequest:i18n._("To give everyone a fair chance at getting help, you can't request help again until your current request is answered."),authorHelpRequestsWillAppearHere:i18n._("This area is reserved for help requests from this project's author."),authorAnsweringOwnHelpRequest:i18n._("By answering your own post, your request won't be shown in the help requests list. If you want to clarify instead, you can edit your original post."),postQuestionLabel:i18n._("Questions"),postQuestionButtonContents:i18n._("Ask question"),postQuestionTipLabel:i18n._("Tip for a good question"),postQuestionTipContents:i18n._("Be specific, and add a timestamp or section. Example: “At 5:31, how is the moon large enough to block the sun? Isn't the sun way larger than the moon?”"),postQuestionListTabsLabel:i18n._("Questions"),postQuestionPlaceholder:i18n._("Ask a question..."),postQuestionTextAreaLabel:i18n._("Question"),thankAuthorLabel:i18n._("Tips & Thanks"),thankAuthorButtonContents:i18n._("Post tip or thanks"),thankAuthorTipLabel:i18n._("Post a tip or thank the author"),thankAuthorTipContents:i18n._("Share a tip, or offer positive feedback that lets the creator know what is working well."),thankAuthorListTabsLabel:i18n._("Tips & Thanks"),thankAuthorPlaceholder:i18n._("Post a tip or thanks..."),thankAuthorTextAreaLabel:i18n._("Tip or Thanks"),reportMistakeLabel:i18n._("Mistakes"),reportMistakeButtonContents:i18n._("Report mistake"),reportMistakeTipLabel:i18n._("If you spot an error in the content, report it here"),reportMistakeTipContents:i18n._('Example: “At 2:33, Sal said "single bonds" but meant covalent bonds.”'),reportMistakeListTabsLabel:i18n._("Mistakes"),reportMistakePlaceholder:i18n._("Report a mistake..."),reportMistakeTextAreaLabel:i18n._("Mistake"),requestHelpLabel:i18n._("Help Requests"),requestHelpButtonContents:i18n._("Request help"),requestHelpTipLabel:i18n._("Request help from your peers"),requestHelpTipContents:i18n._("Please describe your problem or question in detail. The better you describe it, the more likely you are to get a great response. Make sure you've checked the documentation first!"),requestHelpListTabsLabel:i18n._("Help requests"),requestHelpPlaceholder:i18n._("Request help..."),requestHelpTextAreaLabel:i18n._("Help request"),timestampFromLabel:i18n.doNotTranslate("From"),timestampToLabel:i18n.doNotTranslate("to"),acceptedClarificationLabel:i18n._("Accepted clarification"),clarificationListAccepted:i18n._("Accepted clarifications"),clarificationListSuggested:i18n._("Suggested clarifications"),reportMistake:i18n._("Report a mistake"),helpCenter:i18n._("Go to our Help Center for technical issues or feature requests"),hideFormattingOptions:i18n._("Hide formatting options"),showFormattingOptions:i18n._("Show formatting options"),submitting:i18n._("Saving..."),rawTextHeading:i18n._("Typing this"),formattedTextHeading:i18n._("Displays this"),bold:i18n._("bold"),boldDescription:i18n._("Emphasize text using a bolded typeface."),italics:i18n._("italics"),italicsDescription:i18n._("Emphasize text using an italicized typeface."),code:i18n._("code"),codeDescription:i18n._("Emphasize text using a monospaced typeface."),showLabel:i18n._("Show"),automaticallyHidden:i18n._("Automatically hidden"),deleted:i18n._("Deleted"),postedIn:i18n._("Posted in"),toolOpensModal:i18n._("Button opens signup modal"),reply:i18n._("Reply"),replyButtonContents:i18n._("Post reply"),replyPlaceholder:i18n._("Post a reply..."),answer:i18n._("Answer"),answerButtonContents:i18n._("Post answer"),answerPlaceholder:i18n._("Post an answer..."),getVotes:function e(t){return i18n.ngettext("%(num)s vote","%(num)s votes",t)},upvote:i18n._("Upvote"),downvote:i18n._("Downvote"),alreadyUpVoted:i18n._("You've upvoted this post."),alreadyDownVoted:i18n._("You've downvoted this post."),ariaAbstained:function e(t,n){if(t.type==="answer"){return i18n.ngettext("Your vote has been removed. This answer has %(num)s vote total.","Your vote has been removed. This answer has %(num)s votes total.",n)}else if(t.type==="reply"){return i18n.ngettext("Your vote has been removed. This comment has %(num)s vote total.","Your vote has been removed. This comment has %(num)s votes total.",n)}else{return i18n.ngettext("Your vote has been removed. This post has %(num)s vote total.","Your vote has been removed. This post has %(num)s votes total.",n)}},ariaDownvoted:function e(t,n){if(t.type==="answer"){return i18n.ngettext("You downvoted. This answer has %(num)s vote total.","You downvoted. This answer has %(num)s votes total.",n)}else if(t.type==="reply"){return i18n.ngettext("You downvoted. This comment has %(num)s vote total.","You downvoted. This comment has %(num)s votes total.",n)}else{return i18n.ngettext("You downvoted. This post has %(num)s vote total.","You downvoted. This post has %(num)s votes total.",n)}},ariaUpvoted:function e(t,n){if(t.type==="answer"){return i18n.ngettext("You upvoted. This answer has %(num)s vote total.","You upvoted. This answer has %(num)s votes total.",n)}else if(t.type==="reply"){return i18n.ngettext("You upvoted. This comment has %(num)s vote total.","You upvoted. This comment has %(num)s votes total.",n)}else{return i18n.ngettext("You upvoted. This post has %(num)s vote total.","You upvoted. This post has %(num)s votes total.",n)}},flag:i18n._("Flag"),flagAriaLabel:i18n._("Opens a modal to flag content"),flagged:i18n._("Flagged"),ariaFlagged:i18n._("You flagged this post."),flagModal:i18n._("Modal to flag content"),noSelfVoting:i18n._("You can't vote for your own posts"),atLeast5000:i18n._("You need at least 5000 energy points to vote"),comment:i18n._("Comment"),getComments:function e(t){return i18n.ngettext("%(num)s comment","%(num)s comments",t)},loading:i18n._("Loading..."),replyCommentPlaceholder:i18n._("Post a comment..."),flagModalHeader:i18n._("Flag for Guardian attention"),abuse:i18n._("Flag as abuse"),abuseDesc:i18n._("disrespectful or offensive, an advertisement"),tipsOrThanks:i18n._("Flag as a tip or thanks"),tipsOrThanksDesc:i18n._("Should be in “Tips & thanks”"),question:i18n._("Flag as a question"),questionDesc:i18n._("Should be in “Questions”"),notHelpful:i18n._("Flag as not helpful"),notHelpfulDesc:i18n._("Low quality, not about the video topic, soliciting votes or seeking badges, a homework question, repeatedly making the same post"),aboutTheSite:i18n._("Flag as about the site"),aboutTheSiteDesc:i18n._("A question about Khan Academy (e.g. “What software does Sal use?”), a post about badges, a technical problem with the site, a request for videos or features"),submit:i18n._("Submit"),topVoted:i18n._("Top Voted"),recent:i18n._("Recent"),sortBy:i18n._("Sort by:"),clearFlags:i18n._("Clear flags"),approve:i18n._("Approve"),skip:i18n._("Skip"),acceptClarification:i18n._("Accept clarification"),changeToQuestion:i18n._("Change to question"),changeToTipsAndThanks:i18n._("Change to tip/thanks"),changeToMistakes:i18n._("Change to mistake"),edit:i18n._("Edit"),delete:i18n._("Delete"),undelete:i18n._("Undelete"),confirmDeletion:i18n._("Are you sure you want to delete this?"),showMore:i18n._("Show more..."),fromTheAuthor:i18n._("From the author:"),turnNotificationsOff:i18n._("Turn notifications off"),turnNotificationsOn:i18n._("Turn notifications on"),notificationsUnavailable:i18n._("Answer email notifications are off"),notificationsUnavailableTitle:i18n._("This question is very old, so you won't receive notifications when someone answers it."),findingProfileInformation:i18n._("Finding profile information..."),unclaimedPoints:i18n._("Unclaimed points"),questionMark:i18n._("?"),more:i18n._("More..."),saveChanges:i18n._("Save changes"),cancel:i18n._("Cancel"),clearAllFlags:i18n._("Clear all flags"),flagsTitle:i18n._("Flags:"),getAvatarForUser:function e(t,n){return i18n._("%(avatarName)s avatar for user %(username)s",{avatarName:t,username:n})},goToUserProfile:function e(t){return i18n._("Go to %(username)s's user profile.",{username:t})},getResponses:function e(t){return i18n.ngettext("%(num)s Response","%(num)s Responses",t)},seeAllReplies:function e(t){return i18n.ngettext("See %(num)s more reply","See %(num)s more replies",t)},hideReplies:function e(t){return i18n.ngettext("Hide %(num)s reply","Hide %(num)s replies",t)},seeAllAnswers:function e(t){return i18n.ngettext("See %(num)s more answer","See %(num)s more answers",t)},hideAnswers:function e(t){return i18n.ngettext("Hide %(num)s answer","Hide %(num)s answers",t)},appearsAtTimestamp:function e(t,n){return i18n._("Appears at %(openTimestamp)s - %(closeTimestamp)s",{openTimestamp:t,closeTimestamp:n})},showMarkdownPreview:i18n._("Show preview"),hideMarkdownPreview:i18n._("Hide preview"),projectPassedEval:i18n._("This project has passed evaluation."),projectFailedEval:i18n._("This project needs more work."),fromTheEvaluator:i18n._("From the evaluator:"),needsMoreWork:i18n._("The following objectives need more work:"),created:i18n._("Created"),answerQuestion:i18n._("Question"),unknown:i18n._("Unknown"),englishDiscussionUpsell:i18n._("Do you understand English? Click here to see more discussion happening on Khan Academy's English site."),noPosts:i18n._("No posts yet."),joinTheConversation:i18n._("Join the conversation"),timestampExceedsVideoLength:function e(t,n){return i18n._("Your timestamp (%(timestamp)s) exceeds the video length (%(videoLength)s).",{timestamp:t,videoLength:n})},showComments:function e(t){return i18n.ngettext("Show %(num)s comment","Show %(num)s comments",t)},closeFlaggingModal:i18n._("Cancel flagging this post"),mistakesAreHidden:i18n._("Previously reported mistakes are hidden."),thanksForAnswering:i18n._("Thanks for answering!"),answeringGuidelinesLink:i18n._("See our guidelines for answering questions here.")};var o={questions:{key:"questions",label:r.postQuestionLabel,buttonContents:r.postQuestionButtonContents,tipLabel:r.postQuestionTipLabel,tipContents:r.postQuestionTipContents,listTabsLabel:r.postQuestionListTabsLabel,placeholder:r.postQuestionPlaceholder,textAreaLabel:r.postQuestionTextAreaLabel},comments:{key:"comments",label:r.thankAuthorLabel,buttonContents:r.thankAuthorButtonContents,tipLabel:r.thankAuthorTipLabel,tipContents:r.thankAuthorTipContents,listTabsLabel:r.thankAuthorListTabsLabel,placeholder:r.thankAuthorPlaceholder,textAreaLabel:r.thankAuthorTextAreaLabel},clarifications:{key:"clarifications",label:r.reportMistakeLabel,buttonContents:r.reportMistakeButtonContents,tipLabel:r.reportMistakeTipLabel,tipContents:r.reportMistakeTipContents,listTabsLabel:r.reportMistakeListTabsLabel,placeholder:r.reportMistakePlaceholder,textAreaLabel:r.reportMistakeTextAreaLabel},projecthelp:{key:"projecthelp",label:r.requestHelpLabel,buttonContents:r.requestHelpButtonContents,tipLabel:r.requestHelpTipLabel,tipContents:r.requestHelpTipContents,listTabsLabel:r.requestHelpListTabsLabel,placeholder:r.requestHelpPlaceholder,textAreaLabel:r.requestHelpTextAreaLabel}};var a={heading:r.loginUpsellHeading,buttonContent:r.loginUpsellButtonContent,notEnoughPoints:r.notEnoughPoints};var i={topVoted:r.topVoted,recent:r.recent,getResponses:r.getResponses,sortBy:r.sortBy};var s={reportMistake:r.reportMistake,helpCenter:r.helpCenter,hideFormattingOptions:r.hideFormattingOptions,showFormattingOptions:r.showFormattingOptions,submitting:r.submitting,showMarkdownPreview:r.showMarkdownPreview,hideMarkdownPreview:r.hideMarkdownPreview};var l={rawTextHeading:r.rawTextHeading,formattedTextHeading:r.formattedTextHeading,bold:r.bold,boldDescription:r.boldDescription,italics:r.italics,italicsDescription:r.italicsDescription,code:r.code,codeDescription:r.codeDescription};var c={clarificationListAccepted:r.clarificationListAccepted,clarificationListSuggested:r.clarificationListSuggested,acceptedClarificationLabel:r.acceptedClarificationLabel,showLabel:r.showLabel,automaticallyHidden:r.automaticallyHidden,deleted:r.deleted,showMore:r.showMore,postedIn:r.postedIn,appearsAtTimestamp:r.appearsAtTimestamp,timestampFromLabel:r.timestampFromLabel,timestampToLabel:r.timestampToLabel,created:r.created,unknown:r.unknown,englishDiscussionUpsell:r.englishDiscussionUpsell,noPosts:r.noPosts,joinTheConversation:r.joinTheConversation};var u={wantToAskQuestion:r.wantToAskQuestion,helpRequestsLink:r.helpRequestsLink,questionsTabForQuestions:r.questionsTabForQuestions,cantPostHelpRequest:r.cantPostHelpRequest,authorHelpRequestsWillAppearHere:r.authorHelpRequestsWillAppearHere,authorAnsweringOwnHelpRequest:r.authorAnsweringOwnHelpRequest};var p={toolOpensModal:r.toolOpensModal,reply:r.reply,replyButtonContents:r.replyButtonContents,replyPlaceholder:r.replyPlaceholder,answer:r.answer,answerButtonContents:r.answerButtonContents,answerPlaceholder:r.answerPlaceholder,answerQuestion:r.answerQuestion,comment:r.comment,getComments:r.getComments,loading:r.loading,replyCommentPlaceholder:r.replyCommentPlaceholder,getVotes:r.getVotes,upvote:r.upvote,downvote:r.downvote,alreadyUpVoted:r.alreadyUpVoted,alreadyDownVoted:r.alreadyDownVoted,noSelfVoting:r.noSelfVoting,atLeast5000:r.atLeast5000,ariaAbstained:r.ariaAbstained,ariaDownvoted:r.ariaDownvoted,ariaUpvoted:r.ariaUpvoted,flag:r.flag,flagAriaLabel:r.flagAriaLabel,flagged:r.flagged,ariaFlagged:r.ariaFlagged,flagModal:r.flagModal,clearFlags:r.clearFlags,approve:r.approve,skip:r.skip,acceptClarification:r.acceptClarification,changeToQuestion:r.changeToQuestion,changeToTipsAndThanks:r.changeToTipsAndThanks,changeToMistakes:r.changeToMistakes,edit:r.edit,delete:r.delete,undelete:r.undelete,fromTheAuthor:r.fromTheAuthor,more:r.more,turnNotificationsOff:r.turnNotificationsOff,turnNotificationsOn:r.turnNotificationsOn,notificationsUnavailable:r.notificationsUnavailable,notificationsUnavailableTitle:r.notificationsUnavailableTitle,saveChanges:r.saveChanges,cancel:r.cancel};var d={seeAllReplies:r.seeAllReplies,hideReplies:r.hideReplies,seeAllAnswers:r.seeAllAnswers,hideAnswers:r.hideAnswers};var f={inappropriate:{title:r.abuse,description:r.abuseDesc},lowquality:{title:r.notHelpful,description:r.notHelpfulDesc},shouldBeTipsOrThanks:{title:r.tipsOrThanks,description:r.tipsOrThanksDesc},shouldBeQuestion:{title:r.question,description:r.questionDesc},spam:{title:r.aboutTheSite,description:r.aboutTheSiteDesc}};var m={header:r.flagModalHeader,flags:f,submit:r.submit};var g={cancel:r.cancel,clearAllFlags:r.clearAllFlags,flagsTitle:r.flagsTitle};var v={cancel:r.cancel,delete:r.delete,confirmDeletion:r.confirmDeletion};var y={getAvatarForUser:r.getAvatarForUser,goToUserProfile:r.goToUserProfile,findingProfileInformation:r.findingProfileInformation,unclaimedPoints:r.unclaimedPoints,questionMark:r.questionMark};var h={projectPassedEval:r.projectPassedEval,projectFailedEval:r.projectFailedEval,fromTheEvaluator:r.fromTheEvaluator,needsMoreWork:r.needsMoreWork};e.exports={tabsStrings:o,upsellStrings:a,headerStrings:i,footerStrings:s,formattingOptionsStrings:l,miscStrings:c,postStrings:p,flagModalStrings:m,clearFlagsModalStrings:g,confirmDeletionModalStrings:v,avatarStrings:y,answersStrings:d,userProjectsStrings:u,evalStrings:h}},iRWY:function(e,t,n){"use strict";n("pNMO");n("4Brf");n("ma9I");n("TeQF");n("2B1R");n("5DmW");n("NBAS");n("U3f4");n("FZtP");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var s=i(n("q1tI"));var r=n("mR6N");var l=n("JimW");var c=n("Vxy9");var u=a(n("Pwnf"));var p=i(n("hCZ8"));var d=a(n("Nw73"));var f=a(n("oia8"));var m=n("i4Cj");var o=a(n("TqM9"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function g(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var r=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}r.forEach(function(e){C(t,e,n[e])})}return t}function v(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function h(e,t,n){if(t)y(e.prototype,t);if(n)y(e,n);return e}function b(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return P(e)}function w(e){w=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return w(e)}function P(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function O(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)E(e,t)}function E(e,t){E=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return E(e,t)}function C(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var S=(0,l.addStyle)("button");var k=function(e){O(a,e);function a(){var e;var t;v(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++){r[o]=arguments[o]}t=b(this,(e=w(a)).call.apply(e,[this].concat(r)));C(P(t),"state",{flagType:null});C(P(t),"handleSubmit",function(){t.props.onClose(t.state.flagType)});return t}h(a,[{key:"render",value:function e(){var n=this;var t=this.props,r=t.onClose,o=t.post,a=t.tab;var i=["inappropriate"];if(a==="questions"){i.push("shouldBeTipsOrThanks")}else if(a==="comments"){i.push("shouldBeQuestion")}i.push.apply(i,["lowquality","spam"]);return s.createElement(p.default,{style:I.modal,onClose:r},s.createElement(l.View,{style:I.content},s.createElement(c.Title,{style:I.title},m.flagModalStrings.header),s.createElement(l.View,{style:I.post},s.createElement(c.Body,null,o.content)),s.createElement(l.View,null,i.map(function(t,e){return s.createElement(l.View,{key:t,style:[I.row,e>0&&I.separator]},s.createElement(S,{style:I.button,onClick:function e(){return n.setState({flagType:t})}},s.createElement(f.default,{selected:n.state.flagType===t}),s.createElement(c.Body,null,m.flagModalStrings.flags[t].title)),s.createElement(c.Body,{style:I.desc},m.flagModalStrings.flags[t].description))}))),s.createElement(p.ModalFooter,{style:L},s.createElement(d.default,{width:138,color:u.default.blue,onClick:this.handleSubmit,disabled:!this.state.flagType},m.flagModalStrings.submit)))}}]);return a}(s.Component);t.default=k;var T=16;var x=16;var A=8;var j=16;var M=16;var I=r.StyleSheet.create({modal:{width:662,maxHeight:"80%"},title:{marginBottom:24},content:{flex:1,padding:"64px 64px 0px 64px"},row:{padding:"".concat(T,"px 0"),flexShrink:0,alignItems:"start"},button:g({},o.default.notAButton,{display:"inline-flex",flexDirection:"row",alignItems:"center",":focus":{outline:"auto"}}),separator:{borderTop:"solid 1px ".concat(u.default.offBlack16)},desc:{color:u.default.offBlack64,paddingLeft:x+A},post:{flex:1,border:"solid 1px ".concat(u.default.offBlack16),color:u.default.offBlack64,borderRadius:4,padding:j,overflow:"auto"}});var L={justifyContent:"flex-end",paddingLeft:M,paddingRight:M}},mEQP:function(e,t,n){"use strict";n("pNMO");n("ma9I");n("TeQF");n("+2oP");n("5DmW");n("NBAS");n("FZtP");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var v=u(n("q1tI"));var y=c(n("i8i4"));var r=n("mR6N");var h=c(n("wa3X"));var b=n("JasB");var w=n("JimW");var a=n("Vxy9");var P=c(n("Q8Wn"));var O=c(n("F4p2"));var E=n("i4Cj");var o=c(n("6OHE"));var i=c(n("uEGL"));var s=c(n("TqM9"));var l=c(n("RTsg"));function c(e){return e&&e.__esModule?e:{default:e}}function u(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function p(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var r=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}r.forEach(function(e){x(t,e,n[e])})}return t}function d(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function m(e,t,n){if(t)f(e.prototype,t);if(n)f(e,n);return e}function g(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return S(e)}function C(e){C=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return C(e)}function S(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function k(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)T(e,t)}function T(e,t){T=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return T(e,t)}function x(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var A=o.default.domainColors("default").domain1;var j=function(e){k(o,e);function o(){var e;var i;d(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++){n[r]=arguments[r]}i=g(this,(e=C(o)).call.apply(e,[this].concat(n)));x(S(i),"renderFormattingOptionsButton",function(e){var t=i.props,n=t.onToggleFormattingOptionsExpanded,r=t.formattingOptionsExpanded;var o=!r;var a=r?E.footerStrings.hideFormattingOptions:E.footerStrings.showFormattingOptions;return v.createElement(h.default,{kind:"tertiary","aria-expanded":r,"aria-controls":e,"aria-label":a,style:(M.button,M.formattingButton),onClick:function e(){if(n){n(o)}}},a)});x(S(i),"renderPreviewButton",function(e){var t=i.props,n=t.onTogglePreviewExpanded,r=t.previewExpanded;var o=!r;var a=r?E.footerStrings.hideMarkdownPreview:E.footerStrings.showMarkdownPreview;return v.createElement(h.default,{kind:"tertiary","aria-expanded":r,"aria-controls":e,"aria-label":a,style:(M.button,M.formattingButton),onClick:function e(){if(n){n(o)}}},a)});return i}m(o,[{key:"componentDidUpdate",value:function e(t){var n=this.submitButton;var r=n&&this.props.submitStatus==="failed"&&t.submitStatus==="submitting";if(r){setTimeout(function(){return n&&n.focus()},0)}}},{key:"getSubmitButtonCopy",value:function e(){var t=this.props,n=t.tab,r=t.isAnswer,o=t.isReply,a=t.editing,i=t.acceptingClarification,s=t.submitStatus;if(s==="submitting"){return E.footerStrings.submitting}else if(a){return E.postStrings.saveChanges}else if(i){return E.postStrings.acceptClarification}else if(o){return E.postStrings.comment}else if(!r&&n){return E.tabsStrings[n].buttonContents}else if(r&&n==="projecthelp"){return E.postStrings.answerButtonContents}else{return E.postStrings.replyButtonContents}}},{key:"renderPreviewArea",value:function e(){return v.createElement(a.Body,{style:[s.default.content,M.previewContainer,this.props.previewExpanded&&M.previewContainerExpanded]},v.createElement(l.default,{string:this.props.content}))}},{key:"render",value:function e(){var n=this;var t=this.props,r=t.isReply,o=t.editing,a=t.acceptingClarification,i=t.canShowFormattingOptions,s=t.formattingOptionsExpanded,l=t.submitButtonDisabled,c=t.submitStatus,u=t.onSubmit;var p=o||a;var d=c==="submitting";var f=this.getSubmitButtonCopy();var m=a?[M.textareaFooter,M.textareaFooterAcceptingClarification]:M.textareaFooter;var g=P.default.kaLocale.slice(0,2)==="en";return v.createElement(w.UniqueIDProvider,{mockOnFirstRender:true,scope:"discussion-post-formatting-options-button"},function(e){return v.createElement(w.View,{style:[M.textareaContainerFooter,r&&M.textareaReplyFooter]},v.createElement(w.View,{style:m,"aria-live":"polite"},g&&n.renderPreviewButton(e.get("toggle-preview-button")),!a&&n.renderFormattingOptionsButton(e.get("toggle-button")),v.createElement(w.View,{style:M.buttonContainer},p&&v.createElement(h.default,{kind:"tertiary",onClick:n.props.onCancel,style:M.button},E.postStrings.cancel),p&&v.createElement(b.Strut,{size:8}),v.createElement(h.default,{disabled:l||d,onClick:u,spinner:d,style:M.button,ref:function e(t){return n.submitButton=y.default.findDOMNode(t)},"aria-label":f},f))),v.createElement(w.View,null,n.renderPreviewArea()),v.createElement(w.View,{style:[M.formattingOptionsContainer,i&&s&&M.formattingOptionsContainerExpanded],id:e.get("toggle-button")},i&&s&&v.createElement(O.default,null)))})}}]);return o}(v.Component);t.default=j;x(j,"defaultProps",{editing:false,acceptingClarification:false});var M=r.StyleSheet.create({textareaContainerFooter:{padding:"12px 16px",border:s.default.border,borderTop:"none",borderBottomRightRadius:4,borderBottomLeftRadius:4},textareaFooter:x({flexDirection:"row",justifyContent:"space-between"},i.default.xsOrSmaller,{flexDirection:"column"}),textareaReplyFooter:{border:"none",paddingLeft:0,paddingRight:0},textareaFooterAcceptingClarification:{justifyContent:"flex-end"},submitButtonContents:{flexDirection:"row",alignItems:"center",justifyContent:"center"},button:x({},i.default.xsOrSmaller,{width:"calc(100% + 60px)"}),submitButtonSpinner:{marginRight:8},notAButton:p({},s.default.notAButton),footerSecondaryButton:x({color:A,marginRight:16,":hover":{textDecoration:"underline"}},i.default.xsOrSmaller,{width:"100%",marginBottom:16,marginRight:0}),previewContainer:{display:"none"},previewContainerExpanded:{borderTop:s.default.border,borderBottom:s.default.border,boxSizing:"border-box",marginTop:16,marginBottom:16,display:"block",minHeight:s.default.textareaMinHeight,transition:"min-height ".concat(o.default.standardTransition),overflow:"auto"},formattingOptionsContainer:{display:"none"},formattingOptionsContainerExpanded:{display:"flex"},formattingLabel:{fontWeight:"bold"},formattingButton:x({},i.default.xsOrSmaller,{width:"100%"}),buttonContainer:{flexDirection:"row"}})},mt3D:function(e,t,n){"use strict";n("ma9I");n("5DmW");n("NBAS");var v=u(n("q1tI"));var i=n("mR6N");var s=n("JimW");var r=c(n("TqM9"));var o=c(n("6OHE"));var l=c(n("wINb"));var y=n("i4Cj");var h=c(n("OsXK"));var b=c(n("RdRB"));var w=c(n("QCGh"));var P=n("AE4M");var a=c(n("cfQQ"));function c(e){return e&&e.__esModule?e:{default:e}}function u(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function p(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function f(e,t,n){if(t)d(e.prototype,t);if(n)d(e,n);return e}function m(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return O(e)}function g(e){g=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return g(e)}function O(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function E(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)C(e,t)}function C(e,t){C=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return C(e,t)}function S(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var k=function(e){E(a,e);function a(){var e;var t;p(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++){r[o]=arguments[o]}t=m(this,(e=g(a)).call.apply(e,[this].concat(r)));S(O(t),"renderImage",function(e,t,n){var r=null;if(!t){r=v.createElement("img",{className:(0,i.css)(A.image),src:(0,l.default)(n),alt:"","aria-hidden":true})}else{r=v.createElement("img",{className:(0,i.css)(A.image),src:(0,l.default)(n),alt:y.avatarStrings.getAvatarForUser((0,P.getAriaAvatarName)(t),e)})}return v.createElement(s.View,{style:A.container},r)});return t}f(a,[{key:"render",value:function e(){var t=this.props,n=t.showCurrentUserAvatar,r=t.avatarSrc,o=t.avatarName,a=t.username,i=t.enableProfilePreviewTooltip,s=t.kaid,l=t.profile;var c;if(!n){c=this.renderImage(a,o,r)}else{var u=l&&l.get("username")||a;var p=l&&l.get("avatarName")||o;var d=l&&l.get("avatar").thumbnailSrc||r;c=this.renderImage(u,p,d)}var f=v.createElement(b.default,{kaid:s});var m="".concat(y.avatarStrings.getAvatarForUser((0,P.getAriaAvatarName)(o),a)," ").concat(y.avatarStrings.goToUserProfile(a));var g="/profile/".concat(s,"/discussion");return i?v.createElement(h.default,{content:f,side:"top",offset:12,horizontalAlignment:"left",enablePointerEvents:true,ariaLive:"polite"},v.createElement(w.default,{href:g,"aria-label":m},c)):c}}]);return a}(v.Component);S(k,"defaultProps",{showCurrentUserAvatar:false,avatarName:"Default Khan Academy avatar",avatarSrc:"/images/avatars/svg/leaf-green.svg",username:"",kaid:"",enableProfilePreviewTooltip:false});var T=48;var x=32;var A=i.StyleSheet.create({container:{borderRadius:"50%",width:T,minWidth:T,height:T,border:"solid 2px ".concat(r.default.borderColor),backgroundColor:o.default.colors.white,flexDirection:"row",justifyContent:"center",alignItems:"center"},image:{width:x,height:x}});e.exports=(0,a.default)(k)},oia8:function(e,t,n){"use strict";n("5DmW");n("NBAS");Object.defineProperty(t,"__esModule",{value:true});t.default=void 0;var r=c(n("q1tI"));var o=n("mR6N");var a=l(n("Pwnf"));var i=n("JimW");var s=l(n("TqM9"));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function d(e,t,n){if(t)p(e.prototype,t);if(n)p(e,n);return e}function f(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return m(e)}function m(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function g(e){g=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return g(e)}function v(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)y(e,t)}function y(e,t){y=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return y(e,t)}function h(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var b=function(e){v(t,e);function t(){u(this,t);return f(this,g(t).apply(this,arguments))}d(t,[{key:"render",value:function e(){var t=this.props.selected;return r.createElement(i.View,{"aria-hidden":"true",style:[P.fakeRadioButton,t&&P.selectedFakeRadioButton]})}}]);return t}(r.Component);t.default=b;h(b,"defaultProps",{selected:false});var w=16;var P=o.StyleSheet.create({fakeRadioButton:{flexShrink:0,flexGrow:0,borderRadius:"50%",width:w,height:w,border:s.default.border,marginRight:8,boxSizing:"border-box"},selectedFakeRadioButton:{border:"4px solid ".concat(a.default.blue)}})},qRmI:function(e,t,n){"use strict";n("5DmW");n("NBAS");Object.defineProperty(t,"__esModule",{value:true});t.default=t.AcceptedClarificationInput=void 0;var l=m(n("q1tI"));var r=n("/MKj");var a=n("mR6N");var o=f(n("gE8/"));var c=n("JimW");var u=f(n("HbaH"));var s=n("IZy4");var p=n("i4Cj");var i=f(n("TqM9"));var d=n("DDFQ");function f(e){return e&&e.__esModule?e:{default:e}}function m(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function g(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function y(e,t,n){if(t)v(e.prototype,t);if(n)v(e,n);return e}function h(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return w(e)}function b(e){b=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return b(e)}function w(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function P(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)O(e,t)}function O(e,t){O=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return O(e,t)}function E(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var C=function(e){P(t,e);function t(e){var f;g(this,t);f=h(this,b(t).call(this,e));E(w(f),"getStartAndEndFromProps",function(){var e=f.props,t=e.post,n=e.editingOrAccepting;var r=20;var o=40;if(n==="editing"&&t.closeTimestamp){r=t.openTimestamp;o=t.closeTimestamp}else if(t.content){r=(0,s.getTimestampSecondsFromText)(t.content);o=r+20}var a=(0,s.getTimestampFromSeconds)(r);var i=(0,s.getTimestampFromSeconds)(o);return{startingTimestampMinutes:Number(a.minutes),startingTimestampSeconds:Number(a.seconds),endingTimestampMinutes:Number(i.minutes),endingTimestampSeconds:Number(i.seconds)}});E(w(f),"handleSubmitAcceptedClarification",function(e){var t=f.props,n=t.post,r=t.editingOrAccepting,o=t.onSubmitClarificationAcceptance,a=t.onSubmitClarificationEdit;var i=f.state,s=i.startingTimestampMinutes,l=i.startingTimestampSeconds,c=i.endingTimestampMinutes,u=i.endingTimestampSeconds;var p=s*60+l;var d=c*60+u;if(p>=d){return}if(r==="editing"){a(e,p,d)}else if(n.authorAvatarSrc){o(n.key,n.authorAvatarSrc,n.authorNickname,n.authorKaid,e,p,d)}});E(w(f),"renderClarificationTimestampInput",function(o){var e=f.state[o];return l.createElement("input",{className:(0,a.css)(S.acceptClarificationInput),value:e,onChange:function e(t){var n=t.target.value;var r=n.length?Number(n):0;f.setState(E({},o,r))},type:"number",min:0,max:59})});f.state=f.getStartAndEndFromProps();return f}y(t,[{key:"componentDidUpdate",value:function e(t){if(this.props.editingOrAccepting!==t.editingOrAccepting||this.props.post.openTimestamp!==t.post.openTimestamp||this.props.post.closeTimestamp!==t.post.closeTimestamp||this.props.post.content!==t.post.content){this.setState(this.getStartAndEndFromProps())}}},{key:"render",value:function e(){var t=this.props,n=t.post,r=t.contentId,o=t.topicSlug,a=t.onCancel;var i="";var s="";if(n.key){i=n.key;s=n.content}else if(n.id){i=n.id;s=n.text}return l.createElement(c.View,{style:S.replyInputContainer},l.createElement(u.default,{acceptingClarification:true,tab:"clarifications",contentKind:"Video",contentId:r,topicSlug:o,feedbackKey:i,initialPostContent:s,onCancel:a,onSubmitAcceptedClarification:this.handleSubmitAcceptedClarification}),l.createElement(c.View,{style:S.acceptClarificationContainer},p.miscStrings.timestampFromLabel,this.renderClarificationTimestampInput("startingTimestampMinutes"),":",this.renderClarificationTimestampInput("startingTimestampSeconds"),p.miscStrings.timestampToLabel,this.renderClarificationTimestampInput("endingTimestampMinutes"),":",this.renderClarificationTimestampInput("endingTimestampSeconds")))}}]);return t}(l.Component);t.AcceptedClarificationInput=C;var S=a.StyleSheet.create({spinner:{marginRight:o.default.xSmall},replyInputContainer:{paddingBottom:o.default.large},acceptClarificationContainer:{display:"block",marginLeft:i.default.avatarContainerDiameter+i.default.avatarFormSpace},acceptClarificationInput:{width:40,padding:0,margin:"16px 4px 0 4px",textAlign:"right"}});var k={onSubmitClarificationAcceptance:d.acceptClarificationAction,onSubmitClarificationEdit:d.editAcceptedClarificationAction};var T=function e(t){return{contentId:t.contentId}};var x=(0,r.connect)(T,k)(C);var A=x;t.default=A},t0zn:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default=t.createDiscussionStore=void 0;var r=n("ANjH");var o=i(n("TdMD"));var a=i(n("wkgs"));function i(e){return e&&e.__esModule?e:{default:e}}var s=(0,r.applyMiddleware)(o.default)(r.createStore);var l=function e(){return s(a.default)};t.createDiscussionStore=l;var c=l();t.default=c},tCRy:function(e,t,n){"use strict";n("pNMO");n("ma9I");n("TeQF");n("yXV3");n("5DmW");n("FZtP");Object.defineProperty(t,"__esModule",{value:true});t.default=t.defaultApi=t.fetchPostsParameters=t.fetchPostsUrl=void 0;var r=n("fQqa");var o=n("skGw");var a=i(n("gXb0"));function i(e){return e&&e.__esModule?e:{default:e}}function s(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var r=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}r.forEach(function(e){l(t,e,n[e])})}return t}function l(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function c(e,t){if(e==null)return{};var n=u(e,t);var r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++){r=a[o];if(t.indexOf(r)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,r))continue;n[r]=e[r]}}return n}function u(e,t){if(e==null)return{};var n={};var r=Object.keys(e);var o,a;for(a=0;a<r.length;a++){o=r[a];if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}var p=1;var d=2;var f={UP:1,ABSTAIN:0,DOWN:-1};var m={"top-voted":p,recent:d};var g={"Content-Type":"application/json"};var v={"Content-Type":"application/x-www-form-urlencoded"};var y="/api/internal/discussions";var h=function e(t){return"/api/internal/feedback/".concat(t)};var b=function e(t){var n=P(t);var r=O(t);return w(n)(r)};var w=function e(r){return function(e){var t=(0,a.default)(e,true);var n="".concat(r).concat(t);return(0,o.khanFetch)(n).then(function(e){return e.json()})}};var P=function e(t){var n=t.contentKind,r=t.contentId,o=t.currentTab,a=t.youtubeId;var i=n.toLowerCase();var s=r;var l=o;if(n==="Video"&&o==="clarifications"&&a){i="youtubevideo";s=a}if(n==="scratchpad"&&o==="projecthelp"){l="projectfeedback"}return"".concat(y,"/").concat(i,"/").concat(s,"/").concat(l)};t.fetchPostsUrl=P;var O=function e(t){var n=t.currentTab,r=t.currentSort,o=t.qaExpandKey,a=t.expandFeedbackType,i=t.cursor;var s=m[r]||p;var l={casing:"camel",sort:s,limit:10,page:0};if(i){l.cursor=i}if(o&&a===n){l.qa_expand_key=o}return l};t.fetchPostsParameters=O;var E=function e(t){return(0,o.khanFetch)("".concat(h(t.postKey),"/notifications"),{method:t.enable?"PUT":"DELETE"}).then(function(e){return e.json()})};var C=function e(t){return(0,o.khanFetch)("".concat(y,"/voteentity"),{method:"POST",body:(0,a.default)(t),headers:v})};var S=function e(t){return C({entity_key:t.postKey,vote_type:t.upVoted?f.ABSTAIN:f.UP})};var k=function e(t){return C({entity_key:t.postKey,vote_type:t.downVoted?f.ABSTAIN:f.DOWN})};var T=function e(t){return(0,o.khanFetch)("".concat(y,"/flagentity"),{method:"POST",body:(0,a.default)(t),headers:v})};var x={inappropriate:"inappropriate",lowquality:"lowquality",shouldBeQuestion:"changetoquestion",shouldBeTipsOrThanks:"changetocomment",spam:"spam",plagiarism:"plagiarism","vote-soliciting":"vote-soliciting","using-disallowed":"using-disallowed"};var A=function e(t){var n=x[t.flag];return T({entity_key:t.postKey,flag:n})};var j=function e(t){return(0,o.khanFetch)("".concat(h(t.postKey),"/changetype"),{method:"PUT",body:JSON.stringify({type:t.intoType}),headers:g})};var M=function e(t){return(0,o.khanFetch)("".concat(h(t.postKey),"/clearflags"),{method:"PUT",headers:g})};var I=function e(t){return(0,o.khanFetch)("".concat(h(t.postKey)),{method:"DELETE",headers:g})};var L=function e(t){return(0,o.khanFetch)("".concat(h(t.postKey),"/undelete"),{method:"PUT",headers:g})};var F=function e(t){return(0,o.khanFetch)("".concat(y,"/").concat(t.postKey,"/replies?casing=camel")).then(function(e){return e.json()})};var D=function e(t){var n=t.postKey,r=c(t,["postKey"]);return(0,o.khanFetch)("".concat(y,"/").concat(n,"/replies?casing=camel"),{method:"POST",body:JSON.stringify(r),headers:g}).then(function(e){return e.json()})};var R=function e(t){return(0,r.getOfficialClarifications)(t.youtubeId)};var K=function e(t){return(0,r.createOfficialClarification)(t.youtubeId,t.kaid,t.text,t.openTimestamp,t.closeTimestamp)};var B=function e(t){return(0,r.updateOfficialClarification)(t.id,t.youtubeId,t.text,t.openTimestamp,t.closeTimestamp)};var V=function e(t){return(0,r.deleteOfficialClarification)(t.clarificationId)};var N={getId:function e(){return"default"},fetchPosts:b,modifyNotificationsFlag:E,upvotePost:S,downvotePost:k,flagPost:A,changeType:j,clearFlags:M,deletePost:I,undeletePost:L,fetchReplies:F,addReply:D,fetchAcceptedClarifications:R,acceptClarification:K,editAcceptedClarification:B,deleteAcceptedClarification:V};t.defaultApi=N;var q={};var H={get:function e(t){var n=t&&q[t];return n||s({},N)},register:function e(t,n){q[t]=n}};var U=H;t.default=U},wkgs:function(e,t,n){"use strict";n("pNMO");n("ma9I");n("TeQF");n("fbCW");n("yq1k");n("2B1R");n("ToJy");n("5DmW");n("U3f4");n("JTJg");n("FZtP");Object.defineProperty(t,"__esModule",{value:true});t.calcSumVotes=He;t.flattenPosts=Ue;t.default=r;t.defaultState=void 0;var Re=n("AE4M");function Ke(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var r=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}r.forEach(function(e){Be(t,e,n[e])})}return t}function Be(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var Ve={contentKind:"",contentId:"",youtubeId:null,posts:{},acceptedClarificationPosts:[],tabs:{questions:{cursor:"",isComplete:true,postKeys:[],totalCount:0},comments:{cursor:"",isComplete:true,postKeys:[],totalCount:0},clarifications:{cursor:"",isComplete:true,postKeys:[],totalCount:0},projecthelp:{cursor:"",isComplete:true,postKeys:[],totalCount:0}},newPostKey:null,focusOnTopLevelInput:false,currentTab:"questions",currentSort:"top-voted",currentCursor:"",qaExpandKey:null,expandFeedbackType:null,displayInputPostKey:null,apiId:"",clarificationBeingAcceptedId:null,postBeingEditedKey:null,hasUnansweredHelpRequests:null};t.defaultState=Ve;var Ne=1;var qe=-1;function He(e,t){if(t===Ne){if(e.upVoted){return e.sumVotesIncremented-1}else{return e.sumVotesIncremented+(e.downVoted?2:1)}}else{if(e.downVoted){return e.sumVotesIncremented+1}else{return e.sumVotesIncremented-(e.upVoted?2:1)}}}function Ue(e){return e.reduce(function(e,t){var n=t.answers||[];return Ke({},e,Ue(n),Be({},t.key,Ke({},t,{answers:n.map(function(e){return e.key}),replies:[]})))},{})}function r(o,e){if(!o){return Ve}switch(e.type){case"initializeContent":{var t=e.contentKind,n=e.contentId,r=e.youtubeId,a=e.qaExpandKey;var i=e.expandFeedbackType==="projectfeedback"?"projecthelp":e.expandFeedbackType;return Ke({},o,{contentKind:t,contentId:n,youtubeId:r,qaExpandKey:a,expandFeedbackType:i,currentTab:i?i:o.currentTab})}case"initializeDiscussionListComponent":{var s=e.tab,l=e.cursor,c=e.apiId;var u=o.tabs;return Ke({},o,{apiId:c||"",contentKind:"Topic",currentTab:s,tabs:Ke({},u,Be({},s,Ke({},u[s],{cursor:l})))})}case"postSuccess":{var p=e.post,d=e.tab;p.answers=p.answers||[];var f=[];var m={};if(p.type==="answer"&&p.questionKey){var g;f=o.tabs[d].postKeys;var v=o.posts[p.questionKey];v.answers.unshift(p.key);m=Ke({},o.posts,(g={},Be(g,p.questionKey,v),Be(g,p.key,p),g))}else{f=[p.key].concat(o.tabs[d].postKeys);m=Ke(Be({},p.key,p),o.posts)}var y=o.hasUnansweredHelpRequests;if(p.type==="projecthelp"){y=true}else if(d==="projecthelp"&&p.type==="answer"&&y){var h=o.tabs.projecthelp.postKeys;if(h.length===1){y=false}else{var b=h.find(function(e){return(0,Re.isPostUnanswered)(e,m)});y=!!b}}return Ke({},o,{posts:m,hasUnansweredHelpRequests:y,tabs:Ke({},o.tabs,Be({},d,Ke({},o.tabs[d],{postKeys:f,totalCount:o.tabs[d].totalCount+1}))),newPostKey:p.key})}case"fetchingPosts":{return Ke({},o,{fetchingPosts:true})}case"updatePosts":{var w=e.tab,P=e.cursor,O=e.isComplete,E=e.totalCount;var C=o.tabs;var S=Ke({},o.posts,Ue(e.posts));var k=w!=="projecthelp"?e.posts:e.posts.filter(function(e){return e.type==="projecthelp"});var T=k.map(function(e){return e.key});var x=e.acceptedClarificationPosts||[];var A=function e(t,n){var r=function e(t){if(t.type!=="projecthelp"){return false}return(0,Re.isPostUnanswered)(t.key,n)};return t.tab==="projecthelp"?t.posts.some(r):o.hasUnansweredHelpRequests};return Ke({},o,{fetchingPosts:false,posts:S,acceptedClarificationPosts:x,hasUnansweredHelpRequests:A(e,S),tabs:Ke({},C,Be({},w,{postKeys:T,cursor:P,isComplete:O,totalCount:E}))})}case"appendPosts":{var j=e.tab,M=e.cursor,I=e.isComplete;var L=o.tabs;var F=e.posts.filter(function(e){return!Object.keys(o.posts).includes(e.key)});var D=Ke({},o.posts,Ue(F));var R=L[j].postKeys;var K=F.map(function(e){return e.key});var B=[].concat(R,K);return Ke({},o,{fetchingPosts:false,posts:D,newPostKey:K.length?K[0]:null,tabs:Ke({},L,Be({},j,Ke({},o.tabs[j],{postKeys:B,cursor:M,isComplete:I})))})}case"updatePost":{var V=e.post;var N=o.posts[V.key];return Ke({},o,{posts:Ke({},o.posts,Be({},V.key,Ke({},N,V)))})}case"updateReplies":{var q=e.replies,H=e.parentKey;var U=Ke({},o.posts,Ue(q));return Ke({},o,{posts:Ke({},U,Be({},H,Ke({},U[H],{replies:q.map(function(e){return e.key})})))})}case"addReply":{var W=e.parentKey,Q=e.post;var z=Ke({},o.posts,Be({},Q.key,Q));z[W].replyCount+=1;var J=z[W].replies||[];z[W].replies=[].concat(J,[Q.key]);return Ke({},o,{posts:z,newPostKey:Q.key})}case"upvotePost":{var Y=e.postKey;var G=o.posts[Y];if(!G){throw new Error("post doesn't exist")}return Ke({},o,{posts:Ke({},o.posts,Be({},Y,Ke({},G,{downVoted:false,upVoted:!G.upVoted,sumVotesIncremented:He(G,Ne)})))})}case"changePostType":{var X=e.postKey,Z=e.postType;var $=o.posts[X];if(Z==="answer"){throw new Error("Cannot change the type to an Answer")}else if(!$){throw new Error("post doesn't exist")}else if(!$.type){throw new Error("post has no type")}else if($.type==="reply"||$.type==="scratchpad"||$.type==="projecthelp"||$.type==="projecteval"||$.type==="projectevalanswer"){throw new Error('posts of type "'.concat($.type,"\" can't be changed to another type"))}var ee={comment:"comments",question:"questions",clarification:"clarifications"}[Z];var te=o.tabs[ee].postKeys;if($.type==="answer"||$.type==="projecthelp"){var ne;if(!$.questionKey){throw new Error("answer has no parent")}var re=o.posts[$.questionKey];if(!re){throw new Error("parent post does not exist")}return Ke({},o,{posts:Ke({},o.posts,(ne={},Be(ne,re.key,Ke({},re,{answers:re.answers.filter(function(e){return e!==$.key})})),Be(ne,$.key,Ke({},$,{type:Z})),ne)),tabs:Ke({},o.tabs,Be({},ee,Ke({},o.tabs[ee],{postKeys:[$.key].concat(te),totalCount:o.tabs[ee].totalCount+1})))})}else{var oe;var ae={comment:"comments",question:"questions",clarification:"clarifications"}[$.type];return Ke({},o,{posts:Ke({},o.posts,Be({},$.key,Ke({},$,{type:Z}))),tabs:Ke({},o.tabs,(oe={},Be(oe,ae,Ke({},o.tabs[ae],{postKeys:o.tabs[ae].postKeys.filter(function(e){return e!==$.key}),totalCount:o.tabs[ae].totalCount-1})),Be(oe,ee,Ke({},o.tabs[ee],{postKeys:[$.key].concat(te),totalCount:o.tabs[ee].totalCount+1})),oe))})}}case"clearFlags":{var ie=e.postKey;var se=o.posts[ie];if(!se){throw new Error("post doesn't exist")}return Ke({},o,{posts:Ke({},o.posts,Be({},ie,Ke({},se,{flags:[],flaggedByUser:false})))})}case"downvotePost":{var le=e.postKey;var ce=o.posts[le];if(!ce){throw new Error("post doesn't exist")}return Ke({},o,{posts:Ke({},o.posts,Be({},le,Ke({},ce,{downVoted:!ce.downVoted,upVoted:false,sumVotesIncremented:He(ce,qe)})))})}case"flagPost":{var ue=e.postKey,pe=e.flag;var de=o.posts[ue];var fe=de.flags||[];if(!de){throw new Error("post doesn't exist")}return Ke({},o,{posts:Ke({},o.posts,Be({},ue,Ke({},de,{flaggedByUser:true,flags:[].concat(fe,[pe])})))})}case"changeTab":{return Ke({},o,{currentTab:e.tab,newPostKey:null})}case"changeSortBy":{return Ke({},o,{currentSort:e.sort,newPostKey:null})}case"resetNewPostKey":return Ke({},o,{newPostKey:null});case"setFocusOnTopLevelInput":return Ke({},o,{focusOnTopLevelInput:true});case"resetFocusOnTopLevelInput":return Ke({},o,{focusOnTopLevelInput:false});case"resetExpandKey":return Ke({},o,{expandFeedbackType:null,qaExpandKey:null});case"deletePost":{var me=o.currentTab;var ge=e.postKey;var ve=o.posts[ge];if(!ve){throw new Error("post doesn't exist")}var ye=Ke({},o.posts,Be({},ge,Ke({},ve,{deleted:true})));var he=ve.type==="projecthelp";var be=o.hasUnansweredHelpRequests;if(he&&be){be=false;var we=o.tabs.projecthelp.postKeys;if(we.length>1){be=we.some(function(e){return(0,Re.isPostUnanswered)(e,ye)})}}if(me==="projecthelp"&&ve.type==="answer"&&!be&&ve.questionKey){var Pe=o.posts[ve.questionKey];var Oe=Pe.answers;var Ee=Oe.some(function(e){var t=ye[e];return t&&!t.deleted&&!t.appearsAsDeleted});be=!Ee}return Ke({},o,{hasUnansweredHelpRequests:be,posts:ye})}case"deleteAcceptedClarificationPost":{var Ce=e.clarificationId;var Se=o.acceptedClarificationPosts.filter(function(e){return e.id!==Ce});if(Se.length===o.acceptedClarificationPosts.length){throw new Error("accepted clarification doesn't exist")}return Ke({},o,{acceptedClarificationPosts:Se})}case"undeletePost":{var ke=e.postKey;var Te=o.posts[ke];if(!Te){throw new Error("post doesn't exist")}return Ke({},o,{posts:Ke({},o.posts,Be({},ke,Ke({},Te,{deleted:false})))})}case"editPost":{var xe=e.postKey,Ae=e.content;var _e=o.posts[xe];if(!_e){throw new Error("post doesn't exist")}return Ke({},o,{posts:Ke({},o.posts,Be({},xe,Ke({},_e,{content:Ae})))})}case"acceptClarification":{var je=e.originalClarificationId,Me=e.clarification;var Ie=Ke({},o.posts);delete Ie[je];var Le=o.tabs.clarifications.postKeys.filter(function(e){return e!==je});if(Le.length===o.tabs.clarifications.postKeys.length){throw new Error("Couldn't find the clarification to delete.")}return Ke({},o,{posts:Ie,acceptedClarificationPosts:[].concat(o.acceptedClarificationPosts,[Me]),tabs:Ke({},o.tabs,{clarifications:Ke({},o.tabs.clarifications,{postKeys:Le,totalCount:o.tabs.clarifications.totalCount-1})})})}case"startAcceptingClarification":{return Ke({},o,{clarificationBeingAcceptedId:e.clarificationId})}case"stopAcceptingClarification":{return Ke({},o,{clarificationBeingAcceptedId:null})}case"startEditingPost":{return Ke({},o,{postBeingEditedKey:e.postKey})}case"stopEditingPost":{return Ke({},o,{postBeingEditedKey:null})}case"editAcceptedClarification":{var Fe=e.clarification;var De=o.acceptedClarificationPosts.map(function(e){if(e.id===Fe.id){return Fe}else{return e}});return Ke({},o,{acceptedClarificationPosts:De})}case"toggleReplyInput":return Ke({},o,{displayInputPostKey:o.displayInputPostKey===e.postKey?null:e.postKey});default:e.type;return o}}},y6Wz:function(e,t,n){"use strict";n("pNMO");n("ma9I");n("TeQF");n("yq1k");n("yXV3");n("2B1R");n("zKZe");n("5DmW");n("NBAS");n("07d7");n("U3f4");n("JfAA");n("JTJg");n("FZtP");Object.defineProperty(t,"__esModule",{value:true});t.default=t.DiscussionPost=void 0;var k=W(n("q1tI"));var S=W(n("i8i4"));var r=n("/MKj");var T=n("mR6N");var x=U(n("wd/R"));var o=n("Pk2J");var A=n("JimW");var a=n("vwLt");var j=n("Vxy9");var i=U(n("wa3X"));var f=U(n("Pwnf"));var m=U(n("yts4"));var s=U(n("gE8/"));var l=n("DzHr");var M=U(n("qRmI"));var c=U(n("fjY8"));var I=U(n("mt3D"));var L=U(n("HbaH"));var p=U(n("iRWY"));var u=U(n("KPIR"));var d=U(n("RTsg"));var F=U(n("QCGh"));var g=U(n("hSyu"));var v=U(n("EIXS"));var y=U(n("XKyD"));var D=n("AE4M");var h=U(n("mXPZ"));var R=U(n("++Bp"));var b=U(n("mCQM"));var w=U(n("7e7+"));var P=U(n("gzgZ"));var O=n("SjSX");var E=U(n("cfQQ"));var K=n("i4Cj");var C=U(n("6OHE"));var B=U(n("uEGL"));var V=U(n("TqM9"));var N=n("qRKg");var q=U(n("wINb"));var H=n("DDFQ");function U(e){return e&&e.__esModule?e:{default:e}}function W(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var n in e){if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};if(r.get||r.set){Object.defineProperty(t,n,r)}else{t[n]=e[n]}}}}t.default=e;return t}}function Q(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};var r=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}r.forEach(function(e){te(t,e,n[e])})}return t}function z(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function J(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return G(e)}function Y(e){Y=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return Y(e)}function G(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function Z(e,t,n){if(t)X(e.prototype,t);if(n)X(e,n);return e}function $(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)ee(e,t)}function ee(e,t){ee=Object.setPrototypeOf||function e(t,n){t.__proto__=n;return t};return ee(e,t)}function te(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function ne(){ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){e[r]=n[r]}}}return e};return ne.apply(this,arguments)}function re(e,t){if(e==null)return{};var n=oe(e,t);var r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++){r=a[o];if(t.indexOf(r)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,r))continue;n[r]=e[r]}}return n}function oe(e,t){if(e==null)return{};var n={};var r=Object.keys(e);var o,a;for(a=0;a<r.length;a++){o=r[a];if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}var ae=V.default.compactStyles;var ie=(0,A.addStyle)("button");var se=function e(t){var n=t.style,r=re(t,["style"]);return k.createElement(ie,ne({style:[fe.linkStyledButton,n]},r))};var le={downvoteSelected:{small:"M8.868 14.48l6.277-10.984A1 1 0 0 0 14.277 2H1.723a1 1 0 0 0-.868 1.496l6.277 10.985a1 1 0 0 0 1.736 0z"},downvote:{small:"M8 11.969L12.554 4H3.446L8 11.969zm.868 2.512a1 1 0 0 1-1.736 0L.855 3.496A1 1 0 0 1 1.723 2h12.554a1 1 0 0 1 .868 1.496L8.868 14.481z"},flagSelected:{small:"M4 11.775V15a1 1 0 0 1-2 0V2.66a1 1 0 0 1 .435-.826c1.04-.712 2.274-.968 3.701-.768 2.448.342 2.734 2.094 4.728 2.342 1.11.138 2.256-.05 3.436-.566a.5.5 0 0 1 .7.458v9.182a.5.5 0 0 1-.18.385c-1.097.914-2.416 1.275-3.956 1.083-2.439-.303-2.744-2.065-4.728-2.342A5.104 5.104 0 0 0 4 11.775z"},flag:{small:"M4 11.775V15a1 1 0 0 1-2 0V2.66a1 1 0 0 1 .435-.826c1.04-.712 2.274-.968 3.701-.768 2.448.342 2.734 2.094 4.728 2.342 1.11.138 2.256-.05 3.436-.566a.5.5 0 0 1 .7.458v9.182a.5.5 0 0 1-.18.385c-1.097.914-2.416 1.275-3.956 1.083-2.439-.303-2.744-2.065-4.728-2.342A5.104 5.104 0 0 0 4 11.775zm6.617-6.382c-1.2-.15-1.981-.57-2.99-1.39l-.279-.228c-.596-.484-.907-.647-1.489-.729-.735-.103-1.34-.035-1.859.195v6.474c.807-.169 1.614-.2 2.413-.088 1.185.166 1.945.585 2.957 1.41l.239.195c.618.503.92.661 1.501.733.743.093 1.354.002 1.89-.274V5.323a7.902 7.902 0 0 1-2.383.07z"},upvoteSelected:{small:"M8.868 2.52l6.277 10.984A1 1 0 0 1 14.277 15H1.723a1 1 0 0 1-.868-1.496L7.132 2.519a1 1 0 0 1 1.736 0z"},upvote:{small:"M3.446 13h9.108L8 5.031 3.446 13zM8.868 2.52l6.277 10.984A1 1 0 0 1 14.277 15H1.723a1 1 0 0 1-.868-1.496L7.132 2.519a1 1 0 0 1 1.736 0z"}};var ce=function e(t){var n=t.label,r=t.onClick;return k.createElement(i.default,{kind:"tertiary",size:"small",style:{marginRight:12},onClick:r},n)};var ue=function(e){$(o,e);Z(o,null,[{key:"getRepliesExpandedFromProps",value:function e(t){var n=t.post,r=t.qaExpandKey,o=t.newPostKey;var a=n.replyCount;return(0,D.shouldAutoExpandReplies)(n,r)&&a!=null&&a>0&&!o}}]);function o(e){var S;z(this,o);S=J(this,Y(o).call(this,e));te(G(S),"nodes",{});te(G(S),"srOnlyFlagModal",k.createElement(A.View,{style:N.srOnly}," ",K.postStrings.flagAriaLabel));te(G(S),"srOnlyToolOpensModal",k.createElement(A.View,{style:N.srOnly}," ",K.postStrings.toolOpensModal));te(G(S),"getRepliesContainerId",function(){return"".concat(S.props.post.key,"-replies-container")});te(G(S),"setModalVisibility",function(n){return function(t){S.setState(function(e){return{isModalOpen:Q({},e.isModalOpen,te({},t,n))}})}});te(G(S),"openModal",S.setModalVisibility(true));te(G(S),"closeModal",S.setModalVisibility(false));te(G(S),"maybeAutoFocusPost",function(e){if(!S.postElement||!S.postElement.focus){return}var t=S.props,n=t.post,r=t.qaExpandKey,o=t.newPostKey,a=t.resetExpandKey,i=t.resetNewPostKeyInfo;if(o&&o===n.key){S.postElement.focus();i();return}if(r&&n.expandKey===r){S.postElement.focus();a();return}if(S.postElement&&(!e||!e.autoFocusPostOnMount)&&S.props.autoFocusPostOnMount){S.postElement.focus();return}});te(G(S),"handleUpvote",function(){if(!h.default.isLoggedIn){S.setState({showSignUpModal:true});return}var e=S.props.post;S.props.onUpvotePost(e);var t=e.sumVotesIncremented;if(S.props.post.upVoted){var n=t-1;S.setState({ariaVoteMessage:K.postStrings.ariaAbstained(e,n)})}else{var r=t+(S.props.post.downVoted?2:1);S.setState({ariaVoteMessage:K.postStrings.ariaUpvoted(e,r)})}});te(G(S),"handleDownvote",function(){if(!h.default.isLoggedIn){S.setState({showSignUpModal:true});return}var e=S.props.post;S.props.onDownvotePost(e);var t=e.sumVotesIncremented;if(S.props.post.downVoted){var n=t+1;S.setState({ariaVoteMessage:K.postStrings.ariaAbstained(e,n)})}else{var r=t-(S.props.post.upVoted?2:1);S.setState({ariaVoteMessage:K.postStrings.ariaDownvoted(e,r)})}});te(G(S),"handleChangeToQuestion",function(){S.props.onChangeType(S.props.post,"question")});te(G(S),"handleChangeToTipsAndThanks",function(){S.props.onChangeType(S.props.post,"comment")});te(G(S),"handleChangeToMistakes",function(){S.props.onChangeType(S.props.post,"clarification")});te(G(S),"handleClearAllFlags",function(){var e=S.props.moderatorMode;S.props.onClearFlags(S.props.post);if(e){S.setState({skipped:true})}});te(G(S),"handleDelete",function(){var e=S.props,t=e.moderatorMode,n=e.onDeletePost,r=e.post;n(r);if(t){S.setState({skipped:true})}});te(G(S),"handleSkip",function(){S.setState({skipped:true})});te(G(S),"handleClickComment",function(){var e=S.props,t=e.post,n=e.onShowReplies;var r=t.replyCount,o=t.replies;if(!S.state.repliesExpanded&&r&&r>0&&o.length!==r){n(S.props.post.key)}if(!h.default.isLoggedIn&&(!r||r===0)){S.setState({showSignUpModal:true})}else{S.setState({repliesExpanded:!S.state.repliesExpanded})}});te(G(S),"handleReplyInputToggle",function(){var e=S.props,t=e.displayInputPostKey,n=e.post;S.props.onToggleReplyInput(n.key);if(t===n.key){S.setState({formattingOptionsExpanded:false})}});te(G(S),"showFlagButton",function(e){var t=S.props.post;var n=t.type==="projecteval";if(n){return false}if(S.isCompactView()&&t.type!=="reply"){return false}return!e||e&&!e.get("isChildAccount")});te(G(S),"renderPostHeader",function(){var e=S.props,t=e.post,n=e.showPostedIn,r=e.showParentQuestion,o=e.moderatorMode,a=e.profile;var i=t.expandKey,s=t.key,l=t.authorNickname,c=t.created,u=t.date,p=t.badges,d=t.permalink,f=t.focus,m=t.authorKaid;var g=t.type==="scratchpad";var v=[V.default.datetime,!S.shouldShowAuthor()&&ae.datetime];var y=t.type==="reply";var h=o?(0,x.default)(u).toString():(0,x.default)(u).fromNow();var b=(0,D.getDirectLinkSrString)(h,t);var w=k.createElement(j.LabelMedium,{style:v},k.createElement(A.View,{"aria-hidden":"true"},h),k.createElement(A.View,{style:N.srOnly},b));var P=null;if(g&&c){P=k.createElement(j.LabelMedium,{style:v},"(",K.miscStrings.created,": ",(0,x.default)(c).toString(),")")}var O=d&&i?"".concat(d,"?qa_expand_key=").concat(i):"";var E=null;if(t.deleted){E=k.createElement(j.HeadingXSmall,{style:fe.deletedPostLabel},K.miscStrings.deleted)}else if(t.appearsAsDeleted){E=k.createElement(j.HeadingXSmall,{style:fe.hiddenPostLabel},K.miscStrings.automaticallyHidden)}var C=[V.default.nameAndDatetime,S.isCompactView()&&de.nameAndDatetime];return k.createElement(A.View,{style:[fe.postHeader,y&&fe.replyHeader]},k.createElement(A.View,null,k.createElement(A.View,{style:C},S.shouldShowAuthor()&&k.createElement(D.PostAuthorName,{name:l,kaid:m}),k.createElement(F.default,{href:O},w),P,E),n&&!!f&&k.createElement(A.View,{style:fe.postedInContainer},k.createElement(j.LabelMedium,{style:fe.postedInLabel},K.miscStrings.postedIn),k.createElement(j.LabelMedium,null,k.createElement(F.default,{href:O,style:fe.postedInFocusLink},f.translatedTitle))),r&&t.question&&k.createElement(A.View,{style:fe.postedInContainer},k.createElement(j.LabelMedium,{style:fe.postedInLabel},K.postStrings.answerQuestion,":"),k.createElement(j.Caption,null,t.question&&t.question.content))),p&&p.length!==0&&k.createElement(A.View,{style:fe.badges},p.map(function(e,t){return k.createElement(A.View,{key:"discussionBadge".concat(t).concat(s),title:e.translatedDescription},k.createElement("img",{className:(0,T.css)(fe.badge),src:(0,q.default)(e.icons.small),alt:e.translatedDescription}))})),S.renderModeratorOrOwnerActionsAsDropdown(a,V.default.actionPickerMobile))});te(G(S),"renderReplyButton",function(){var e=S.props,t=e.displayInputPostKey,n=e.post;var r=n.type==="projecthelp"?K.postStrings.answer:K.postStrings.reply;var o=k.createElement(A.View,{"aria-hidden":"true"},r);var a=n.type==="projecthelp"?"answer":"reply";var i=(0,D.getRespondButtonSrString)(n,a);var s=k.createElement(A.View,{style:N.srOnly},i);return h.default.isLoggedIn?k.createElement("button",{className:(0,T.css)(fe.linkStyledButton),onClick:S.handleReplyInputToggle,"aria-expanded":t===n.key,"aria-controls":(0,D.getAnswerInputId)(n.key)},k.createElement(j.LabelLarge,null,o,s)):k.createElement("button",{className:(0,T.css)(fe.linkStyledButton),onClick:function e(){return S.setState({showSignUpModal:true})}},k.createElement(j.LabelLarge,null,o,s,S.srOnlyToolOpensModal))});te(G(S),"renderCommentButton",function(){var e=S.props,t=e.post,n=e.restrictPosting;var r=S.state.repliesExpanded;var o=t.replyCount&&t.replyCount>0?K.postStrings.getComments(t.replyCount):k.createElement(A.View,{"aria-hidden":"true"},K.postStrings.comment);var a=(0,D.getRespondButtonSrString)(t,"comment");var i=k.createElement(A.View,{style:N.srOnly},a);if(t.replyCount&&t.replyCount>0||h.default.isLoggedIn&&!n){return k.createElement("button",{className:(0,T.css)(fe.linkStyledButton),onClick:function e(){S.handleClickComment()},"aria-expanded":r,"aria-controls":S.getRepliesContainerId()},k.createElement(j.LabelLarge,null,o,i))}else if(!n){return k.createElement("button",{className:(0,T.css)(fe.linkStyledButton),onClick:function e(){return S.setState({showSignUpModal:true})}},k.createElement(j.LabelLarge,null,o,i,S.srOnlyToolOpensModal))}});te(G(S),"renderPostFooter",function(){var e=S.props,t=e.post,n=e.restrictPosting,r=e.isMaximized,o=e.profile;var a=t.type==="reply";var i=t.type==="question";var s=t.type==="projecthelp";var l=t.type==="projecteval";var c=t.type==="projectevalanswer";var u=n||S.isCompactView();var p=k.createElement(A.View,{style:fe.postFooterPrimary},(i||s)&&!u&&k.createElement(k.Fragment,null,S.renderReplyButton(),k.createElement(j.LabelMedium,{style:fe.separator,"aria-hidden":"true"},"•")),!a&&!l&&!c&&!S.isCompactView()&&S.renderCommentButton(),k.createElement(b.default,null),k.createElement(A.View,{style:V.default.tools},!a&&!l&&!c&&k.createElement(j.LabelXSmall,{style:fe.votesSum},"(",K.postStrings.getVotes(t.sumVotesIncremented),")"),S.renderTools(o)),!r&&S.renderModeratorOrOwnerActions(o,V.default.actionPickerDesktop));var d=k.createElement(A.View,null,r&&S.renderModeratorOrOwnerActions(o,fe.maximizedDesktop));return k.createElement(A.View,{style:fe.postFooter},p,d)});te(G(S),"handleAnswerPostSuccess",function(e,t){S.props.onPostSuccess(e,t);S.hideReplyInputField()});te(G(S),"handleEditingPost",function(e){S.setState({editing:false})});te(G(S),"hideReplyInputField",function(){S.props.onToggleReplyInput(S.props.post.key);S.setState({formattingOptionsExpanded:false})});te(G(S),"maybeRenderExpandCollapseButton",function(e,t,n,r){if(!n||n.length<2||!r){return}var o=n.length-1;var a=e.type==="projecthelp"?K.answersStrings.seeAllAnswers(o):K.answersStrings.seeAllReplies(o);return k.createElement(se,{style:fe.expandCollapseButton,onClick:function e(){if(r.length<n.length){S.expandAnswers(t)}if(r.length===n.length){S.collapseAnswers(t)}}},k.createElement(j.LabelLarge,null,r.length<n.length?a:K.answersStrings.hideReplies(o)))});S.state={ariaVoteMessage:"",ariaFlagMessage:"",repliesExpanded:o.getRepliesExpandedFromProps(e),showSignUpModal:false,editing:false,formattingOptionsExpanded:false,previewExpanded:false,expandedKeys:[],skipped:false,isModalOpen:{clearFlags:false,confirmDeletion:false}};return S}Z(o,[{key:"componentDidMount",value:function e(){var t=this.props,n=t.qaExpandKey,r=t.onShowReplies,o=t.post;var a=o.answers,i=o.replyCount,s=o.replies,l=o.key;var c=this.state.repliesExpanded;if((0,D.shouldAutoExpandAnswers)(o,n)){if(this.state.expandedKeys.length!==a.length){this.expandAnswers(l)}}if(c||(0,D.shouldAutoExpandReplies)(o,n)){if(i&&s.length!==i){r(l)}}this.maybeAutoFocusPost()}},{key:"componentDidUpdate",value:function e(t){var n=o.getRepliesExpandedFromProps(t);var r=o.getRepliesExpandedFromProps(this.props);if(!n&&r){this.setState({repliesExpanded:true})}this.maybeAutoFocusPost(t)}},{key:"renderFlagsTooltipContent",value:function e(){var t=this.props.post;var n=t.flaggedBy,r=t.flaggedByKaid,o=t.flags;var a=n||r||[];var i=a.map(function(e,t){return{kaid:e,flag:o&&o[t]}});return k.createElement(A.View,null,k.createElement("ul",null,i.map(function(e,t){return k.createElement("li",{key:t},k.createElement(A.View,{style:fe.flagsTooltipRow},k.createElement(j.LabelSmall,{style:fe.flagsTooltipKaid},e.kaid,":"),k.createElement(j.LabelSmall,{style:fe.flagsTooltipText},e.flag||K.miscStrings.unknown)))})))}},{key:"renderMinimalFlags",value:function e(t,n,r){var o=this;return k.createElement(A.UniqueIDProvider,{mockOnFirstRender:true,scope:"discussion-list"},function(e){return k.createElement(v.default,{content:o.renderFlagsTooltipContent(),toggleOnHover:t.length>0,offset:12,a11y:{title:{id:e.get("flag-tt")}}},k.createElement(j.LabelXSmall,{style:[r,fe.moderatorFlagged],"aria-labelledby":e.get("flag-tt")},K.postStrings.flagged,n))})}},{key:"renderFlagButton",value:function e(n){var r=this;var t=this.props,o=t.onFlagPost,a=t.post,i=t.tab;var s=a.flaggedByUser?f.default.blue:f.default.offBlack64;var l=[fe.flagText,this.isCompactView()&&de.flagText];var c=a.flags||[];var u=" (".concat(c.length,")");if((0,D.isModeratorProfile)(n)){return this.renderMinimalFlags(c,u,l)}return k.createElement(A.UniqueIDProvider,{mockOnFirstRender:true,scope:"discussion-list"},function(e){return k.createElement(g.default,{modal:function e(t){var n=t.closeModal;return k.createElement(p.default,{post:a,tab:i,onClose:function e(t){if(t){o(a,t);r.setState({ariaFlagMessage:K.postStrings.ariaFlagged})}n()}})},ariaLabel:K.postStrings.flagModal,focusId:e.get("flag")},function(t){return k.createElement(P.default,{id:e.get("flag"),icon:k.createElement(m.default,{size:"small",icon:a.flaggedByUser?le.flagSelected:le.flag,color:s}),style:[fe.toolButton,fe.flagTool],disabled:a.flaggedByUser,onClick:function e(){if(h.default.isLoggedIn){t()}else{r.setState({showSignUpModal:true})}}},k.createElement(A.View,{style:l},a.flaggedByUser?K.postStrings.flagged:K.postStrings.flag,(0,D.isModeratorProfile)(n)&&u,!h.default.isLoggedIn?r.srOnlyToolOpensModal:r.srOnlyFlagModal))})})}},{key:"isCompactView",value:function e(){var t=this.props.viewMode;return t==="compact"}},{key:"shouldShowAuthor",value:function e(){var t=this.props,n=t.post,r=t.moderatorMode;var o=n.type==="projectevalanswer";if(r){return true}return!this.isCompactView()&&!o}},{key:"renderOpenModals",value:function e(){var r=this;var o=this.props.post;var t=this.state.isModalOpen;return k.createElement(k.Fragment,null,k.createElement(l.ModalLauncher,{key:"deletePost",onClose:function e(){return r.closeModal("confirmDeletion")},opened:t.confirmDeletion,modal:function e(t){var n=t.closeModal;return k.createElement(y.default,{handleClose:n,handleSubmit:function e(){r.handleDelete();n()}})}}),k.createElement(l.ModalLauncher,{key:"clearFlags",onClose:function e(){return r.closeModal("clearFlags")},opened:t.clearFlags,modal:function e(t){var n=t.closeModal;return k.createElement(c.default,{flaggedBy:o.flaggedBy||o.flaggedByKaid||[],flags:o.flags||[],postKey:o.key,onCancel:n,onClearAllFlags:r.handleClearAllFlags})}}))}},{key:"renderDeleteAction",value:function e(t,n){var r=this;var o=(0,D.isModeratorProfile)(t)?this.handleDelete:function(){return r.openModal("confirmDeletion")};return k.createElement(n,{key:"delete",label:K.postStrings.delete,onClick:o})}},{key:"getModeratorOrOwnerActions",value:function e(t,n){var r=this;var o=this.props,a=o.moderatorMode,i=o.isProjectFeedback;if(!t){return[]}var s=this.props,l=s.post,c=s.tab,u=s.onUndeletePost,p=s.onModifyNotifications,d=s.contentKind,f=s.onStartAcceptingClarification;var m=(0,O.getKaid)(t)===l.authorKaid;var g=l.type==="reply";var v=l.type==="scratchpad";var y=l.type==="projecteval";var h=l.type==="projectevalanswer";if(!(0,D.isModeratorProfile)(t)&&!m){return[]}var b=[];var w=(0,D.getPostContext)({profile:t,post:l,moderatorMode:!!a});if((0,D.isModeratorProfile)(t)&&!g&&!v&&!h&&!y){if(c==="comments"||c==="clarifications"){b.push(k.createElement(n,{key:"changeToQuestion",onClick:this.handleChangeToQuestion,label:K.postStrings.changeToQuestion}))}if(c==="questions"||c==="clarifications"){b.push(k.createElement(n,{key:"changeToTipsAndThanks",onClick:this.handleChangeToTipsAndThanks,label:K.postStrings.changeToTipsAndThanks}))}if(!i&&(c==="questions"||c==="comments")){b.push(k.createElement(n,{key:"changeToMistakes",onClick:this.handleChangeToMistakes,label:K.postStrings.changeToMistakes}))}}var P=l.notifyOnAnswer?K.postStrings.turnNotificationsOff:K.postStrings.turnNotificationsOn;if(l.type==="question"&&(m||(0,D.isModeratorProfile)(t))&&!l.isOld){b.push(k.createElement(n,{key:"notification",label:P,onClick:function e(){return p(l.key,!l.notifyOnAnswer)}}))}if(!v&&!y&&!h){b.push(k.createElement(n,{key:"edit",label:K.postStrings.edit,onClick:function e(){return r.setState({editing:true})}}))}if(!l.deleted){b.push(this.renderDeleteAction(t,n))}if((0,D.isModeratorProfile)(t)&&l.deleted){b.push(k.createElement(n,{key:"undelete",label:K.postStrings.undelete,onClick:function e(){return u(l)}}))}if(D.capabilities.clearFlags(w)){b.push(k.createElement(n,{key:"clearFlags2",label:K.postStrings.clearFlags,onClick:function e(){return r.openModal("clearFlags")}}))}if(D.capabilities.approve(w)){b.push(k.createElement(n,{key:"approve",label:K.postStrings.approve,onClick:this.handleClearAllFlags}))}if(a&&(0,D.isModeratorProfile)(t)){b.push(k.createElement(n,{key:"skip",label:K.postStrings.skip,onClick:this.handleSkip}))}if((0,D.isModeratorProfile)(t)&&c==="clarifications"&&(d==="Video"||d==="video")){b.push(k.createElement(n,{key:"accept_clarification",label:K.postStrings.acceptClarification,onClick:function e(){return f(l.key)}}))}return b}},{key:"renderModeratorOrOwnerActionsAsDropdown",value:function e(t,n){var r=this.getModeratorOrOwnerActions(t,a.ActionItem);return k.createElement(a.ActionMenu,{menuText:"more",alignment:"right",style:n},r)}},{key:"renderModeratorOrOwnerActionsAsFlat",value:function e(t,n){var r=this.getModeratorOrOwnerActions(t,ce);return k.createElement(A.View,{style:[n,fe.expandedActionList]},r.map(function(e,t){return k.createElement(A.View,{key:t},e)}))}},{key:"renderModeratorOrOwnerActions",value:function e(t,n){var r=this.props.isMaximized;return r?this.renderModeratorOrOwnerActionsAsFlat(t,n):this.renderModeratorOrOwnerActionsAsDropdown(t,n)}},{key:"renderTools",value:function e(t){var n=this.props.post;var r=n.type==="projecteval";var o=n.type==="projectevalanswer";var a=!this.isCompactView()&&!r&&!o;return k.createElement(k.Fragment,null,a&&this.renderVoteTools(t),this.showFlagButton(t)&&this.renderFlagButton(t))}},{key:"renderVoteTools",value:function e(t){var n=this;var r=this.props,o=r.post,a=r.restrictPosting;var i=o.type==="reply";var s=null;if(t){if(t.get("kaid")===o.authorKaid){s="noSelfVoting"}else if(t.get("points")<5e3&&!(0,D.isModeratorProfile)(t)){s="atLeast5000"}}var l=!!s;var c=l?f.default.offBlack32:o.upVoted?f.default.green:f.default.offBlack64;var u=l?f.default.offBlack32:o.downVoted?f.default.red:f.default.offBlack64;var p=o.upVoted?K.postStrings.alreadyUpVoted:undefined;var d=o.downVoted?K.postStrings.alreadyDownVoted:undefined;return!i&&!a&&k.createElement(k.Fragment,null,k.createElement(v.default,{content:s&&K.postStrings[s],toggleOnHover:l,offset:12,a11y:{title:{id:"upvote"}}},k.createElement(P.default,{icon:k.createElement(m.default,{"aria-label":p,size:"small",icon:o.upVoted?le.upvoteSelected:le.upvote,color:c}),style:fe.toolButton,onClick:function e(){return n.handleUpvote()},disabled:l,"aria-labelledby":"upvote"},k.createElement(A.View,{style:fe.voteText},K.postStrings.upvote,!h.default.isLoggedIn&&this.srOnlyToolOpensModal,h.default.isLoggedIn&&s&&k.createElement("span",{className:(0,T.css)(N.srOnly)},K.postStrings[s])))),k.createElement(v.default,{content:s&&K.postStrings[s],toggleOnHover:l,offset:12,a11y:{title:{id:"downvote"}}},k.createElement(P.default,{icon:k.createElement(m.default,{"aria-label":d,size:"small",icon:o.downVoted?le.downvoteSelected:le.downvote,color:u}),style:fe.toolButton,onClick:function e(){return n.handleDownvote()},disabled:l,"aria-labelledby":"downvote"},k.createElement(A.View,{style:fe.voteText},K.postStrings.downvote,!h.default.isLoggedIn&&this.srOnlyToolOpensModal,h.default.isLoggedIn&&s&&k.createElement("span",{className:(0,T.css)(N.srOnly)},K.postStrings[s])))),k.createElement(A.View,{style:N.srOnly,role:"status","aria-live":"polite"},k.createElement(A.View,null,this.state.ariaVoteMessage),k.createElement(A.View,null,this.state.ariaFlagMessage)))}},{key:"renderReplies",value:function e(){var n=this;var t=this.props,r=t.post,o=t.tab,a=t.topicSlug,i=t.resetNewPostKeyInfo,s=t.contentId,l=t.contentKind,c=t.restrictPosting;var u=r.replies,p=r.replyCount;var d=this.state.repliesExpanded;if(p===0&&(!h.default.isLoggedIn||c)){return}if(d&&p&&p>0&&u.length===0){return k.createElement(A.View,{style:[fe.replyContainer,fe.loading]},k.createElement(w.default,{size:"xsmall",style:fe.spinner,sentryId:"discussion_replies_load",description:"Loading discussion post replies",sentryTeam:"learning-platform"}),K.postStrings.loading)}var f=[fe.outerRepliesContainer,this.isCompactView()&&de.outerRepliesContainer];return k.createElement(A.View,{style:d?f:[fe.collapsedReplyContainer,fe.displayNone],id:this.getRepliesContainerId()},k.createElement(A.View,{style:fe.innerRepliesContainer},u&&u.map(function(e,t){return k.createElement(A.View,{style:fe.replyContainer,key:e},k.createElement(ye,ne({},n.props,{postKey:e,tab:o,autoFocusPostOnMount:t===0&&d})))})),h.default.isLoggedIn&&!c&&k.createElement(A.View,{style:fe.replyInputContainer},k.createElement(L.default,{autoFocus:d&&!(u&&u.length),isReply:true,tab:o,topicSlug:a,feedbackKey:r.key,resetNewPostKeyInfo:i,onPostSuccess:function e(t,n){},contentKind:l,contentId:s,showAvatar:this.isCompactView()})))}},{key:"expandAnswers",value:function e(t){this.setState({expandedKeys:[].concat(this.state.expandedKeys,[t])})}},{key:"collapseAnswers",value:function e(t){this.setState({expandedKeys:this.state.expandedKeys.filter(function(e){return e!==t})})}},{key:"maybeRenderAnswers",value:function e(t,n){var r=this;var o=this.props,a=o.topicSlug,i=o.newPostKey,s=o.resetNewPostKeyInfo,l=o.tab,c=o.displayInputPostKey,u=o.restrictPosting,p=o.clarificationsEnabled,d=o.viewMode,f=o.post,m=o.moderatorMode,g=o.isMaximized,v=o.contentKind,y=o.profile;var h=c===n;if(l!=="questions"&&l!=="projecthelp"){return null}if((!t||t.length===0)&&u){return null}var b=k.createElement("div",{className:(0,T.css)(fe.answerInputFieldContainer,h&&fe.answerInputFieldContainerExpanded),id:(0,D.getAnswerInputId)(n)},l==="projecthelp"&&((0,O.getKaid)(y)===f.authorKaid?K.userProjectsStrings.authorAnsweringOwnHelpRequest:null),k.createElement(L.default,{isAnswer:true,autoFocus:h,tab:l,clarificationsEnabled:p,onPostSuccess:this.handleAnswerPostSuccess,topicSlug:a,feedbackKey:n,onToggleFormattingOptionsExpanded:function e(t){return r.setState({formattingOptionsExpanded:t})},onTogglePreviewExpanded:function e(t){return r.setState({previewExpanded:t})},showAvatar:!this.isCompactView(),contentKind:v}));if(t&&t.length!==0){var w=this.state.expandedKeys.includes(n)?t:[t[0]];return k.createElement("div",{className:(0,T.css)(fe.answersList,d==="compact"&&de.answersList)},!u&&b,k.createElement("ul",null,w.map(function(n,e){return k.createElement("li",{key:n,className:(0,T.css)(fe.answer)},k.createElement(ye,{tab:l,postKey:n,newPostKey:i,resetNewPostKeyInfo:s,isAnswer:true,getRef:function e(t){return r.nodes[n]=t},topicSlug:a,restrictPosting:u,moderatorMode:m,viewMode:d,isMaximized:g,autoFocusPostOnMount:e===1}))})),this.maybeRenderExpandCollapseButton(f,n,t,w))}else{return k.createElement("div",{className:(0,T.css)(fe.answersList,this.isCompactView()&&de.answersList,!c&&fe.displayNone)},b)}}},{key:"renderDefaultContent",value:function e(){var t=this.props.post;var n=t.content;var r=t.type==="reply";return k.createElement(j.Body,{style:[V.default.content,r&&fe.replyContent]},k.createElement(d.default,{string:n}))}},{key:"renderProjectEval",value:function e(){var t=this.props.post;return k.createElement(u.default,{post:t})}},{key:"renderScratchpadContent",value:function e(){var t=this.props.post;var n=t.relativeUrl,r=n===void 0?"":n,o=t.title,a=o===void 0?"":o;return k.createElement(A.View,null,k.createElement("h2",null,k.createElement("a",{href:r},a)),k.createElement("iframe",{src:(0,q.default)("".concat(r,"/embedded?editor=yes")),className:(0,T.css)(fe.scratchpadFrame),frameBorder:"0",scrolling:"no"}))}},{key:"renderProjectPreview",value:function e(){var t=this.props.post;var n=t.focus;if(!n||!n.relativeUrl){return null}return k.createElement("img",{className:(0,T.css)(fe.projectPreview),src:(0,q.default)("".concat(n.relativeUrl,"/latest.png")),alt:n.translatedTitle})}},{key:"renderContent",value:function e(){var t=this.props.post;var n=t.type;switch(n){case"scratchpad":return this.renderScratchpadContent();case"projectevalanswer":return this.renderProjectEval();case"projecteval":case"projecthelp":return k.createElement(A.View,null,this.renderDefaultContent(),this.renderProjectPreview());default:return this.renderDefaultContent()}}},{key:"render",value:function e(){var r=this;var t=this.props,n=t.post,o=t.isAnswer,a=t.tab,i=t.contentKind,s=t.contentId,l=t.topicSlug,c=t.resetNewPostKeyInfo,u=t.clarificationBeingAcceptedId,p=t.onStopAcceptingClarification;var d=n.key,f=n.authorNickname,m=n.authorAvatarName,g=n.authorAvatarSrc,v=n.authorKaid,y=n.content,h=n.fromVideoAuthor;var b=this.state,w=b.editing,P=b.skipped;var O=d===u;var E=n.type==="reply";if(P){return null}var C=function e(t){var n=S.findDOMNode(t);if(r.props.getRef){r.props.getRef(n)}r.postElement=n};return k.createElement(A.View,{testId:"discussion-post"},this.renderOpenModals(),!w&&!O&&k.createElement(A.View,{style:[V.default.post,E&&fe.horizontalSeparator],tabIndex:-1,ref:C},this.shouldShowAuthor()&&k.createElement(A.View,{style:fe.avatar},k.createElement(I.default,{username:f,avatarName:m,avatarSrc:g,kaid:v,enableProfilePreviewTooltip:true})),k.createElement(A.View,{style:V.default.everythingButTheAvatar},this.renderPostHeader(),k.createElement(A.View,{style:fe.contentContainer},h&&k.createElement(j.LabelSmall,{style:fe.fromTheAuthor},K.postStrings.fromTheAuthor),this.renderContent(),(n.appearsAsDeleted||n.deleted)&&k.createElement(A.View,{style:[fe.contentBackdrop,n.deleted&&fe.deletedPost,n.appearsAsDeleted&&!n.deleted&&fe.hiddenPost]})),this.renderPostFooter(),!E&&this.renderReplies(),this.state.showSignUpModal&&k.createElement(R.default,{initialPurpose:"signup",initialRole:"learner",onClose:function e(){return r.setState({showSignUpModal:false})},continueUrl:window.location.pathname}))),w&&k.createElement(A.View,{style:fe.replyInputContainer},k.createElement(L.default,{editing:w,postKey:n.key,isReply:E,isAnswer:o,tab:a,contentKind:i,contentId:s,topicSlug:l,feedbackKey:n.key,resetNewPostKeyInfo:c,initialPostContent:y,onPostSuccess:function e(t,n){return r.handleEditingPost(t)},onCancel:function e(){return r.setState({editing:false})},showAvatar:!this.isCompactView()}),!E&&k.createElement(A.View,{style:{marginLeft:48}},this.renderReplies())),O&&k.createElement(M.default,{post:n,editingOrAccepting:"accepting",onCancel:p}),!o&&!E&&this.maybeRenderAnswers(n.answers,n.key))}}]);return o}(k.Component);t.DiscussionPost=ue;var pe=f.default.offBlack64;var de=T.StyleSheet.create(ae);var fe=T.StyleSheet.create({postHeader:{flexDirection:"row",justifyContent:"space-between",marginBottom:8},outerRepliesContainer:te({backgroundColor:f.default.offWhite,marginTop:s.default.large,paddingTop:s.default.large,paddingLeft:s.default.large,paddingRight:s.default.large,maxHeight:"none",transition:"all ".concat(C.default.standardTransition)},B.default.xsOrSmaller,ae.outerRepliesContainer),outerRepliesContainerWithAvatar:te({},B.default.xsOrSmaller,{marginLeft:-64}),collapsedReplyContainer:{paddingLeft:s.default.large,paddingRight:s.default.large,maxHeight:0,overflow:"hidden",transition:"all ".concat(C.default.standardTransition),visibility:"hidden"},innerRepliesContainer:{marginBottom:2},replyContainer:{marginBottom:2},replyHeader:{marginBottom:0},replyContent:{paddingTop:s.default.xxxSmall},loading:{flexDirection:"row",paddingTop:0,minHeight:48,alignItems:"center"},spinner:{marginRight:s.default.xSmall},replyInputContainer:{paddingBottom:s.default.large},postedInContainer:{marginTop:s.default.xxxSmall,flexDirection:"row",alignItems:"baseline"},postedInLabel:{color:f.default.offBlack64,marginRight:s.default.xxSmall},postedInFocusLink:{color:f.default.blue},hiddenPostLabel:{color:f.default.gold,marginLeft:8,alignSelf:"center"},deletedPostLabel:{color:f.default.red,marginLeft:8,alignSelf:"center"},badges:{flexDirection:"row"},badge:{width:16,height:16,marginLeft:4},contentContainer:{position:"relative"},contentBackdrop:{width:"100%",height:"100%",borderRadius:4,opacity:.1,position:"absolute",zIndex:-1},hiddenPost:{backgroundColor:f.default.gold},deletedPost:{backgroundColor:f.default.red},postFooter:{flexDirection:"row",flexWrap:"wrap",alignItems:"center",height:40},postFooterPrimary:{flexDirection:"row",alignItems:"center",width:"100%"},linkStyledButton:{color:pe,border:"none",backgroundColor:"transparent",cursor:"pointer",padding:0,margin:0},votesSum:te({color:pe,marginLeft:12},B.default.xsOrSmaller,{display:"none"}),voteText:te({},B.default.xsOrSmaller,{display:"none"}),toolButton:{marginLeft:12},flagTool:te({},B.default.xsOrSmaller,{}),flagText:te({},B.default.xsOrSmaller,ae.flagText),moderatorFlagged:{marginLeft:8},fromTheAuthor:{marginLeft:8},notificationsUnavailableText:{marginLeft:12},horizontalSeparator:{borderBottom:V.default.border,clear:"both",paddingBottom:s.default.small,":last-child":{borderBottom:"none",paddingBottom:0}},separator:{color:V.default.borderColor,paddingLeft:s.default.xxxSmall,paddingRight:s.default.xxxSmall},expandCollapseButton:{marginTop:24,marginBottom:8},answersList:te({marginLeft:68},B.default.xsOrSmaller,ae.answersList),answerInputFieldContainer:{display:"none"},answerInputFieldContainerExpanded:{margin:"20px 0 28px 0",display:"block"},maximizedDesktop:te({},B.default.smOrSmaller,{display:"none"}),displayNone:{display:"none"},answer:{marginTop:24},expandedActionList:{flexDirection:"row"},avatar:{marginRight:24},scratchpadFrame:{width:940,height:440,border:0},flagsTooltipRow:{flexDirection:"row"},flagsTooltipKaid:{color:f.default.blue},flagsTooltipText:{paddingLeft:8},projectPreview:{width:40}});var me={onChangeType:H.changeType,onClearFlags:H.clearFlags,onDeletePost:H.deletePost,onDownvotePost:H.downvotePost,onFlagPost:H.flagPost,onModifyNotifications:H.modifyNotificationsAction,onPostSuccess:H.postSuccessAction,onShowReplies:H.fetchReplies,onToggleReplyInput:H.toggleReplyInputAction,onUndeletePost:H.undeletePost,onUpvotePost:H.upvotePost,resetExpandKey:H.resetExpandKeyAction,onStartAcceptingClarification:H.startAcceptingClarificationAction,onStopAcceptingClarification:H.stopAcceptingClarificationAction};var ge=function e(t,n,r,o){if(r.focus){return{contentKind:r.focus.kind,contentId:r.focus.id}}else if(r.question&&r.question.focus){return{contentKind:r.question.focus.kind,contentId:r.question.focus.id}}else if(r.questionKey){var a=t[r.questionKey];if(a&&a.focus){return{contentKind:a.focus.kind,contentId:a.focus.id}}}else if(o){return{contentKind:o.contentKind,contentId:o.contentId}}return n};var ve=function e(t,n){var r=t.posts[n.postKey];var o=ge(t.posts,{contentKind:t.contentKind,contentId:t.contentId},r,n.contentKind?{contentKind:n.contentKind,contentId:n.contentId}:undefined),a=o.contentKind,i=o.contentId;var s=t.contentKind==="Topic";var l=s&&r.type==="answer";return{post:r,contentId:i,contentKind:a,qaExpandKey:t.qaExpandKey,newPostKey:t.newPostKey,displayInputPostKey:t.displayInputPostKey,clarificationBeingAcceptedId:t.clarificationBeingAcceptedId,showPostedIn:s,showParentQuestion:l}};var ye=(0,o.compose)(E.default,(0,r.connect)(ve,me))(ue);var he=ye;t.default=he}}]);
//# sourceMappingURL=../../sourcemaps/en/ada9f8b8dde28d72eca19b42b1646c57.759c12bd4948f427b056.js.map