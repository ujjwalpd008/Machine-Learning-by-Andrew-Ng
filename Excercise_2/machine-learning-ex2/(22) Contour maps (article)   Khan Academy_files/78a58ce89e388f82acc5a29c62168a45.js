(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["78a58ce89e388f82acc5a29c62168a45"],{VxSq:function(e,r,t){"use strict";t("pNMO");t("ma9I");t("TeQF");t("+2oP");t("3KgV");t("5DmW");t("FZtP");Object.defineProperty(r,"__esModule",{value:true});r.updateArticleProgress=void 0;var n=a(t("lTCR"));var s=o(t("WSEr"));var i=a(t("x+rD"));var u=t("o1mU");var l=a(t("nSHN"));var b=t("skGw");function o(e){if(e&&e.__esModule){return e}else{var r={};if(e!=null){for(var t in e){if(Object.prototype.hasOwnProperty.call(e,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};if(n.get||n.set){Object.defineProperty(r,t,n)}else{r[t]=e[t]}}}}r.default=e;return r}}function a(e){return e&&e.__esModule?e:{default:e}}function d(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};var n=Object.keys(t);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))}n.forEach(function(e){c(r,e,t[e])})}return r}function c(e,r,t){if(r in e){Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true})}else{e[r]=t}return e}function p(){var r=f(["\n    mutation updateUserArticleProgress($input: UserArticleProgressInput!) {\n        updateUserArticleProgress(articleProgressUpdate: $input) {\n            actionResults {\n                badgeCounts {\n                    count\n                    typeLabel\n                }\n                tutorialNodeProgress {\n                    id\n                    progress\n                }\n                notificationsAdded {\n                    avatarParts\n                    badges\n                    continueUrl\n                    readable\n                    toast\n                    urgent\n                }\n                userProfile {\n                    countBrandNewNotifications\n                    countVideosCompleted\n                    points\n                    streakLastLength\n                    streakLastExtended\n                    streakLength\n                }\n            }\n            error {\n                code\n                debugMessage\n            }\n        }\n    }\n"]);p=function e(){return r};return r}function f(e,r){if(!r){r=e.slice(0)}return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}var g=t("P7jp");var v=(0,n.default)(p());var w=Math.random()<.5;var P=function e(r,t,n,o,a){i.default.getGAReferrer().then(function(e){if(w){h(r,t,n,o,a,e)}else{m(r,t,n,o,a,e)}})};r.updateArticleProgress=P;var m=function e(r,t,n,o,a,i){var c={input:d({articleId:t,conversionId:r.toUpperCase(),articleSlug:n},o?{topicSlug:o}:null,{platform:"WEB",occurredAt:new Date,gaReferrer:i},a)};(0,u.apolloMutate)(v,c).then(function(e){var r=e.data.updateUserArticleProgress;if(r.error){O(r.error.code)}else if(r.actionResults){l.default.respondToGraphQLAction(r.actionResults)}else{s.captureMessage("UpdateUserArticleProgress came back with both a null error and no actionResults.")}}).catch(function(e){g.log("Failed to update user article progress",e);s.captureException(e)})};var O=function e(r){g.log("Failed to update user article progress. Error returned from GraphQL mutation",r);s.withScope(function(e){e.setFingerprint(["updateUserArticleProgress",r]);s.captureMessage("Failed to update user article progress. Error returned from GraphQL mutation: ".concat(r))})};var h=function e(r,t,n,o,a,i){var c={};c.conversion_id=r;if(o){c.topic_slug=o}c.article_slug=n;c.platform="web-client";c.occurred_at_seconds=Math.floor(Date.now()/1e3);c.ga_referrer=i;if(a){if(a.scrollInfo){var s=a.scrollInfo,u=s.percentage,l=s.scrolledAmount;c.percentage=u;c.scrolled_amount=l}if(a.widgetInfo){var d=a.widgetInfo,p=d.widgetId,f=d.widgetStatus,g=d.widgetType;c.widget_id=p;c.widget_status=f;c.widget_type=g}}c.casing="camel";var v=(0,b.encodeParams)(c);(0,b.khanFetch)("/api/internal/user/article/".concat(t,"/log?").concat(v),{method:"POST",headers:{"Content-Type":"application/json"}})}}}]);
//# sourceMappingURL=../../sourcemaps/en/78a58ce89e388f82acc5a29c62168a45.caf0fd6fb233c3f995e1.js.map