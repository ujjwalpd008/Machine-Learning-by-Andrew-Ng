(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["b5e4eb20f666c9633e4670bfbbd78e62"],{"0bMH":function(e,r,t){"use strict";t("pNMO");t("4Brf");t("ma9I");t("TeQF");t("2B1R");t("5DmW");t("FZtP");Object.defineProperty(r,"__esModule",{value:true});r.transformUserTask=r.transformUserExercise=void 0;function s(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};var n=Object.keys(t);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))}n.forEach(function(e){a(r,e,t[e])})}return r}function a(e,r,t){if(r in e){Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true})}else{e[r]=t}return e}var i=function e(r){return{clearStrugglingIndicators:r.clearStrugglingIndicators,exercise:r.exerciseName,exerciseModel:r.exercise,exerciseProgress:r.exerciseProgress,exerciseStates:{mastered:r.exerciseProgress.mastered,practiced:r.exerciseProgress.practiced,struggling:r.isStruggling},fpmMasteryLevel:r.fpmMasteryLevel,isSkillCheck:r.isSkillCheck,lastAttemptNumber:r.lastAttemptNumber,lastCountHints:r.lastCountHints,lastDone:r.lastDone,lastMasteryUpdate:r.lastMasteryUpdate,longestStreak:r.longestStreak,mastered:r.exerciseProgress.mastered,masteryPoints:r.masteryPoints,maximumExerciseProgress:r.maximumExerciseProgress,maximumExerciseProgressDt:r.maximumExerciseProgressDate,practiced:r.exerciseProgress.practiced,practicedDate:r.practicedDate,proficientDate:r.proficientDate,secondsPerFastProblem:r.secondsPerFastProblem,snoozeTime:r.snoozeTime,streak:r.streak,totalCorrect:r.totalCorrect,totalDone:r.totalDone}};r.transformUserExercise=i;var n=function e(r){var t=r.task;var n={cards:r.cards,description:t?t.description:null,includeSkipButton:r.includeSkipButton,taskJson:t,title:t?t.title:null,translatedDescription:t?t.translatedDescription:null,translatedTitle:t?t.translatedTitle:null,userExercises:r.userExercises.map(i)};if(r.__typename==="PracticeUserTask"){return s({},n,{includeOptOutButton:r.includeOptOutButton,includeWorkedExampleButton:r.includeWorkedExampleButton,practiceExercise:r.practiceExercise?i(r.practiceExercise):null,readOnly:r.readOnly})}return n};r.transformUserTask=n},Borw:function(e,r,t){"use strict";t("TeQF");t("+2oP");t("Rm1S");var u=t("nA/X");var i18n=t("HEOz");function i(e){var r=0;for(var t=e.length-1;t>=0;t--){if(!e[t].correct){break}r+=1}return r}function n(e){var r=0;for(var t=0;t<e.length;t++){if(!e[t].correct){break}r+=1}return r}var o=i18n._("Awesome!");var s=/^num_problems_(\d+)$/;var a=/^num_correct_in_a_row_(\d+)$/;var c=/^first_x_or_num_correct_in_a_row_(\d+)_(\d+)$/;var l=/^x_of_the_last_y:(\d+):(\d+)$/;function f(e){var r;r=e.match(s);if(r){return{type:"num_problems",numRequired:+r[1]}}r=e.match(a);if(r){return{type:"num_correct_in_a_row",numRequired:+r[1]}}r=e.match(c);if(r){return{type:"first_x_or_num_correct_in_a_row",numRequired:+r[2],first:+r[1]}}r=e.match(l);if(r){return{type:"x_of_the_last_y",numRequired:+r[2],correct:+r[1]}}throw new Error("Error parsing completion criteria: ".concat(e))}function d(e,r){switch(e.type){case"num_problems":return r.taskProgress.attemptHistory.length>=e.numRequired;case"num_correct_in_a_row":return i(r.taskProgress.attemptHistory)>=e.numRequired;case"first_x_or_num_correct_in_a_row":return n(r.taskProgress.attemptHistory)>=e.first||i(r.taskProgress.attemptHistory)>=e.numRequired;case"x_of_the_last_y":return r.taskProgress.attemptHistory.slice(-e.numRequired).filter(function(e){return e.correct}).length>=e.correct;default:throw new Error("Error checking if criterion is satisfied; "+"unknown type ".concat(e.type))}}function m(e,r,t){if(!r){r=t?.5:.7}return Math.ceil(e*r)}function p(e,r){if(!d(e,r)){return false}switch(e.type){case"num_problems":{var t=r.taskInfo.promotionCriteria;if(r.taskInfo.taskType==="practice"){var n=r.taskInfo.exerciseDescriptors[r.taskProgress.exerciseDescriptorIndex];var s=r.taskProgress.progressByExercise[n].currentFpmLevel;var a=r.taskInfo.infoByExercise[n].initialFpmLevel;if(s&&a){return(0,u.getLevelIndex)(s)>(0,u.getLevelIndex)(a)}}if(t&&t.name==="percent_correct"){var i=r.taskProgress.attemptHistory.filter(function(e){return e.correct}).length;var o=m(e.numRequired,t.value/100);return i>=o}return d(e,r)}case"num_correct_in_a_row":return true;case"first_x_or_num_correct_in_a_row":return true;case"x_of_the_last_y":return true;default:throw new Error("Error checking if promotion is satisfied; "+"unknown type ".concat(e.type))}}function v(e,r){switch(e.type){case"num_problems":{var t=e.numRequired-r.length;if(r.length===0){return i18n.ngettext("Do %(num)s problem","Do all %(num)s problems",e.numRequired)}else if(t<=0){return i18n._("All done!")}else{return i18n.ngettext("Do %(num)s more problem","Do %(num)s more problems",t)}}case"num_correct_in_a_row":return i18n.ngettext("Get %(num)s questions correct in a row","Get %(num)s questions correct in a row",e.numRequired);case"first_x_or_num_correct_in_a_row":{var n=e.first>=e.numRequired;var s=i(r)<r.length;if(n||s){return i18n.ngettext("Get %(num)s questions correct in a row","Get %(num)s questions correct in a row",e.numRequired)}var a=e.first-r.length;if(a>0){if(r.length>0){return i18n.ngettext("See if you can get the next question, as well!","See if you can get the next %(num)s questions!",a)}else{return i18n.ngettext("See if you can get the first question!","See if you can get the next %(num)s questions!",a)}}else{return o}}case"x_of_the_last_y":return i18n._("Get %(x)s out of %(y)s correct",{x:e.correct,y:e.numRequired});default:throw new Error("Error formatting criterion; unknown type ".concat(e.type))}}e.exports={parse:f,isSatisfied:d,getNumRequiredForPromotion:m,isPromoted:p,format:v}},VwlT:function(e,r,t){"use strict";t("pNMO");t("4Brf");t("ma9I");t("TeQF");t("fbCW");t("yq1k");t("4mDm");t("+2oP");t("3KgV");t("5DmW");t("07d7");t("5s+n");t("JTJg");t("hByQ");t("FZtP");t("3bBZ");t("vxnP");var i=a(t("WSEr"));var n=s(t("lTCR"));var f=s(t("x+rD"));var o=s(t("nSHN"));var d=a(t("o1mU"));var u=s(t("/eLw"));var h=t("sbZd");var P=t("0bMH");var m=t("xoFN");function s(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule){return e}else{var r={};if(e!=null){for(var t in e){if(Object.prototype.hasOwnProperty.call(e,t)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};if(n.get||n.set){Object.defineProperty(r,t,n)}else{r[t]=e[t]}}}}r.default=e;return r}}function c(){var r=I(["\n    mutation attemptProblem($input: AttemptProblemInput!) {\n        attemptProblem(attempt: $input) {\n            result {\n                userExercise {\n                    ...userExerciseFields\n                }\n                newTask {\n                    cards {\n                        done\n                        cardType\n                        ... on ProblemCard {\n                            exerciseName\n                            problemType\n                        }\n                    }\n                    includeSkipButton\n                    task {\n                        description\n                        id\n                        key\n                        languageTag\n                        pointBounty\n                        pointsEarned\n                        taskType\n                        title\n                        translatedDescription\n                        translatedTitle\n                        avatarPartsAwarded {\n                            id\n                            name\n                            partType\n                            thumbnailSrc\n                            translatedDisplayName\n                            translatedRequirements\n                        }\n                        badgesAwarded {\n                            iconSrc\n                            translatedDescription\n                            translatedExtendedDescription\n                        }\n                        completionCriteria {\n                            name\n                        }\n                        ... on PracticeTask {\n                            promotionCriteria {\n                                name\n                                value\n                            }\n                            reservedItems\n                            reservedItemsCompleted\n                            taskAttemptHistory {\n                                correct\n                                timeDone\n                                seenHint\n                                itemId\n                            }\n                        }\n                    }\n                    userExercises {\n                        ...userExerciseFields\n                    }\n                }\n                actionResults {\n                    attemptCorrect\n                    notificationsAdded {\n                        avatarParts\n                        badges\n                        readable\n                        toast\n                        urgent\n                        continueUrl\n                    }\n                    pointsEarned {\n                        points\n                    }\n                }\n                attemptPromotions {\n                    missionsPromotions {\n                        level\n                        exerciseIds\n                    }\n                    fpmPromotions {\n                        progressKey\n                        level\n                    }\n                }\n                updatedRecommendations {\n                    contentId\n                    kind\n                    sourceId\n                }\n                error {\n                    code\n                    debugMessage\n                }\n            }\n        }\n    }\n\n    ","\n"]);c=function e(){return r};return r}function l(e,r){return g(e)||v(e,r)||p()}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function v(e,r){var t=[];var n=true;var s=false;var a=undefined;try{for(var i=e[Symbol.iterator](),o;!(n=(o=i.next()).done);n=true){t.push(o.value);if(r&&t.length===r)break}}catch(e){s=true;a=e}finally{try{if(!n&&i["return"]!=null)i["return"]()}finally{if(s)throw a}}return t}function g(e){if(Array.isArray(e))return e}function E(){var r=I(["\n    query getAssessmentItem($input: AssessmentItemInput!) {\n        assessmentItem(input: $input) {\n            item {\n                id: contentId\n                sha\n                problemType\n                itemData\n            }\n            error {\n                code\n                debugMessage\n            }\n        }\n    }\n"]);E=function e(){return r};return r}function k(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};var n=Object.keys(t);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))}n.forEach(function(e){y(r,e,t[e])})}return r}function y(e,r,t){if(r in e){Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true})}else{e[r]=t}return e}function b(){var r=I(["\n    mutation getOrCreatePracticeTask($input: GetOrCreatePracticeTaskInput!) {\n        getOrCreatePracticeTask(input: $input) {\n            result {\n                error {\n                    code\n                    debugMessage\n                }\n                userTask {\n                    cards {\n                        done\n                        cardType\n                        ... on ProblemCard {\n                            exerciseName\n                            problemType\n                        }\n                    }\n                    includeSkipButton\n                    includeOptOutButton\n                    includeWorkedExampleButton\n                    practiceExercise {\n                        ...userExerciseFields\n                    }\n                    readOnly\n                    task {\n                        contentKey\n                        directLink\n                        description\n                        exerciseLength\n                        id\n                        key\n                        languageTag\n                        pointBounty\n                        pointsEarned\n                        slug\n                        taskType\n                        title\n                        timeEstimate {\n                            lowerBound\n                            upperBound\n                        }\n                        translatedDescription\n                        translatedTitle\n                        avatarPartsAwarded {\n                            id\n                            name\n                            partType\n                            thumbnailSrc\n                            translatedDisplayName\n                            translatedRequirements\n                        }\n                        badgesAwarded {\n                            iconSrc\n                            translatedDescription\n                            translatedExtendedDescription\n                        }\n                        completionCriteria {\n                            name\n                        }\n                        promotionCriteria {\n                            name\n                            value\n                        }\n                        reservedItems\n                        reservedItemsCompleted\n                        taskAttemptHistory {\n                            correct\n                            timeDone\n                            seenHint\n                            itemId\n                        }\n                    }\n                    userExercises {\n                        ...userExerciseFields\n                    }\n                }\n            }\n        }\n    }\n\n    ","\n"]);b=function e(){return r};return r}function x(){var r=I(["\n    fragment userExerciseFields on UserExercise {\n        clearStrugglingIndicators\n        exercise {\n            id\n            assessmentItemCount: numAssessmentItems\n            displayName\n            isQuiz\n            name\n            nodeSlug\n            progressKey\n            translatedDisplayName\n            relatedContent {\n                id\n                contentKind\n                kind\n                thumbnailUrl\n                translatedTitle\n\n                ... on Article {\n                    kaUrl\n                    nodeSlug\n                    relativeUrl\n                    slug\n                }\n\n                ... on Video {\n                    duration\n                    imageUrl\n                    kaUrl\n                    nodeSlug\n                    relativeUrl\n                    slug\n                    translatedYoutubeId\n                }\n            }\n            relatedVideos {\n                contentKind\n                duration\n                id\n                imageUrl\n                kaUrl\n                kind\n                nodeSlug\n                relativeUrl\n                slug\n                thumbnailUrl\n                translatedTitle\n                translatedYoutubeId\n            }\n            problemTypes {\n                items {\n                    id\n                    live\n                    sha\n                }\n                name\n                relatedVideos\n            }\n            translatedProblemTypes {\n                items {\n                    id\n                    live\n                    sha\n                }\n                name\n                relatedVideos\n            }\n        }\n        exerciseName\n        exerciseProgress {\n            level\n            mastered\n            practiced\n        }\n        fpmMasteryLevel\n        isSkillCheck\n        isStruggling\n        lastAttemptNumber\n        lastCountHints\n        lastDone\n        lastMasteryUpdate\n        longestStreak\n        masteryPoints\n        maximumExerciseProgress {\n            level\n            mastered\n            practiced\n        }\n        maximumExerciseProgressDate\n        practicedDate\n        proficientDate\n        secondsPerFastProblem\n        snoozeTime\n        streak\n        totalCorrect\n        totalDone\n    }\n"]);x=function e(){return r};return r}function I(e,r){if(!r){r=e.slice(0)}return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}var w=1e3;var T=3e4;var D=(0,n.default)(x());var O=(0,n.default)(b(),D);function A(t,n){return new Promise(function(e,r){setTimeout(function(){return r(new Error("timeout"))},n);t.then(e).catch(r)})}function C(r,t,n){return function(e){e({type:"LOADED_EXERCISE",taskData:r,assessmentItem:t,offlineHintsCount:n||0});e({type:"REFRESH_LIVE_UPDATES"})}}function S(r){return function(e){e({type:"UPDATE_TASK",taskData:r})}}function R(s,a){var i=a&&(0,m.getOfflineHintsCount)(a.id);return function(e,r){e(C(s,a,i));if(i!=null&&i>0&&a){var t=r();var n=Q(t);Z(t,n).then(function(){return(0,m.clearOfflineHintsCount)(a.id)})}}}var N=function e(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=(0,u.default)(window.location.search),s=n.assignment;var a=k({},s?{assignmentKey:s}:null,{exerciseName:r,stopCardPersist:t,canReserveItems:true});return(0,d.apolloMutate)(O,{input:a}).then(function(e){var r=e.data.getOrCreatePracticeTask.result,t=r.error,n=r.userTask;if(t){q("getOrCreatePracticeTask",t);return null}if(!n){var s={code:"GRAPHQL_ERROR",debugMessage:"No data was returned from GraphQL."};q("getOrCreatePracticeTask",s);return null}return(0,P.transformUserTask)(n)})};var M=(0,n.default)(E());var H=function e(r,t){var i="You indicated in settings that you want "+'to "hide visually-dependent content", but all of the problems '+"in this exercise depend on visuals. If you want to complete "+"it, please go to the settings page and de-select that option.";var o=JSON.stringify(r);return(0,d.default)(M,{input:r},"cache-first",t?"multithreaded":undefined).then(function(e){if(e.errors){var r=JSON.stringify(e.errors);var t="GraphQL errors fetching item: ".concat(r);return Promise.reject({code:"GRAPHQL_ERROR",debugMessage:t,inputJson:o})}else if(e.data&&e.data.assessmentItem){var n=e.data.assessmentItem,s=n.item,a=n.error;if(a){if(a.code==="NO_ACCESSIBLE_ITEMS"){alert(i)}return Promise.reject(k({},a,{inputJson:o}))}return Promise.resolve(s)}else{return Promise.reject({code:"GRAPHQL_ERROR",debugMessage:"No data in GraphQL response.",inputJson:o})}})};var L=function e(n){var s=null;var a=null;return function(e,r){var t=JSON.stringify(e);if(s===t&&a!=null){return Promise.resolve(a)}else{s=t;a=n(e,r);return a}}};var B=L(H);var U=function e(r,t,n){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var a=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;var i={exerciseId:r,problemNumber:t,quizProblemNumber:n,lastSeenProblemSha:s};return B(i,a)};var V=function e(r,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var s={exerciseId:r,itemId:t};return B(s,n)};function F(e){if(e.taskProgress&&e.taskProgress.taskComplete){return Promise.resolve(null)}var r=(0,h.getNextProblemData)(e),t=r.exerciseId,n=r.problemNumber,s=r.quizProblemNumber;if(e.taskInfo&&e.taskInfo.taskReservedItems){var a=(0,h.getNextReservedItem)(e);if(!(typeof a.itemId==="string")||!(typeof a.exerciseId==="string")){return Promise.resolve(null)}return V(a.exerciseId,a.itemId,true)}return U(t,n,s,e.taskProgress&&e.taskProgress.assessmentItemMetadata.sha,true)}function K(e){if(e.cards.length===0||!e.userExercises||e.userExercises.length===0){return Promise.resolve(null)}var r=e.cards[0].exerciseName;var t=e.userExercises.find(function(e){return e.exercise===r});if(!t){return Promise.resolve(null)}var n=t.exerciseModel;var s=t.totalDone+1;if(e.taskJson&&e.taskJson.reservedItems&&e.taskJson.reservedItems.length>0&&e.taskJson.reservedItemsCompleted){var a=(0,h.getIncompleteReservedItems)(e.taskJson.reservedItems,e.taskJson.reservedItemsCompleted);if(a.length>0){var i=a[0],o=i.exerciseId,u=i.itemId;return V(o,u)}}var c=n.id;if(n.isQuiz){var l=e.taskJson&&e.taskJson.taskAttemptHistory||[];var f=l.length;var d=n.assessmentItemCount;var m=f%d;return U(c,s,m)}else{return U(c,s)}}function J(r,e){return function(s,a){N(r,e).then(function(r){if(!r){throw new Error("Unable to load exercise data")}return K(r).then(function(e){return[r,e]},function(e){return W(s,a,e)})}).then(function(e){var r=l(e,2),t=r[0],n=r[1];s(R(t,n));F(a())}).catch(function(e){console.error("Couldn't load exercise info for exercise "+"".concat(r,":"),e)})}}function j(e){return e.taskJson&&e.taskJson.key||""}function G(n){return function(r,t){K(n).then(function(e){r(R(n,e));F(t())},function(e){return W(r,t,e,j(n))}).catch(function(e){var r=j(n);console.error("Couldn't load assessment item for task ".concat(r,":"),e)})}}var q=function e(r,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var s=t.code,a=t.debugMessage;i.withScope(function(e){e.setExtras(k({},n,{debugMessage:a}));e.setFingerprint([r,s]);i.captureMessage("".concat(r," failed: ").concat(s))})};var W=function e(r,t,n,s){var a=t(),i=a.taskInfo;var o=n.inputJson;var u={inputJson:o,taskKey:s||i&&i.taskKey};q("getAssessmentItem",n,u);r(ne("item-not-found"));return Promise.reject(k({},n,u))};function X(e,r,t,n,s,a,i,o,u){if(!a.taskProgress||!a.problemProgress||!a.taskInfo){return null}var c=a.taskProgress.assessmentItemMetadata;var l=a.problemProgress,f=l.numberOfAttempts,d=l.hintsVisible;var m=a.taskInfo,p=m.taskContentKey,v=m.taskKey,g=m.taskGenerationTime,E=m.userMissionId;var y=(0,h.getCurrentExerciseData)(a),b=y.id;var P=a.environmentState.topicId;var k={problemNumber:e,assessmentItemSha:c.sha,assessmentItemId:c.id,completed:r||t,exerciseId:b,topicId:P,problemType:c.problemType,countHints:d,timeTaken:n,attemptNumber:f+1,attemptContent:s,attemptState:u||"",taskContentKey:p,taskKey:v,taskGenerationTime:g,userMissionId:E||"",skipped:t,clientDt:(new Date).toJSON(),localTimezoneOffsetSeconds:-1*(new Date).getTimezoneOffset()*60,context:o,gaReferrer:i};return{input:k}}function z(e,r){if(!e.correct){return true}if(r.taskProgress&&!r.taskProgress.completionCriteriaSatisfied){return true}return false}function Q(e){if(!e.problemProgress){return null}var r=e.problemProgress.lastAttemptOrHintTime;if(!r){return null}var t=Date.now()-r;return Math.round(t/1e3)}var Y=(0,n.default)(c(),D);function $(t,n,s,a,i,o){var e=(0,h.getCurrentExerciseData)(a),r=e.totalDone;if(!a.taskProgress){return Promise.reject("No taskProgress in state!")}var u=a.taskProgress.assessmentItemMetadata;var c=(0,h.getCurrentReservedItem)(a);var l=c.itemId?null:r+1;return f.default.getGAReferrer().then(function(e){var r=X(l,t.correct,n,s,JSON.stringify(t.guess),a,e,i,JSON.stringify(t.state));return(0,d.apolloMutate)(Y,r,o?"multithreaded":undefined).then(function(e){(0,m.clearOfflineHintsCount)(u.id);return e})})}function Z(t,n){var e=(0,h.getCurrentExerciseData)(t);var r=e.totalDone;if(!t.taskProgress||!t.problemProgress){return Promise.reject("No taskProgress or problemProgress in state!")}var s=t.problemProgress.hintsVisible;var a=t.taskProgress.assessmentItemMetadata;var i=(0,h.getCurrentReservedItem)(t);var o=i.itemId?null:r+1;return f.default.getGAReferrer().then(function(e){var r=X(o,false,false,n,"hint",t,e);return(0,d.apolloMutate)(Y,r,"multithreaded").catch(function(e){(0,m.trackHintsOffline)(a.id,s);throw e})})}function ee(r,t){return function(e){e({type:"CHECK_ANSWER",score:r,skipped:t});e({type:"REFRESH_LIVE_UPDATES"})}}function re(){return{type:"CHECK_ANSWER_TIMEOUT"}}function te(e){return{type:"ADD_ATTEMPT_PROMISE",promise:e}}function ne(e){return{type:"REPORT_ERROR",errorMessage:e}}function se(){return{type:"RELOAD_EXERCISE"}}function ae(e,r){if(!e.actionResults){return}var t=e.newTask;var n=e.actionResults.pointsEarned;var s=o.default.fromGraphQL(e.actionResults);var a=s.notificationsAdded;if(n){r(be(n.points))}if(t){r(S((0,P.transformUserTask)(t)))}if(a){a.badges.forEach(function(e){if(e.class_.includes("BadgeNotification")){r(ye(e))}});a.avatarParts.forEach(function(e){if(e.class_.includes("AvatarPartNotification")){r(Ee(e))}});a.toast.forEach(function(e){if(e.class_.includes("AssignmentCompletedNotification")){r(Ce(e))}})}o.default.respondToAction(s)}var ie=function e(r){return r.reduce(function(e,r){var t=r.level,n=r.exerciseIds;return k({},e,y({},t,(e[t]||[]).concat(n)))},{})};var oe=function e(r){return r.reduce(function(e,r){var t=r.progressKey,n=r.level;return k({},e,y({},t,n))},{})};var ue=function e(y,b){return function(e){if(!e||e.errors){var r=e&&e.errors&&JSON.stringify(e.errors)||"no response";var t={code:"GRAPHQL_ERROR",debugMessage:r};q("attemptProblem",t);y(ne("fatal"));return}var n=e.data.attemptProblem.result;if(n.error){var s=n.error;var a=s.code;var i=b();var o=i.problemProgress,u=i.taskProgress,c=i.taskInfo;var l=(0,h.getCurrentExerciseData)(i),f=l.id,d=l.totalDone;var m={exerciseId:f,totalDone:d,itemId:u&&u.assessmentItemMetadata.id,hintsVisible:o&&o.hintsVisible,taskKey:c&&c.taskKey};q("attemptProblem",s,m);switch(a){case"CLIENT_AHEAD":y(ne("client-ahead"));break;case"CLIENT_BEHIND":y(ne("client-behind"));break;case"ITEM_NOT_RESERVED":y(ne("item-not-reserved"));break;default:y(ne("fatal"))}return Promise.reject(k({},s,m))}else{if(n.userExercise){var p=(0,P.transformUserExercise)(n.userExercise);y(Ie(p))}ae(n,y);if(n.attemptPromotions){var v=n.attemptPromotions,g=v.missionsPromotions,E=v.fpmPromotions;y(we(ie(g)));y(Te(oe(E)))}if(n.updatedRecommendations){y(De(n.updatedRecommendations))}}}};function ce(m,p,v){return function(r,e){if(!m.empty||p){var t=e();if(!t.problemProgress||!t.taskProgress){return null}var n=t.taskProgress,s=t.problemProgress;var a=JSON.stringify(m.guess);var i=s.lastAttemptOrHintTime,o=s.lastGuess;var u=i?Date.now()-i:0;if(p||a!==o||u>w){var c=Q(t);var l=n.attemptPromises;var f=l[l.length-1]||Promise.resolve();var d=f.then(function(){return A($(m,p,c,t,v,z(m,e())),T).then(ue(r,e)).catch(function(e){if(e.message==="timeout"){r(ne("timeout"))}console.error("Error sending problem attempt:",e)})});r(te(d))}}r(ee(m,p));setTimeout(function(){r(re())},1e3)}}function le(){return{type:"MOVING_TO_NEXT_PROBLEM"}}function fe(){return{type:"SHOW_RELATED_CONTENTS"}}function de(r){return function(e){e({type:"GOTO_NEXT_PROBLEM",assessmentItem:r});e({type:"REFRESH_LIVE_UPDATES"})}}function me(){return function(r,t){r(le());var e=t();var n=e.taskProgress&&e.taskProgress.assessmentItemMetadata.id;if(e.taskProgress&&e.taskProgress.completionCriteriaSatisfied){Promise.all(e.taskProgress.attemptPromises).then(function(){r(de(null))});return}return F(e).then(function(e){r(de(e));if(n){(0,m.clearOfflineHintsCount)(n)}F(t())},function(e){return W(r,t,e)})}}function pe(){return{type:"SHOW_HINT"}}function ve(){return function(r,e){var t=e();if(t.problemProgress&&t.taskProgress&&!t.problemProgress.problemComplete){var n=t.taskProgress;var s=Q(t);var a=n.attemptPromises;var i=a[a.length-1]||Promise.resolve();var o=i.then(function(){return A(Z(t,s),T)}).then(ue(r,e)).catch(function(e){if(e.message==="timeout"){r(ne("timeout"))}console.error("Error sending hint attempt:",e)});r(te(o))}r(pe())}}function ge(){return function(e,n){var r=function e(){var r=n(),t=r.problemProgress;if(!t){return false}return t.hintsVisible<t.totalHints};while(r()){e(ve())}}}function Ee(e){return{type:"ADD_AVATAR_PART",avatarPart:e}}function ye(e){return{type:"ADD_BADGE",badge:e}}function be(e){return{type:"ADD_POINTS",points:e}}function Pe(e){return{type:"ANSWERABLE_CHANGED",answerable:e}}function ke(){return{type:"INTERACTED"}}function he(e){return{type:"KEYPAD_LAYOUT_CHANGED",height:e}}function xe(){return{type:"MOVING_TO_NEXT_TASK"}}function Ie(e){return{type:"UPDATE_USER_EXERCISE",userExercise:e}}function _e(e){return{type:"SET_DRAWING_AREA_AVAILABILITY",available:e}}function we(e){return{type:"ON_PROMOTIONS",promotions:e}}function Te(e){return{type:"ON_FPM_PROMOTIONS",promotions:e}}function De(e){return{type:"ON_UPDATE_RECOMMENDATIONS",recommendations:e}}function Oe(){return{type:"HIDE_FEEDBACK_POPOVER"}}function Ae(){return{type:"RESET_IS_LOADED"}}function Ce(e){return{type:"ADD_ASSIGNMENT_COMPLETED_CONTEXT",context:e}}e.exports={loadFromExerciseName:J,loadFromTaskData:G,fetchTaskData:N,checkAnswerAndMaybeSendProblemLog:ce,gotoNextProblem:me,showRelatedContents:fe,showHintAndSentHintLog:ve,showAllHintsAndSendHintLogs:ge,addAvatarPart:Ee,addBadge:ye,addPoints:be,answerableChanged:Pe,interacted:ke,keypadLayoutChanged:he,gotoNextTask:xe,setDrawingAreaAvailability:_e,hideFeedbackPopover:Oe,resetIsLoaded:Ae,reloadExercise:se,handleAttemptResponse:ue,handleActionResults:ae,GET_OR_CREATE_PRACTICE_TASK_MUTATION:O}},sbZd:function(e,r,t){"use strict";t("pNMO");t("4Brf");t("ma9I");t("TeQF");t("fbCW");t("yq1k");t("4mDm");t("2B1R");t("+2oP");t("T63A");t("5DmW");t("07d7");t("JTJg");t("UxlC");t("EnZy");t("FZtP");t("3bBZ");var n=t("ANjH");var s=i(t("TdMD"));var a=t("0zMT");var K=i(t("Borw"));var x=t("nA/X");function i(e){return e&&e.__esModule?e:{default:e}}function o(e,r){return l(e)||c(e,r)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function c(e,r){var t=[];var n=true;var s=false;var a=undefined;try{for(var i=e[Symbol.iterator](),o;!(n=(o=i.next()).done);n=true){t.push(o.value);if(r&&t.length===r)break}}catch(e){s=true;a=e}finally{try{if(!n&&i["return"]!=null)i["return"]()}finally{if(s)throw a}}return t}function l(e){if(Array.isArray(e))return e}function J(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};var n=Object.keys(t);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))}n.forEach(function(e){j(r,e,t[e])})}return r}function j(e,r,t){if(r in e){Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true})}else{e[r]=t}return e}var f=(0,a.createCompose)({reduxDevtoolsOptions:{name:"Exercises"}});var i18n=t("HEOz");var G=function e(r){return{calculator:!!r.answerArea.calculator,chi2Table:!!r.answerArea.chi2Table,periodicTable:!!r.answerArea.periodicTable,tTable:!!r.answerArea.tTable,zTable:!!r.answerArea.zTable}};var I=function e(r){return r.hints.length};var d=function e(r){return!!r.requiresScreenOrMouse};var m=function e(r){return r.taskType==="mastery"};var p=function e(r){return r.taskType==="practice"};var v=function e(r){return r.taskType==="topic_quiz"||r.taskType==="topic_unit_test"||r.taskType==="subject_challenge"||r.taskType==="mastery_challege"};var y=function e(r){if(!r){return null}var t=r.cards.map(function(e){return e.exerciseName});var n=r.userExercises;if(!n){throw new Error("userExercises is missing on taskData")}var s=n.reduce(function(e,r){var t=r.exerciseModel;var n=t.relatedVideos||[];var s=t.relatedContent||[];e[r.exercise]={id:t.id,title:t.translatedDisplayName,relatedVideos:n.map(function(e){return{contentId:e.contentId,duration:e.duration,translatedTitle:e.translatedTitle,translatedDescription:e.translatedDescription,kaUrl:e.kaUrl,imageUrl:e.imageUrl,relativeUrl:e.relativeUrl,id:e.id,progressKey:e.progressKey,thumbnailData:e.thumbnailData,nodeSlug:e.nodeSlug,youtubeId:e.translatedYoutubeId,conceptTagsInfo:e.conceptTagsInfo,__video:e}}),relatedContents:s.filter(function(e){return e!==null}).map(function(e){if(e.contentKind==="Video"){return J({},e,{slug:e.nodeSlug.replace("v/",""),youtubeId:e.translatedYoutubeId,__video:e})}else if(e.contentKind==="Article"){return J({},e,{imageUrl:e.thumbnailUrl,nodeUrl:e.relativeUrl,slug:e.nodeSlug.replace("a/","")})}else if(e.contentKind==="Exercise"){return J({},e,{slug:e.nodeSlug.replace("e/","")})}return e}),problemTypes:t.problemTypes,translatedProblemTypes:t.translatedProblemTypes,assessmentItemCount:t.assessmentItemCount,isQuiz:t.isQuiz,isSkillCheck:t.isSkillCheck,initialLevel:r.exerciseProgress.level,initialFpmLevel:r.fpmMasteryLevel,maximumExerciseProgressDt:r.maximumExerciseProgressDt,nodeSlug:t.nodeSlug};return e},{});var a=r.taskJson;if(!a){throw new Error("taskJson is missing on taskData")}return{exerciseDescriptors:t,infoByExercise:s,showSkipButton:r.includeSkipButton,requireAttemptBeforeHints:a.taskType==="topic_quiz"||a.taskType==="topic_unit_test"||a.taskType==="subject_challenge"||a.taskType==="mastery_challenge",completionCriteria:K.default.parse(a.completionCriteria.name),promotionCriteria:p(a)?a.promotionCriteria:undefined,pointBounty:a.pointBounty,taskType:a.taskType,taskId:a.id,taskKey:a.key,userMissionId:r.userMissionId,taskGenerationTime:m(a)?a.generationTime:undefined,taskTitle:a.translatedTitle,taskDescription:a.translatedDescription,taskReservedItems:a.reservedItems,taskSlug:p(a)?a.slug:undefined,exerciseNames:a.exerciseNames||a.exerciseData&&a.exerciseData.exerciseNames||n.map(function(e){return e.exercise}),content:p(a)?a.content:undefined,taskContentKey:v(a)||p(a)?a.contentKey:undefined}};var q=function e(r,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(!r||!t){return null}var s=r.taskJson;if(!s){throw new Error("taskJson is missing on taskData")}var a=s.taskAttemptHistory.map(function(e){return{correct:e.correct,seenHint:e.seenHint}});var i=r.cards;if(!i){throw new Error("cards is missing on taskData")}var o=r.userExercises;if(!o){throw new Error("userExercises is missing on taskData")}if(i.length>0){var u=o.find(function(e){return e.exercise===i[0].exerciseName});if(!u){throw new Error("couldn't find first userExercise")}var c=u.lastAttemptNumber===0&&u.lastCountHints===0&&n>0;if(c){a.push({correct:false,seenHint:true})}}var l=o.reduce(function(e,r){e[r.exercise]={currentLevel:r.exerciseProgress.level,currentFpmLevel:r.fpmMasteryLevel,totalDone:r.totalDone,initialHintsVisible:r.lastCountHints,initialNumberOfAttempts:r.lastAttemptNumber};return e},{});var f=o.reduce(function(e,r){e[r.exerciseModel.progressKey]=r.exercise;return e},{});var d=t&&JSON.parse(t.itemData);var m=K.default.parse(s.completionCriteria.name);var p=s.reservedItemsCompleted;var v={exerciseDescriptorIndex:0,exerciseProgressKeyToName:f,progressByExercise:l,attemptHistory:a,completedAssessmentItems:[],completionCriteriaText:K.default.format(K.default.parse(s.completionCriteria.name),a),completionCriteriaSatisfied:false,taskComplete:false,movingToNextProblem:false,reservedItemsCompleted:p,itemData:d,assessmentItemMetadata:{sha:t.sha,id:t.id,problemType:t.problemType,sidebarItems:G(d)},avatarParts:s.avatarPartsAwarded.slice(),badgesEarned:s.badgesAwarded.slice(),pointsEarned:s.pointsEarned,attemptPromises:[],assignmentContext:null,promotionCriteriaSatisfied:false};var g=K.default.isSatisfied(m,{taskProgress:v});var E=y(r);return J({},v,{completionCriteriaSatisfied:g,promotionCriteriaSatisfied:K.default.isPromoted(m,{taskProgress:v,taskInfo:E}),taskComplete:g})};var w=function e(r,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;if(!r||!t){return null}var s=r.cards;if(!s){throw new Error("cards is missing on taskData")}if(s.length===0){return{hintsVisible:0,totalHints:0,requiresScreenOrMouse:false,attemptMessage:null,answerStatus:"unanswered",numberOfAttempts:0,hintsAreFree:false,problemComplete:false,interacted:false,updatedAnswer:false,answerable:false,relatedContentsVisible:false,recentlyCheckedAnswer:false,guessLog:[],drawingAreaAvailable:false,keypadHeight:null,readOnly:false,showRationales:false,feedbackPopoverVisible:false}}var a=r.userExercises;if(!a){throw new Error("userExercises is missing on taskData")}var i=a.find(function(e){return e.exercise===s[0].exerciseName});if(!i){throw new Error("can't find first userExercise")}var o=i.lastAttemptNumber;var u=JSON.parse(t.itemData);var c=Math.max(i.lastCountHints,n||0);return{hintsVisible:c,totalHints:I(u),requiresScreenOrMouse:d(u),relatedContentsVisible:false,attemptMessage:null,answerStatus:c>0||o>0?"incorrect":"unanswered",numberOfAttempts:o,hintsAreFree:o>0,problemComplete:false,interacted:false,updatedAnswer:false,answerable:false,recentlyCheckedAnswer:false,guessLog:[],drawingAreaAvailable:true,keypadHeight:null,lastAttemptOrHintTime:Date.now(),lastGuess:null,readOnly:false,showRationales:false}};function g(e,r){var t=e.taskInfo;switch(r.type){case"RELOAD_EXERCISE":return y(null);case"LOADED_EXERCISE":return y(r.taskData);case"UPDATE_TASK":return y(r.taskData);default:return t}}function E(e,r){var t=e.taskInfo,n=e.taskProgress,s=e.problemProgress;switch(r.type){case"RELOAD_EXERCISE":{return q(null,null)}case"LOADED_EXERCISE":{return q(r.taskData,r.assessmentItem,r.offlineHintsCount)}case"CHECK_ANSWER":{if(!t){throw new Error("taskInfo not defined")}else if(!n){throw new Error("taskProgress not defined")}else if(!s){throw new Error("problemProgress not defined")}var a=r.score,i=a.correct,o=a.empty;var u=r.skipped;if(!u&&o){return n}var c=s.numberOfAttempts===0&&s.hintsVisible===0;var l=c?[].concat(n.attemptHistory,[{correct:u?false:i,seenHint:false}]):n.attemptHistory;var f=n.exerciseDescriptorIndex,d=n.progressByExercise;var m=t.exerciseDescriptors[f];var p=d[m].totalDone;var v=J({},d,j({},m,J({},d[m],{totalDone:p+(u||i?1:0)})));var g=J({},n,{attemptHistory:l,progressByExercise:v});var E={taskInfo:t,taskProgress:g,problemProgress:s};return J({},g,{completionCriteriaSatisfied:K.default.isSatisfied(t.completionCriteria,E),completionCriteriaText:K.default.format(t.completionCriteria,g.attemptHistory),promotionCriteriaSatisfied:K.default.isPromoted(t.completionCriteria,E)})}case"SHOW_HINT":{if(!t){throw new Error("taskInfo not defined")}else if(!n){throw new Error("taskProgress not defined")}else if(!s){throw new Error("problemProgress not defined")}var y=s.numberOfAttempts===0&&s.hintsVisible===0;if(y){var b=J({},n,{attemptHistory:[].concat(n.attemptHistory,[{correct:false,seenHint:true}])});var P={taskInfo:t,taskProgress:b,problemProgress:s};return J({},b,{completionCriteriaSatisfied:K.default.isSatisfied(t.completionCriteria,P),completionCriteriaText:K.default.format(t.completionCriteria,b.attemptHistory),promotionCriteriaSatisfied:K.default.isPromoted(t.completionCriteria,P)})}else{return n}}case"MOVING_TO_NEXT_PROBLEM":{return J({},n,{movingToNextProblem:true})}case"GOTO_NEXT_PROBLEM":{if(!t){throw new Error("taskInfo not defined")}else if(!n){throw new Error("taskProgress not defined")}var k=r.assessmentItem;var h=t.exerciseDescriptors[n.exerciseDescriptorIndex];var x=[].concat(n.completedAssessmentItems,[{metadata:J({},n.assessmentItemMetadata),exerciseName:h}]);var I=undefined;if(n.reservedItemsCompleted){I=[].concat(n.reservedItemsCompleted);var w=t.taskReservedItems;if(!w){throw new Error("taskReservedItem is undefined")}var T=W(w,n.assessmentItemMetadata.id);if(T){I.push(T)}}if(n.completionCriteriaSatisfied||!k){var D=J({},n,{completedAssessmentItems:x,movingToNextProblem:false,taskComplete:true});var O={taskInfo:t,taskProgress:D,problemProgress:s};return J({},D,{promotionCriteriaSatisfied:K.default.isPromoted(t.completionCriteria,O)})}var A=n.progressByExercise;var C=J({},A,j({},h,J({},A[h],{initialHintsVisible:0,initialNumberOfAttempts:0})));var S=JSON.parse(k.itemData);return J({},n,{completedAssessmentItems:x,exerciseDescriptorIndex:(n.exerciseDescriptorIndex+1)%t.exerciseDescriptors.length,progressByExercise:C,itemData:S,reservedItemsCompleted:I,assessmentItemMetadata:{sha:k.sha,id:k.id,problemType:k.problemType,sidebarItems:G(S)},movingToNextProblem:false})}case"ADD_AVATAR_PART":if(!n){throw new Error("taskProgress not defined")}return J({},n,{avatarParts:[].concat(n.avatarParts,[r.avatarPart])});case"ADD_BADGE":if(!n){throw new Error("taskProgress not defined")}return J({},n,{badgesEarned:[].concat(n.badgesEarned,[r.badge])});case"ADD_POINTS":if(!n){throw new Error("taskProgress not defined")}return J({},n,{pointsEarned:n.pointsEarned+r.points});case"ADD_ATTEMPT_PROMISE":if(!n){throw new Error("taskProgress not defined")}return J({},n,{attemptPromises:[].concat(n.attemptPromises,[r.promise])});case"UPDATE_USER_EXERCISE":{if(!n){throw new Error("taskProgress not defined")}var R=r.userExercise;return J({},n,{progressByExercise:J({},n.progressByExercise,j({},R.exercise,J({},n.progressByExercise[R.exercise],{currentLevel:R.exerciseProgress.level,currentFpmLevel:R.fpmMasteryLevel})))})}case"ON_FPM_PROMOTIONS":{if(!n){throw new Error("taskProgress not defined")}var N=r.promotions;var M=X(n,N||{});return J({},n,{progressByExercise:J({},n.progressByExercise,M)})}case"ADD_ASSIGNMENT_COMPLETED_CONTEXT":{var H=r.context,L=H.firstCompletion,B=H.pastDue,U=H.perfectScore,V=H.studentListName,F=H.improvedScore;return J({},n,{assignmentContext:{firstCompletion:L,pastDue:B,perfectScore:U,studentListName:V,improvedScore:F}})}default:return n}}function b(e,r){var t=e.taskInfo,n=e.taskProgress,s=e.problemProgress;switch(r.type){case"RELOAD_EXERCISE":{return w(null,null)}case"LOADED_EXERCISE":{return w(r.taskData,r.assessmentItem,r.offlineHintsCount)}case"REFRESH_LIVE_UPDATES":{if(!t){throw new Error("taskInfo not defined")}else if(!n){throw new Error("taskProgress not defined")}if(t.taskType!=="practice"){return s}var a=t.exerciseDescriptors[n.exerciseDescriptorIndex];var i=n.progressByExercise[a].currentFpmLevel;var o=(0,x.getLiveMasteryDetails)(n.attemptHistory,t.completionCriteria,i);return J({},s,{liveUpdateDetails:o})}case"SHOW_RELATED_CONTENTS":{return J({},s,{relatedContentsVisible:true})}case"CHECK_ANSWER":{if(!s){throw new Error("problemProgress not defined")}var u=r.score,c=u.empty,l=u.correct,f=u.message,d=u.guess,m=u.suppressAlmostThere;var p=r.skipped;var v=J({},s,{updatedAnswer:false,recentlyCheckedAnswer:!p,lastAttemptOrHintTime:Date.now(),lastGuess:JSON.stringify(d)});if(p||!c&&!l){return J({},v,{attemptMessage:null,answerStatus:"incorrect",hintsAreFree:true,numberOfAttempts:s.numberOfAttempts+1,problemComplete:false,guessLog:s.guessLog.concat(JSON.stringify(d)),feedbackPopoverVisible:!p})}else if(l){return J({},v,{attemptMessage:null,answerStatus:"correct",hintsAreFree:true,problemComplete:true,numberOfAttempts:s.numberOfAttempts+1,guessLog:s.guessLog.concat(JSON.stringify(d)),readOnly:true,showRationales:true,feedbackPopoverVisible:true})}else{return J({},v,{suppressAlmostThere:m,attemptMessage:f||i18n._("There are still more parts of this question to "+"answer."),feedbackPopoverVisible:true})}}case"GOTO_NEXT_PROBLEM":{if(!t){throw new Error("taskInfo not defined")}else if(!n){throw new Error("taskProgress not defined")}if(n.completionCriteriaSatisfied||!r.assessmentItem){return J({},s,{feedbackPopoverVisible:false})}var g=JSON.parse(r.assessmentItem.itemData);var E=I(g);var y=t.exerciseDescriptors[n.exerciseDescriptorIndex];var b=t.exerciseDescriptors[(n.exerciseDescriptorIndex+1)%t.exerciseDescriptors.length];var P=n.progressByExercise[b],k=P.initialHintsVisible,h=P.initialNumberOfAttempts;if(y===b){k=0;h=0}return J({},s,{hintsVisible:k,totalHints:E,attemptMessage:null,answerStatus:k>0||h>0?"incorrect":"unanswered",numberOfAttempts:h,hintsAreFree:false,problemComplete:false,interacted:false,updatedAnswer:false,answerable:false,recentlyCheckedAnswer:false,relatedContentsVisible:false,guessLog:[],drawingAreaAvailable:true,readOnly:false,showRationales:false,feedbackPopoverVisible:false,lastAttemptOrHintTime:Date.now()})}case"SHOW_HINT":{if(!s){throw new Error("problemProgress not defined")}return J({},s,{answerStatus:s.answerStatus==="correct"?s.answerStatus:"incorrect",hintsVisible:s.hintsVisible+1,lastAttemptOrHintTime:Date.now()})}case"ANSWERABLE_CHANGED":{return J({},s,{answerable:r.answerable})}case"INTERACTED":{return J({},s,{interacted:true,updatedAnswer:true})}case"KEYPAD_LAYOUT_CHANGED":{return J({},s,{keypadHeight:r.height})}case"CHECK_ANSWER_TIMEOUT":{return J({},s,{recentlyCheckedAnswer:false})}case"SET_DRAWING_AREA_AVAILABILITY":{return J({},s,{drawingAreaAvailable:r.available})}case"HIDE_FEEDBACK_POPOVER":{return J({},s,{feedbackPopoverVisible:false})}default:return s}}var P=function e(r){var t=r.isLoaded,n=r.inModal,s=n===void 0?false:n,a=r.inPractice,i=a===void 0?false:a,o=r.nextItem,u=r.nextTaskKind,c=r.topic,l=r.topicId,f=r.onShowRelatedContent;return{isLoaded:t,inModal:s,inPractice:i,nextItem:o,nextTaskKind:u,topic:c,topicId:l,movingToNextTask:false,errorMessage:null,onShowRelatedContent:f}};var k=function e(r,t){var n=r.environmentState;switch(t.type){case"RELOAD_EXERCISE":return J({},n,{isLoaded:false,errorMessage:null});case"LOADED_EXERCISE":return J({},n,{isLoaded:true});case"MOVING_TO_NEXT_TASK":return J({},n,{movingToNextTask:true,isLoaded:false});case"CLEAR_ERROR":return J({},n,{errorMessage:null});case"REPORT_ERROR":return J({},n,{errorMessage:t.errorMessage});case"RESET_IS_LOADED":return J({},n,{isLoaded:false});default:return n}};function h(e,r){return{taskInfo:g(e,r),taskProgress:E(e,r),problemProgress:b(e,r),environmentState:k(e,r)}}var T=function e(s){return function(n){return function(t){return function(e){var r=t(e);s(e,n.getState());return r}}}};var D=[s.default];if(false){var O}var A=function e(r){return f(n.applyMiddleware.apply(void 0,[T(r)].concat(D)))(n.createStore)};var C=function e(r,t){var n=r.nextItem,s=r.nextTaskKind,a=r.topic,i=r.topicId,o=r.inModal,u=r.inPractice,c=r.onShowRelatedContent;return A(t)(h,{taskInfo:y(null),taskProgress:q(null,null),problemProgress:w(null,null),environmentState:P({isLoaded:false,nextItem:n,nextTaskKind:s,topic:a,topicId:i,inModal:o,inPractice:u,onShowRelatedContent:c})})};function S(e){var r=e.taskInfo,t=e.taskProgress;if(!r){throw new Error("taskInfo not defined")}else if(!t){throw new Error("taskProgress not defined")}var n=r.exerciseDescriptors[t.exerciseDescriptorIndex];return J({exerciseName:n},t.progressByExercise[n],r.infoByExercise[n])}var R=function e(r){var t=r.split("|");if(t.length!==2){return null}return{exerciseId:t[0],itemId:t[1]}};var W=function e(r,t){var n=true;var s=false;var a=undefined;try{for(var i=r[Symbol.iterator](),o;!(n=(o=i.next()).done);n=true){var u=o.value;var c=R(u);if(c&&c.itemId===t){return u}}}catch(e){s=true;a=e}finally{try{if(!n&&i.return!=null){i.return()}}finally{if(s){throw a}}}return null};var N=function e(r,t){var n=t.reduce(function(e,r){e[r]=e[r]?e[r]+1:1;return e},{});var s=r.filter(function(e){if((n[e]||0)===0){return true}n[e]-=1;return false});return s.map(R).filter(function(e){return!!e})};var M=function e(r){var t=r.taskInfo,n=r.taskProgress;if(!t||!n||!t.taskReservedItems){return{}}var s=n.reservedItemsCompleted;if(!s){throw new Error("reservedItemsCompleted is undefined")}var a=N(t.taskReservedItems,s);return a.length>0?a[0]:{}};var H=function e(r){var t=r.taskInfo,n=r.taskProgress;if(!t||!n||!t.taskReservedItems){return{}}var s=n.reservedItemsCompleted;if(!s){throw new Error("reservedItemsCompleted is undefined")}var a=N(t.taskReservedItems,s);return a.length>1?a[1]:{}};function L(e){var r=e.taskInfo,t=e.taskProgress;if(!r){throw new Error("taskInfo not defined")}else if(!t){throw new Error("taskProgress not defined")}var n=r.exerciseDescriptors[(t.exerciseDescriptorIndex+1)%r.exerciseDescriptors.length];return J({exerciseName:n},t.progressByExercise[n],r.infoByExercise[n])}function B(e){var r=e.taskProgress,t=e.problemProgress;if(!r){throw new Error("taskProgress not defined")}else if(!t){throw new Error("problemProgress not defined")}var n=S(e),s=n.exerciseName;var a=L(e),i=a.id,o=a.exerciseName,u=a.totalDone,c=a.isQuiz,l=a.assessmentItemCount;var f;if(s===o){f=u+(t&&t.problemComplete?1:2)}else{f=u+1}var d=null;if(c){var m=r&&r.attemptHistory||[];var p=m.length;var v=l;d=p%v}return{exerciseId:i,problemNumber:f,quizProblemNumber:d}}function U(e){var r=e.taskProgress;if(!r){throw new Error("taskProgress not defined")}var t=r.assessmentItemMetadata.problemType;var n=S(e),s=n.relatedContents,a=n.problemTypes;if(a==null){return[]}var i=a.filter(function(e){return e.name!==t});var o=s.filter(function(r){return i.every(function(e){return!(e.relatedVideos||[]).map(function(e){return""+e}).includes(""+r.id)})});return o}var X=function e(i,r){if(!r){return{}}var t=Object.entries(r).reduce(function(e,r){var t=o(r,2),n=t[0],s=t[1];var a=i.exerciseProgressKeyToName[n];if(!a){return e}e[a]=J({},i.progressByExercise[a],{currentFpmLevel:s});return e},{});return t};e.exports={create:C,getCurrentExerciseData:S,getCurrentReservedItem:M,getFpmPromotionUpdates:X,getIncompleteReservedItems:N,getNextExerciseData:L,getNextProblemData:B,getNextReservedItem:H,parseReservedItem:R,getRelatedContents:U,taskInfo:g,taskProgressReducer:E,problemProgress:b}},xoFN:function(e,r,t){"use strict";t("pNMO");t("ma9I");t("TeQF");t("5DmW");t("FZtP");function n(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};var n=Object.keys(t);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))}n.forEach(function(e){s(r,e,t[e])})}return r}function s(e,r,t){if(r in e){Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true})}else{e[r]=t}return e}var a="khan-exercises-interface-persistent-hint-set";function i(){try{return JSON.parse(localStorage.getItem(a))||{}}catch(e){return{}}}function o(e){return i()[e]||null}function u(e){c(e,undefined)}function c(e,r){var t=i();try{localStorage.setItem(a,JSON.stringify(n({},t,s({},e,r))))}catch(e){}}e.exports={getOfflineHintsCount:o,trackHintsOffline:c,clearOfflineHintsCount:u}}}]);
//# sourceMappingURL=../../sourcemaps/en/b5e4eb20f666c9633e4670bfbbd78e62.123c2089262db27ce0ca.js.map